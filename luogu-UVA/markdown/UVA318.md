# Domino Effect

## 题意翻译

@[lin_toto](/space/show?uid=256)

题目名字：多米诺骨牌效应

## 题目描述

您是否知道多米诺骨牌除了玩之外还可以用来做其他事情？拿一些多米诺骨牌，然后将它们排成一排，并在它们之间只留一小段距离。如果你做得对，你可以推倒第一张多米诺骨牌并使所有其他的多米诺骨牌依次倒下（这就是“多米诺骨牌效应”的由来）。

数量太少的多米诺骨牌有点毫无意义，所以有些人在八十年代初就走向了相反的极端。他们使用数以百万计的不同颜色和材料的多米诺骨牌，用倒下的精美多米诺骨牌组成的图案填满整个大厅，来创造（短命的）艺术品。在这些过程中，通常不只有一排多米诺骨牌同时倒下。你可以发现，时间是一个重要的影响因素。

现在你的任务是编写一个程序，给定由多米诺骨牌组成的系统，计算最后一个多米诺骨牌在何时何地倒下。该系统由几个简单的关键多米诺骨牌和其之间的多米诺骨牌连接而成。当一个关键的多米诺骨牌倒下时，连接到该关键多米诺骨牌的所有多米诺骨牌都开始倒下（除了那些已经倒下的多米诺骨牌）。当倒下的多米诺骨牌到达尚未倒下的其他关键多米诺骨牌时，这些关键多米诺骨牌也会倒下并且引起与它们相连的多米诺骨牌开始倒下。多米诺骨牌行可能会从任何一端开始倒下。甚至有可能同一多米诺骨牌行从两端开始倒下，在这种情况下，该行倒下的最后一张多米诺骨牌位于其行两端的关键多米诺骨牌之间。您可以假设行中的多米诺骨牌以均匀的速度倒下。

## 输入输出格式

### 输入格式

输入文件包含几个多米诺骨牌系统的描述。每个描述的第一行包含两个整数：关键多米诺骨牌的数量n（1 <= n <500）和它们之间的行数m。关键的多米诺骨牌从1到n编号。在任何一对关键多米诺骨牌之间至多有一行并且多米诺骨牌图是连通的，即至少有一种方法可以通过多米诺骨牌行从一个关键多米诺骨牌到达任何其他多米诺骨牌。

以下m行每行包含三个整数a，b和l，表示在关键的多米诺骨牌a和b之间有一行，从一端到另一端需要l秒。

每个系统都是通过翻推倒编号为1的多米诺骨牌来启动的。

文件以一组空的多米诺骨牌系统（n = m = 0）结束，你不应该处理此组数据。

### 输出格式

对于每组数据，输出一行说明数据的编号（'System ＃1'，'System ＃2'等）。然后输出一行，其中包含最后一张多米诺骨牌落下的时间，精确到小数点后一位数，以及最后一张多米诺骨牌倒下的位置，这个位置为某个关键多米诺骨牌或两个关键多米诺骨牌之间（在这种情况下 ，按升序输出两个关键多米诺骨牌编号）。按照输出示例的格式输出。输入保证只有一个解决方案。**在每组数据后输出一个空行。**

## 题目描述

[problemUrl]: https://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&category=5&page=show_problem&problem=254

[PDF](https://uva.onlinejudge.org/external/3/p318.pdf)

![](https://cdn.luogu.com.cn/upload/vjudge_pic/UVA318/2702423b21f8117735d4166f8f3b0cd98bb93416.png)

## 输入输出格式

### 输入格式

![](https://cdn.luogu.com.cn/upload/vjudge_pic/UVA318/841e3d33cf3a5f019fbe6b901261038aa9ef777b.png)

### 输出格式

![](https://cdn.luogu.com.cn/upload/vjudge_pic/UVA318/af232ea4f8ce5e0ca707e41c544fd7d9545b7e21.png)

## 输入输出样例

### 输入样例 #1

```cpp
2 1
1 2 27
3 3
1 2 5
1 3 5
2 3 5
0 0
```


### 输出样例 #1

```cpp
System #1
The last domino falls after 27.0 seconds, at key domino 2.
System #2
The last domino falls after 7.5 seconds, between key dominoes 2 and 3.
```


