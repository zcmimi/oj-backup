<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>PRETTYP - Pretty Printing - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573449816:WLUqbl6rTBtjSwCi+lKDcARmBkJfWw1rT++Yc18JY1g=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22%5BEnglish%5D%28%5C%2Fproblems%5C%2FPRETTYP%5C%2Fen%5C%2F%29%20%5BVietnamese%5D%28%5C%2Fproblems%5C%2FPRETTYP%5C%2Fvn%5C%2F%29%20An%20IT%20company%20decided%20to%20publish%20an%20internal%20newsletter%20describing%20the%20projects%20that%20have%20been%20successfully%20completed.%20Each%20department%20submits%20a%20text%20paragraph%20that%20will%20be%20printed%20in%20a%20corresponding%20designated%20box%20of%20the%20newsletter.%20Let%5Cu2019s%20assume%20that%20the%20paragraph%20contains%20only%20characters%20a...z%20and%20spaces%20%28ASCII%20code%20is%2032%29%20in%20several%20lines%2C%20and%20a%20word%20is%20defined%20to%20be%20the%20longest%20sequence%20of%20non-space%20characters%20on%20a%20line.%5Cn%5CnThe%20printing%20has%20to%20satisfy%20the%20following%20rules%3A%5Cn%5Cn-%20Text%20will%20be%20printed%20in%20a%20fixed-width%20font%20%28meaning%20that%20every%20character%20occupies%20a%20fixed%20size%20width%29%20from%20left%20to%20right%20and%20going%20down%20to%20the%20next%20line%20at%20the%20end%20of%20every%20line.%5Cn-%20The%20number%20of%20printed%20characters%20in%20every%20line%20must%20be%20the%20same.%5Cn-%20Words%20are%20printed%20in%20the%20box%20in%20the%20same%20order%20as%20they%20appear%20in%20the%20given%20paragraph.%20A%20word%20cannot%20be%20split%20or%20printed%20on%20more%20than%20one%20line.%5Cn-%20Consecutive%20words%20on%20the%20same%20line%20are%20separated%20by%20exactly%20one%20space.%5Cn-%20Every%20line%20contains%20only%20words%20from%20the%20original%20paragraph%20and%20spaces.%5Cn-%20Any%20line%20that%20starts%20with%20a%20space%20must%20contain%20only%20spaces.%5Cn%5Cn%20The%20newsletter%20editor%20wants%20to%20formally%20assess%20the%20prettiness%20level%20of%20a%20paragraph%20printing%20by%20defining%20the%20unbalance%20of%20it%20as%20the%20sum%20of%20the%20cubes%20of%20the%20number%20of%20space%20characters%20at%20the%20end%20of%20each%20line%20including%20lines%20containing%20only%20spaces.%20The%20smaller%20the%20unbalance%2C%20the%20prettier%20the%20paragraph%20printing%20is.%5Cn%5Cn%20Consider%20the%20following%20example%20where%20the%20paragraph%20is%20printed%20in%20a%20box%20with%20three%20lines%20and%20each%20line%20has%20a%2020-characters%20width%20in%20two%20ways%3A%5Cn%5Cn%20%20%60%60%60%5Cn%5Cnaaa%20bbbbbbbbb%20c%20dddd%5Cneeeeeee%20ffffff%5Cnggggggggg%5Ct%5Ct%5Cn%60%60%60%5Cn%20%20%20%60%60%60%5Cn%5Cnaaa%20bbbbbbbbb%20%20%20%20%20%20%5Cnc%20dddd%20eeeeeee%20%20%20%20%20%20%20%5Cnffffff%20ggggggggg%5Cn%60%60%60%5Cn%20%20In%20this%20example%2C%20the%20unbalance%20of%20the%20paragraph%20printing%20on%20the%20left%20is%200%5E3%20%2B%206%5E3%20%2B%2011%5E3%20%3D%201547%20while%20the%20unbalance%20of%20the%20paragraph%20printing%20on%20the%20right%20is%207%5E3%20%2B%206%5E3%20%2B%204%5E3%20%3D%20623.%20The%20paragraph%20printing%20on%20the%20right%20is%20considered%20prettier.%5Cn%5Cn%20Given%20a%20text%20paragraph%20and%20a%20box%20to%20be%20printed%2C%20your%20task%20is%20to%20write%20a%20program%20to%20find%20the%20prettiest%20printing%20that%20has%20the%20smallest%20unbalance.%22%2C%22inputFormat%22%3A%22%20The%20input%20file%20consists%20of%20several%20data%20sets.%20The%20first%20line%20of%20the%20input%20file%20contains%20the%20number%20of%20data%20sets%20which%20is%20a%20positive%20integer%20and%20is%20not%20bigger%20than%2020.%20The%20following%20lines%20describe%20the%20data%20sets.%5Cn%5Cn%20For%20each%20data%20set%2C%20the%20first%20line%20contains%20an%20integer%20L%20%280%20%3C%20L%20%5Cu2264%20100%29%20representing%20the%20number%20of%20lines%20in%20the%20designated%20box.%20The%20second%20line%20contains%20an%20integer%20W%20%280%20%3C%20W%20%5Cu2264%201000%29%20representing%20the%20number%20of%20characters%20width%20of%20the%20box.%20The%20remaining%20lines%20contain%20the%20paragraph%20with%20no%20more%20than%201000%20words%20ended%20with%20a%20blank%20line.%22%2C%22outputFormat%22%3A%22%20For%20each%20data%20test%2C%20write%20on%20one%20line%20the%20corresponding%20unbalance%20of%20the%20prettiest%20paragraph%20printing%20in%20the%20designated%20box.%20Write%20-1%20in%20case%20there%20does%20not%20exist%20any%20way%20to%20print%20the%20paragraph%20in%20the%20designated%20box.%22%2C%22samples%22%3A%5B%5B%223%5Cr%5Cn3%5Cr%5Cn20%5Cr%5Cnaaa%20bbbbbbbbb%20%5Cr%5Cnc%20dddd%5Cr%5Cneeeeeee%20ffffff%5Cr%5Cnggggggggg%5Cr%5Cn%5Cr%5Cn2%5Cr%5Cn5%5Cr%5Cnabcde%20abcde%5Cr%5Cn%5Cr%5Cn2%5Cr%5Cn5%5Cr%5Cnabcde%20abcde%20%5Cr%5Cna%22%2C%22623%5Cr%5Cn0%5Cr%5Cn-1%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B100%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F3642%22%2C%22id%22%3A%223642%22%7D%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Atrue%2C%22totalSubmit%22%3A0%2C%22totalAccepted%22%3A0%2C%22pid%22%3A%22SP3642%22%2C%22title%22%3A%22PRETTYP%20-%20Pretty%20Printing%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22PRETTYP%20-%20Pretty%20Printing%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>PRETTYP - Pretty Printing</h1>
<h2>题目描述</h2>
<div>[English](/problems/PRETTYP/en/) [Vietnamese](/problems/PRETTYP/vn/) An IT company decided to publish an internal newsletter describing the projects that have been successfully completed. Each department submits a text paragraph that will be printed in a corresponding designated box of the newsletter. Let’s assume that the paragraph contains only characters a...z and spaces (ASCII code is 32) in several lines, and a word is defined to be the longest sequence of non-space characters on a line.
The printing has to satisfy the following rules:
- Text will be printed in a fixed-width font (meaning that every character occupies a fixed size width) from left to right and going down to the next line at the end of every line.
- The number of printed characters in every line must be the same.
- Words are printed in the box in the same order as they appear in the given paragraph. A word cannot be split or printed on more than one line.
- Consecutive words on the same line are separated by exactly one space.
- Every line contains only words from the original paragraph and spaces.
- Any line that starts with a space must contain only spaces.
The newsletter editor wants to formally assess the prettiness level of a paragraph printing by defining the unbalance of it as the sum of the cubes of the number of space characters at the end of each line including lines containing only spaces. The smaller the unbalance, the prettier the paragraph printing is.
Consider the following example where the paragraph is printed in a box with three lines and each line has a 20-characters width in two ways:
```
aaa bbbbbbbbb c dddd
eeeeeee ffffff
ggggggggg
```
```
aaa bbbbbbbbb
c dddd eeeeeee
ffffff ggggggggg
```
In this example, the unbalance of the paragraph printing on the left is 0^3 + 6^3 + 11^3 = 1547 while the unbalance of the paragraph printing on the right is 7^3 + 6^3 + 4^3 = 623. The paragraph printing on the right is considered prettier.
Given a text paragraph and a box to be printed, your task is to write a program to find the prettiest printing that has the smallest unbalance.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div> The input file consists of several data sets. The first line of the input file contains the number of data sets which is a positive integer and is not bigger than 20. The following lines describe the data sets.
For each data set, the first line contains an integer L (0 < L ≤ 100) representing the number of lines in the designated box. The second line contains an integer W (0 < W ≤ 1000) representing the number of characters width of the box. The remaining lines contain the paragraph with no more than 1000 words ended with a blank line.</div>
<h3>输出格式</h3>
<br />
<div> For each data test, write on one line the corresponding unbalance of the prettiest paragraph printing in the designated box. Write -1 in case there does not exist any way to print the paragraph in the designated box.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>3
3
20
aaa bbbbbbbbb 
c dddd
eeeeeee ffffff
ggggggggg

2
5
abcde abcde

2
5
abcde abcde 
a</code></pre>
<h3>输出样例 #1</h3>
<pre><code>623
0
-1</code></pre>
</article>
</div>
</div>
</body>
</html>
