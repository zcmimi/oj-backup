<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>DSUBTREE - Distinct Subtrees - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573450154:tu1HLH0na/B1yKGi/+pIZBriijmIKjDu9nNKEmN03eM=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22Given%20an%20unrooted%20tree%2C%20the%20subtree%20is%20defined%20as%20a%20connected%20component%20of%20the%20given%20tree.%20Two%20subtrees%20are%20considered%20the%20same%20if%20there%20exists%20a%20map%20from%20nodes%20of%20one%20tree%20to%20another%20so%20that%20the%20edges%20of%20both%20trees%20are%20corresponding%20the%20same%20pair%20of%20nodes%20after%20mapping.%5Cn%5CnYour%20task%20is%20to%20find%20out%20how%20many%20distinct%20subtrees%20for%20a%20given%20unrooted%20tree.%22%2C%22inputFormat%22%3A%22The%20input%20consists%20of%20multiple%20test%20cases.%20The%20first%20line%20of%20input%20contains%20an%20integer%20denoting%20the%20number%20of%20test%20cases.%5Cn%5CnFor%20each%20test%20case%2C%20the%20first%20line%20contains%20one%20integer%20%2A%2An%2A%2A%20denoting%20the%20number%20of%20nodes%20of%20the%20given%20tree.%20%281%20%3C%3D%20%2A%2An%2A%2A%20%3C%3D%2015%29%5Cn%5CnThen%20%2A%2An%2A%2A-1%20lines%20follow%2C%20each%20line%20contains%20two%20integers%20denoting%20an%20edge%20of%20the%20tree.%20The%20index%20of%20the%20node%20counts%20from%201.%22%2C%22outputFormat%22%3A%22For%20each%20test%20case%2C%20output%20the%20number%20of%20distinct%20subtrees%20for%20the%20given%20tree.%22%2C%22samples%22%3A%5B%5B%222%5Cr%5Cn3%5Cr%5Cn1%202%5Cr%5Cn1%203%5Cr%5Cn9%5Cr%5Cn9%204%5Cr%5Cn4%203%5Cr%5Cn1%203%5Cr%5Cn7%204%5Cr%5Cn1%206%5Cr%5Cn5%207%5Cr%5Cn2%204%5Cr%5Cn6%208%22%2C%22Case%20%231%3A%203%5Cr%5CnCase%20%232%3A%2021%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B1000%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F9505%22%2C%22id%22%3A%229505%22%7D%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Atrue%2C%22totalSubmit%22%3A0%2C%22totalAccepted%22%3A0%2C%22pid%22%3A%22SP9505%22%2C%22title%22%3A%22DSUBTREE%20-%20Distinct%20Subtrees%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22DSUBTREE%20-%20Distinct%20Subtrees%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>DSUBTREE - Distinct Subtrees</h1>
<h2>题目描述</h2>
<div>Given an unrooted tree, the subtree is defined as a connected component of the given tree. Two subtrees are considered the same if there exists a map from nodes of one tree to another so that the edges of both trees are corresponding the same pair of nodes after mapping.
Your task is to find out how many distinct subtrees for a given unrooted tree.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The input consists of multiple test cases. The first line of input contains an integer denoting the number of test cases.
For each test case, the first line contains one integer **n** denoting the number of nodes of the given tree. (1 <= **n** <= 15)
Then **n**-1 lines follow, each line contains two integers denoting an edge of the tree. The index of the node counts from 1.</div>
<h3>输出格式</h3>
<br />
<div>For each test case, output the number of distinct subtrees for the given tree.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>2
3
1 2
1 3
9
9 4
4 3
1 3
7 4
1 6
5 7
2 4
6 8</code></pre>
<h3>输出样例 #1</h3>
<pre><code>Case #1: 3
Case #2: 21</code></pre>
</article>
</div>
</div>
</body>
</html>
