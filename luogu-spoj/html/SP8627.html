<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>NY10F - I2C - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573450112:7VLjF9reOTx5+05uxA1rrUAwmjJYTj+wimL5cWdg0OM=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22I%20%24%20%5E%7B2%7D%20%24%20C%20%28Inter-Integrated%20Circuit%29%20is%20a%20serial%20communication%20protocol%20that%20is%20used%20to%20attach%20low-speed%20peripherals%20%28100%20kbit%5C%2Fsec%29%20to%20a%20motherboard%2C%20embedded%20system%20or%20cell%20phone.%20A%20single%20I%20%24%20%5E%7B2%7D%20%24%20C%20data%20bus%20may%20have%20several%20devices%20attached%2C%20each%20with%20a%20different%207-bit%20address.%20One%20of%20the%20nice%20things%20about%20I%20%24%20%5E%7B2%7D%20%24%20C%20is%20that%20it%20only%20requires%20two%20signal%20lines%2C%20SCL%20%28clock%29%20and%20SDA%20%28data%29.%20One%20bit%20of%20data%20is%20presented%20on%20the%20I2C%20data%20bus%20%28SDA%20line%29%20per%20clock%20%28SCL%29.%20Typically%2C%20one%20device%20on%20the%20bus%20is%20designated%20as%20the%20master%2C%20and%20the%20other%20devices%20are%20slaves.%20The%20master%20will%20initiate%20communication%20to%20a%20specific%20device%20on%20the%20bus%20by%20specifying%20its%20address%20in%20a%20transaction.%5Cn%5CnIf%20there%20is%20no%20activity%20on%20the%20I%20%24%20%5E%7B2%7D%20%24%20C%20bus%2C%20both%20the%20SCL%20and%20SDA%20signals%20are%20in%20a%20high%20state%20%281%29.%20The%20master%20initiates%20a%20transaction%20on%20the%20bus%20by%20pulling%20the%20SDA%20signal%20to%20a%20low%20state%20%280%29%2C%20while%20the%20SCL%20signal%20is%20high%20%281%29%3A%20this%20is%20called%20a%20START%20bit.%20At%20this%20point%2C%20all%20slaves%20on%20the%20bus%20must%20start%20paying%20attention%20to%20the%20signaling%20to%20see%20if%20the%20transaction%20is%20directed%20at%20them.%20The%20master%20will%20then%20send%20the%207bit%20slave%20address%20%28most%20significant%20bit%20first%29%2C%20one%20bit%20at-a-time.%20This%20is%20done%20by%20bringing%20the%20SCL%20signal%20low%20%280%29%2C%20presenting%20the%20next%20bit%20value%20on%20the%20SDA%20line%2C%20then%20releasing%20the%20SCL%20signal%20so%20it%20goes%20high%20%281%29.%20The%20slaves%20will%20read%20the%20SDA%20signal%20as%20soon%20as%20the%20clock%20goes%20high%20%281%29.%20This%20operation%20is%20repeated%207%20times%2C%20one%20for%20each%20bit%20of%20the%20desired%20slave%20address.%20Another%20data%20bit%20is%20presented%20on%20the%20bus%20in%20the%20same%20manner.%20This%20last%20bit%20is%20an%20indicator%20as%20to%20whether%20the%20master%20wants%20to%20read%20from%20%281%29%20or%20write%20to%20%280%29%20the%20addressed%20slave%20device.%20When%20a%20slave%20recognizes%20its%20address%20on%20the%20bus%2C%20it%20must%20acknowledge%20%28ACK%29%20that%20it%20is%20available%20and%20ready%20by%20pulling%20the%20SDA%20line%20low.%20The%20master%20will%20see%20this%20the%20next%20time%20it%20brings%20the%20clock%20high%2C%20at%20which%20point%2C%20the%20data%20transfer%20can%20begin.%20If%20no%20ACK%20is%20seen%20this%20means%20that%20the%20slave%20specified%20by%20the%20address%20does%20not%20exist.%20Note%3A%20If%20no%20device%20pulls%20a%20signal%20low%2C%20it%20will%20go%20high%20by%20default%3B%20a%20device%20simplyreleases%20a%20signal%2C%20and%20it%20will%20go%20high.%5Cn%5CnData%20is%20always%20transferred%20as%208%20bit%20bytes%2C%201%20bit%20at-a-time%2C%20most%20significant%20bit%20first.%20After%20each%20byte%2C%20the%20slave%20must%20ACK%20the%20master%20by%20pulling%20the%20SDA%20line%20low.%20If%20the%20slave%20is%20not%20ready%20to%20transmit%20%28or%20receive%29%20the%20next%20byte%20of%20data%2C%20it%20may%20pull%20the%20SCL%20line%20low.%20This%20will%20cause%20the%20master%20to%20go%20into%20a%20wait%20mode%20until%20the%20slave%20is%20ready.%20The%20slave%20indicates%20it%20is%20ready%20by%20bringing%20SDA%20low%2C%20and%20releasing%20the%20SCL%20line%20so%20it%20goes%20high.%20The%20next%20byte%20of%20data%20can%20then%20be%20transferred.%20The%20sequence%20repeats%20until%20the%20master%20decides%20all%20the%20data%20has%20been%20transferred%2C%20at%20which%20point%20it%20will%20send%20a%20STOP%20bit.%20This%20is%20done%20when%20the%20master%20lets%20the%20SDA%20line%20go%20high%20while%20the%20SCL%20line%20is%20high.%5Cn%5CnFor%20this%20problem%2C%20you%20will%20write%20a%20program%20that%20sniffs%20the%20_I_%20%24%20%5E%7B2%7D%20%24%20_C_%20bus%20signals%20and%20displays%20the%20details%20of%20transactions.%5Cn%5Cn%20%20%20%5CnInput%5Cn-----%5Cn%5CnThe%20first%20line%20of%20input%20contains%20a%20single%20integer%20_P_%2C%20%281%21%5B%24%20%5C%5Cle%24%5D%28http%3A%5C%2F%5C%2Facmicpc-live-archive.uva.es%5C%2Fnuevoportal%5C%2Fdata%5C%2F4878img1.png%29_P_%21%5B%24%20%5C%5Cle%24%5D%28http%3A%5C%2F%5C%2Facmicpc-live-archive.uva.es%5C%2Fnuevoportal%5C%2Fdata%5C%2F4878img1.png%291000%29%2C%20which%20is%20the%20number%20of%20data%20sets%20that%20follow.%20Each%20data%20set%20consists%20of%20multiple%20lines%20which%20represents%20a%20single%20_I_%20%24%20%5E%7B2%7D%20%24%20_C_%20transaction.%20The%20first%20line%20contains%20two%20%282%29%20decimal%20integer%20values%3A%20the%20problem%20number%2C%20followed%20by%20a%20space%2C%20followed%20by%20the%20number%20of%20signal%20samples%20_S_%2C%20%281%21%5B%24%20%5C%5Cle%24%5D%28http%3A%5C%2F%5C%2Facmicpc-live-archive.uva.es%5C%2Fnuevoportal%5C%2Fdata%5C%2F4878img1.png%29_S_%21%5B%24%20%5C%5Cle%24%5D%28http%3A%5C%2F%5C%2Facmicpc-live-archive.uva.es%5C%2Fnuevoportal%5C%2Fdata%5C%2F4878img1.png%291161%29%2C%20for%20the%20transaction.%20The%20remaining%20line%28s%29%20contain%28s%29%20the%20signal%20samples.%20Each%20line%20of%20samples%20contains%2040%20samples%20%28except%20the%20last%20which%20may%20contain%20less%29.%20Each%20sample%20consists%20of%202%20binary%20digits%20characters%20representing%20SCL%20and%20SDA%20in%20that%20order.%5Cn%5Cn%20%20%20%5CnOutput%5Cn------%5Cn%5CnFor%20each%20data%20set%2C%20display%20a%20single%20line%20containing%20a%20decimal%20integer%20giving%20the%20data%20set%20number%20followed%20by%20a%20single%20space%2C%20followed%20by%20a%20description%20of%20the%20transaction.%20There%20will%20only%20be%20six%20different%20descriptions%20%28two%20non-error%20cases%2C%20and%20four%20error%20cases%29%3A%5Cn%5CnNon-error%20cases%3A%5Cn%5CnWRITE%20OF%20_n_%20BYTES%20TO%20SLAVE%20_xx_%5Cn%5CnREAD%20OF%20_n_%20BYTES%20FROM%20SLAVE%20_xx_%5Cn%5Cn%20Error%20cases%3A%5Cn%5CnERROR%20NO%20START%20BIT%5Cn%5CnERROR%20NO%20STOP%20BIT%5Cn%5CnERROR%20NO%20ACK%20FROM%20SLAVE%20_xx_%5Cn%5CnERROR%20NO%20ACK%20FOR%20DATA%5Cn%5Cn_n_%20is%20a%20decimal%20integer%20%281%20-%20128%29%20representing%20the%20number%20of%20data%20bytes.%20%20%20%5Cn_xx_%20is%20a%202%20digit%20hexadecimal%20value%20%2800-7F%29%20representing%20the%20slave%20address.%20%20%20%5CnThe%20ERROR%20NO%20ACK%20FROM%20SLAVE%20_xx_%20case%20occurs%20when%20there%20is%20no%20ACK%20for%20the%20supplied%20address%20%20%20%5CnThe%20ERROR%20NO%20ACK%20FOR%20DATA%20case%20occurs%20when%20there%20is%20no%20ACK%20after%20a%20data%20byte%5Cn%5CnFor%20the%20error%20cases%2C%20only%20the%20first%20error%20detected%20should%20be%20displayed.%22%2C%22inputFormat%22%3A%22%22%2C%22outputFormat%22%3A%22%22%2C%22samples%22%3A%5B%5B%224%20%5Cr%5Cn1%2097%20%5Cr%5Cn01111001110010001000100111011101110111001000100010011100100010001000100010001000%20%5Cr%5Cn10001001110010001000100010011100100010001001110010001000100111001000100010001001%20%5Cr%5Cn1100100010001001110111001000101111%20%5Cr%5Cn2%20169%20%5Cr%5Cn01111000100010011100100010001001110010001000100010011100100010001000100010001000%20%5Cr%5Cn10001001110010001000100010011100100010001001110010001000100111001000100010001001%20%5Cr%5Cn11001000100010011101110010001000100111001000100111001000100010001000100111001000%20%5Cr%5Cn10011100100111001000100010011100100010011101110010001000100010011100100010011101%20%5Cr%5Cn110111001000101111%20%5Cr%5Cn3%2060%20%5Cr%5Cn01111000100010001001110010011101110010001000100010011100100010001000100010001000%20%5Cr%5Cn1000100111001000100010001001110010001111%20%5Cr%5Cn4%2040%20%5Cr%5Cn01111000100010011101110010011100100111001111111111111111111111111111111111111111%22%2C%221%20READ%20OF%204%20BYTES%20FROM%20SLAVE%2047%5Cr%5Cn2%20WRITE%20OF%208%20BYTES%20TO%20SLAVE%2011%20%5Cr%5Cn3%20ERROR%20NO%20STOP%20BIT%20%5Cr%5Cn4%20ERROR%20NO%20ACK%20FROM%20SLAVE%200B%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B666%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F8627%22%2C%22id%22%3A%228627%22%7D%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Atrue%2C%22totalSubmit%22%3A0%2C%22totalAccepted%22%3A0%2C%22pid%22%3A%22SP8627%22%2C%22title%22%3A%22NY10F%20-%20I2C%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22NY10F%20-%20I2C%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573363392;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>NY10F - I2C</h1>
<h2>题目描述</h2>
<div>I $ ^{2} $ C (Inter-Integrated Circuit) is a serial communication protocol that is used to attach low-speed peripherals (100 kbit/sec) to a motherboard, embedded system or cell phone. A single I $ ^{2} $ C data bus may have several devices attached, each with a different 7-bit address. One of the nice things about I $ ^{2} $ C is that it only requires two signal lines, SCL (clock) and SDA (data). One bit of data is presented on the I2C data bus (SDA line) per clock (SCL). Typically, one device on the bus is designated as the master, and the other devices are slaves. The master will initiate communication to a specific device on the bus by specifying its address in a transaction.
If there is no activity on the I $ ^{2} $ C bus, both the SCL and SDA signals are in a high state (1). The master initiates a transaction on the bus by pulling the SDA signal to a low state (0), while the SCL signal is high (1): this is called a START bit. At this point, all slaves on the bus must start paying attention to the signaling to see if the transaction is directed at them. The master will then send the 7bit slave address (most significant bit first), one bit at-a-time. This is done by bringing the SCL signal low (0), presenting the next bit value on the SDA line, then releasing the SCL signal so it goes high (1). The slaves will read the SDA signal as soon as the clock goes high (1). This operation is repeated 7 times, one for each bit of the desired slave address. Another data bit is presented on the bus in the same manner. This last bit is an indicator as to whether the master wants to read from (1) or write to (0) the addressed slave device. When a slave recognizes its address on the bus, it must acknowledge (ACK) that it is available and ready by pulling the SDA line low. The master will see this the next time it brings the clock high, at which point, the data transfer can begin. If no ACK is seen this means that the slave specified by the address does not exist. Note: If no device pulls a signal low, it will go high by default; a device simplyreleases a signal, and it will go high.
Data is always transferred as 8 bit bytes, 1 bit at-a-time, most significant bit first. After each byte, the slave must ACK the master by pulling the SDA line low. If the slave is not ready to transmit (or receive) the next byte of data, it may pull the SCL line low. This will cause the master to go into a wait mode until the slave is ready. The slave indicates it is ready by bringing SDA low, and releasing the SCL line so it goes high. The next byte of data can then be transferred. The sequence repeats until the master decides all the data has been transferred, at which point it will send a STOP bit. This is done when the master lets the SDA line go high while the SCL line is high.
For this problem, you will write a program that sniffs the _I_ $ ^{2} $ _C_ bus signals and displays the details of transactions.
Input
-----
The first line of input contains a single integer _P_, (1![$ \le$](http://acmicpc-live-archive.uva.es/nuevoportal/data/4878img1.png)_P_![$ \le$](http://acmicpc-live-archive.uva.es/nuevoportal/data/4878img1.png)1000), which is the number of data sets that follow. Each data set consists of multiple lines which represents a single _I_ $ ^{2} $ _C_ transaction. The first line contains two (2) decimal integer values: the problem number, followed by a space, followed by the number of signal samples _S_, (1![$ \le$](http://acmicpc-live-archive.uva.es/nuevoportal/data/4878img1.png)_S_![$ \le$](http://acmicpc-live-archive.uva.es/nuevoportal/data/4878img1.png)1161), for the transaction. The remaining line(s) contain(s) the signal samples. Each line of samples contains 40 samples (except the last which may contain less). Each sample consists of 2 binary digits characters representing SCL and SDA in that order.
Output
------
For each data set, display a single line containing a decimal integer giving the data set number followed by a single space, followed by a description of the transaction. There will only be six different descriptions (two non-error cases, and four error cases):
Non-error cases:
WRITE OF _n_ BYTES TO SLAVE _xx_
READ OF _n_ BYTES FROM SLAVE _xx_
Error cases:
ERROR NO START BIT
ERROR NO STOP BIT
ERROR NO ACK FROM SLAVE _xx_
ERROR NO ACK FOR DATA
_n_ is a decimal integer (1 - 128) representing the number of data bytes.
_xx_ is a 2 digit hexadecimal value (00-7F) representing the slave address.
The ERROR NO ACK FROM SLAVE _xx_ case occurs when there is no ACK for the supplied address
The ERROR NO ACK FOR DATA case occurs when there is no ACK after a data byte
For the error cases, only the first error detected should be displayed.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div></div>
<h3>输出格式</h3>
<br />
<div></div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>4 
1 97 
01111001110010001000100111011101110111001000100010011100100010001000100010001000 
10001001110010001000100010011100100010001001110010001000100111001000100010001001 
1100100010001001110111001000101111 
2 169 
01111000100010011100100010001001110010001000100010011100100010001000100010001000 
10001001110010001000100010011100100010001001110010001000100111001000100010001001 
11001000100010011101110010001000100111001000100111001000100010001000100111001000 
10011100100111001000100010011100100010011101110010001000100010011100100010011101 
110111001000101111 
3 60 
01111000100010001001110010011101110010001000100010011100100010001000100010001000 
1000100111001000100010001001110010001111 
4 40 
01111000100010011101110010011100100111001111111111111111111111111111111111111111</code></pre>
<h3>输出样例 #1</h3>
<pre><code>1 READ OF 4 BYTES FROM SLAVE 47
2 WRITE OF 8 BYTES TO SLAVE 11 
3 ERROR NO STOP BIT 
4 ERROR NO ACK FROM SLAVE 0B</code></pre>
</article>
</div>
</div>
</body>
</html>
