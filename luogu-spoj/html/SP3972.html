<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>STARGATE - Stargates - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573449843:NurtIV923mXIi9ZQYF5Qe2sp0FWioil4CvFSw6Z94B8=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22%20%5BEnglish%5D%28%5C%2Fproblems%5C%2FSTARGATE%5C%2Fen%5C%2F%29%20%5BVietnamese%5D%28%5C%2Fproblems%5C%2FSTARGATE%5C%2Fvn%5C%2F%29%5C%22A%20Long%20Time%20Ago%2C%20in%20a%20Galaxy%20Far%2C%20Far%20Away...%5C%22%20one%20advanced%20civilization%20discovered%20a%20manner%20of%20instant%20traveling%20between%20solar%20systems.%20Since%20that%20moment%2C%20they%20have%20devoted%20all%20their%20efforts%20to%20constructing%20pairs%20of%20stargates%20that%20connect%20distant%20planets.%20Soon%20enough%20communication%20network%20became%20so%20complex%20that%20they%20require%20help%20to%20maintain%20information%20about%20the%20connected%20worlds.%5Cn%5CnWrite%20a%20program%20that%20will%20help%20them%20maintain%20information%20about%20the%20connected%20systems%20and%20we%20will%20make%20sure%20that%20the%20best%20of%20your%20solutions%20will%20be%20forwarded%20to%20their%20space-time%20continuum.%5Cn%5CnPlanets%20A%20and%20B%20are%20connected%20if%20there%20is%20a%20direct%20stargate%20connection%20between%20them%2C%20or%20there%20is%20a%20planet%20sequence%20P1%2C%20P2%2C..Pn%20where%20P1%3DA%2C%20Pn%3DB%20and%20there%20is%20a%20direct%20stargate%20connection%20between%20Pk%20and%20Pk-1%2C%20k%20%5Cu2208%20%7B2%2C..n%7D.%5Cn%5CnConnections%20are%20bidirectional.%20There%20can%20be%20multiple%20connection%20paths%20between%20two%20planets.%5Cn%5Cn%20%60%60%60%5Cn%5CnInput%5Cn%60%60%60%5CnInput%20file%20consist%20of%20multiple%20data%20sets.%20Each%20data%20set%20occupies%20one%20or%20more%20lines.%20There%20are%20no%20empty%20lines%20in%20the%20input%20file.%20Each%20line%20starts%20with%20a%20single%20letter%20%5Cu2018D%5Cu2019%2C%20%5Cu2018C%5Cu2019%20or%20%5Cu2018Q%5Cu2019%20%28upper%20or%20lower%20case%29%20followed%20by%201%20to%205%20integers%20with%20following%20meaning%3A%5Cn%5Cn-%20%5Cu2018D%5Cu2019%20%28define%29%20has%20only%20one%20argument%20which%20defines%20number%20of%20planets%20N%20considered%20in%20following%20data%20set%20%28N%3C%3D6000000%2C%20planets%20are%20numerated%20from%201..N%29.%5Cn%5Cn-%20%5Cu2018C%5Cu2019%20%28connect%29%20creates%20a%20connection%20between%20a%20given%20pair%28s%29%20of%20planets.%5Cn-%20%5Cu2018Q%5Cu2019%20%28query%29%20examines%20if%20a%20given%20pair%28s%29%20of%20planets%20are%20connected.%5Cn%5CnBoth%20%5Cu2018C%5Cu2019%20and%20%5Cu2018Q%5Cu2019%20command%20%28%5Cu2018X%5Cu2019%20in%20following%20text%29%20share%20the%20same%20syntax%3A%5Cn%5CnX%20src%20dst%20%5Cu2013%20Creates%20a%20connection%20%28or%20query%29%20between%20given%20pair%20of%20planets%20%28src%2C%20dst%29.%5Cn%5CnX%20src%20dst%20nnn%20%5Cu2013%20Creates%20a%20connection%20%28or%20query%29%20between%20src%20planet%20and%20nnn%20consecutive%20planets%20numerated%20from%20dst.%5Cn%5CnExample%3A%20C%201%20100%203%20creates%20following%20links%20%281%2C100%29%2C%20%281%2C101%29%2C%20%281%2C102%29.%5Cn%5CnX%20src%20dst%20nnn%20step%20%5Cu2013%20Creates%20a%20connection%20%28or%20query%29%20between%20src%20planet%20and%20nnn%20planets%20numerated%20from%20dst%20with%20given%20step.%5Cn%5CnExample%3A%20C%201%20100%203%205%20creates%20following%20links%20%281%2C100%29%2C%20%281%2C105%29%2C%20%281%2C110%29.%5Cn%5CnX%20src%20dst%20nnn%20dststep%20srcstep%20%5Cu2013%20Creates%20a%20connection%20%28or%20query%29%20between%20nnn%20pairs%20of%20planets%20numerated%20from%20src%20with%20srcstep%20and%20dst%20with%20dststep%20respectively.%5Cn%5CnExample%3A%20C%201%20100%203%205%2015%20creates%20following%20links%20%281%2C100%29%2C%20%2816%2C105%29%2C%20%2831%2C110%29.%22%2C%22inputFormat%22%3A%22%22%2C%22outputFormat%22%3A%22%60%3Cp%3EOutput%20%20file%20%20contains%20one%20%20line%20pre%20each%20query%20%20%28%5Cu2018Q%5Cu2019%29%20%20line%20%20in%20%20the%20%20input%20%20file.%20%20Each%20%20line%20%20contains%20two%20%20numbers%20%3C%5C%2Fp%3E%3Cp%3Eseparated%20by%20a%20space.%20First%20value%20represents%20number%20of%20connected%20planet%20pairs%20from%20appropriate%20query%20while%20second%3C%5C%2Fp%3E%3Cp%3Erepresents%20number%20of%20disconnected%20planet%20pairs.%20%3C%5C%2Fp%3E%3Cbr%3E%3C%5C%2Fbr%3E%60%22%2C%22samples%22%3A%5B%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B925%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F3972%22%2C%22id%22%3A%223972%22%7D%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Atrue%2C%22totalSubmit%22%3A0%2C%22totalAccepted%22%3A0%2C%22pid%22%3A%22SP3972%22%2C%22title%22%3A%22STARGATE%20-%20Stargates%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22STARGATE%20-%20Stargates%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573363392;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>STARGATE - Stargates</h1>
<h2>题目描述</h2>
<div> [English](/problems/STARGATE/en/) [Vietnamese](/problems/STARGATE/vn/)"A Long Time Ago, in a Galaxy Far, Far Away..." one advanced civilization discovered a manner of instant traveling between solar systems. Since that moment, they have devoted all their efforts to constructing pairs of stargates that connect distant planets. Soon enough communication network became so complex that they require help to maintain information about the connected worlds.
Write a program that will help them maintain information about the connected systems and we will make sure that the best of your solutions will be forwarded to their space-time continuum.
Planets A and B are connected if there is a direct stargate connection between them, or there is a planet sequence P1, P2,..Pn where P1=A, Pn=B and there is a direct stargate connection between Pk and Pk-1, k ∈ {2,..n}.
Connections are bidirectional. There can be multiple connection paths between two planets.
```
Input
```
Input file consist of multiple data sets. Each data set occupies one or more lines. There are no empty lines in the input file. Each line starts with a single letter ‘D’, ‘C’ or ‘Q’ (upper or lower case) followed by 1 to 5 integers with following meaning:
- ‘D’ (define) has only one argument which defines number of planets N considered in following data set (N<=6000000, planets are numerated from 1..N).
- ‘C’ (connect) creates a connection between a given pair(s) of planets.
- ‘Q’ (query) examines if a given pair(s) of planets are connected.
Both ‘C’ and ‘Q’ command (‘X’ in following text) share the same syntax:
X src dst – Creates a connection (or query) between given pair of planets (src, dst).
X src dst nnn – Creates a connection (or query) between src planet and nnn consecutive planets numerated from dst.
Example: C 1 100 3 creates following links (1,100), (1,101), (1,102).
X src dst nnn step – Creates a connection (or query) between src planet and nnn planets numerated from dst with given step.
Example: C 1 100 3 5 creates following links (1,100), (1,105), (1,110).
X src dst nnn dststep srcstep – Creates a connection (or query) between nnn pairs of planets numerated from src with srcstep and dst with dststep respectively.
Example: C 1 100 3 5 15 creates following links (1,100), (16,105), (31,110).</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div></div>
<h3>输出格式</h3>
<br />
<div>`<p>Output file contains one line pre each query (‘Q’) line in the input file. Each line contains two numbers </p><p>separated by a space. First value represents number of connected planet pairs from appropriate query while second</p><p>represents number of disconnected planet pairs. </p><br></br>`</div>
<h2>输入输出样例</h2>
<i>暂无测试点</i>
</article>
</div>
</div>
</body>
</html>
