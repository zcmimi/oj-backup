<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>WHEN - When (You Believe) - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573449829:GL2E5/CtIGGMPKzfnIu3dCdKznmUURsM5u8BtjS1N9Y=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22It%27s%20said%3A%20there%20can%20be%20miracles%2C%20when%20you%20believe.%20The%20following%20programming%20language%20shows%20the%20power%20of%20%5C%22when%5C%22.%20It%20has%20a%20very%20simple%20%28case%20insensitive%29%20grammar%2C%20shown%20below%3A%5Cn%5Cn%20%60%60%60%5CnPROGRAM%20%3A%3D%20WHEN%20%7C%20PROGRAM%20WHEN%5CnWHEN%20%3A%3D%20%27when%20%27%20EXPRESSION%20%3CENTER%3E%20STATEMENTS%20%27end%20when%27%20%3CENTER%3E%5CnSTATEMENTS%20%3A%3D%20STATEMENT%20%7C%20STATEMENTS%20STATEMENT%5CnSTATEMENT%20%3A%3D%20PRINT%20%7C%20SET%5CnPRINT%20%3A%3D%20%27print%20%27%20%20EXPRESSION_LIST%20%3CENTER%3E%5CnSET%20%3A%3D%20%27set%20%27%20ASSIGNMENT_LIST%20%3CENTER%3E%5CnEXPRESSION_LIST%20%3A%3D%20EXPRESSION%20%7C%20EXPRESSION_LIST%20%27%2C%27%20EXPRESSION%5CnASSIGNMENT_LIST%20%3A%3D%20ASSIGNMENT%20%7C%20ASSIGNMENT_LIST%20%27%2C%27%20ASSIGNMENT%5CnASSIGNMENT%20%3A%3D%20VARIABLE%20%27%3D%27%20EXPRESSION%5CnEXPRESSION%20%3A%3D%20%27%28%27%20EXPRESSION%20OP%20EXPRESSION%20%27%29%27%20%7C%20VARIABLE%20%7C%20NUMBER%20%5CnOP%20%3A%3D%20%20%27%3C%27%20%7C%20%27%2B%27%20%7C%20%27-%27%20%7C%20%27and%27%20%7C%20%27or%27%20%7C%20%27xor%27%5CnVARIABLE%20%3A%3D%20%27%24%27%20NOT_DOLLAR_STRING%20%27%24%27%5CnNUMBER%20%3A%3D%20DIGIT%20%7C%20NUMBER%20DIGIT%5CnDIGIT%20%3A%3D%20%270%27%20%7C%20..%20%7C%20%279%27%5CnNOT_DOLLAR_STRING%20%3A%3D%20any%20sequence%20of%20printable%20characters%20%28including%20blanks%29%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20that%20does%20not%20contain%20a%20%24%20symbol.%5Cn%60%60%60%5CnIn%20the%20above%2C%20any%20string%20enclosed%20in%20single%20quotes%20are%20to%20be%20treated%20literally.%20%3CENTER%3E%20is%20the%20end%20of%20line.%5Cn%5CnIn%20words%2C%20Spaces%20are%20allowed%20before%20or%20after%20any%20literal%20except%20inside%20a%20number.%20Spaces%20are%20allowed%20in%20variable%20names%2C%20and%20each%20non-empty%20sequence%20of%20spaces%20is%20treated%20as%20a%20single%20underscore%2C%20so%20the%20following%20refer%20to%20the%20same%20variable%3A%5Cn%5Cn%20%60%60%60%5Cn%20%5Cn%24Remote%20Switch%231%24%20%5Cn%24Remote_Switch%231%24%20%5Cn%24Remote%20%20%20switch%231%24%20%5Cn%60%60%60%5CnAll%20numbers%20appearing%20in%20the%20program%20will%20be%20integers%20between%200%20and%201000000000%2C%20inclusive.%20All%20variable%20and%20literal%20values%20are%20integers%20between%20-1000000000%20and%201000000000%2C%20inclusive.%20All%20variables%20are%20global%20and%20initially%20zero.%20The%20programs%20you%20will%20be%20tested%20on%20will%20never%20have%20an%20EXPRESSION%20that%20evaluates%20to%20a%20value%20outside%20of%20this%20range.%20The%20logical%20operators%20evaluate%20to%200%20for%20false%20and%201%20for%20true%2C%20and%20treat%20any%20nonzero%20value%20as%20true.%5Cn%5CnRunning%20the%20program%20amounts%20to%20executing%20all%20the%20active%20when%20clauses%20until%20none%20are%20active.%20More%20specifically%2C%20the%20active%20list%20of%20when%20clauses%20is%20initially%20empty%2C%20then%20the%20following%20steps%20are%20repeated%3A%5Cn%5Cn-%20In%20the%20order%20they%20appear%20in%20the%20program%2C%20the%20conditions%20of%20all%20when%20clauses%20that%20are%20not%20currently%20active%20are%20evaluated.%20If%20true%2C%20the%20clause%20is%20added%20to%20the%20end%20of%20the%20active%20list%2C%20with%20its%20first%20statement%20marked%20as%20%5C%22ready%5C%22.%20Each%20active%20when%20clause%20has%20one%20%5C%22ready%5C%22%20statement.%5Cn-%20If%20the%20active%20list%20is%20empty%20after%20this%20step%2C%20the%20program%20terminates.%5Cn-%20The%20%5C%22ready%5C%22%20statement%20from%20the%20%5C%22current%5C%22%20when%20clause%20%28initially%20the%20first%20clause%20in%20the%20active%20list%29%20is%20executed.%5Cn-%20The%20statement%20marked%20as%20%5C%22ready%5C%22%20is%20advanced%2C%20removing%20the%20when%20clause%20from%20the%20active%20list%20if%20this%20is%20the%20last%20statement%20in%20the%20%5C%22current%5C%22%20when%20clause.%5Cn-%20The%20when%20clause%20marked%20as%20%5C%22current%5C%22%20is%20advanced%2C%20cycling%20to%20the%20beginning%20of%20the%20active%20list%20if%20the%20end%20is%20reached.%5Cn%5CnIn%20other%20words%2C%20inactive%20when%20conditions%20are%20evaluated%20to%20determine%20if%20these%20clauses%20are%20added%20to%20the%20active%20list.%20Then%20one%20statement%20%28set%20or%20print%29%20is%20executed%20from%20the%20current%20active%20when%20clause.%20If%20this%20is%20the%20last%20statement%20in%20that%20clause%2C%20it%20is%20removed%20from%20the%20active%20list.%20One%20the%20next%20iteration%2C%20one%20statement%20is%20executed%20from%20the%20next%20active%20when%20clause%2C%20etc.%5Cn%5CnA%20set%20statement%20executes%20all%20the%20assignments%20concurrently%2C%20so%20that%5Cn%5Cn%20%60%60%60%5Cnset%20%24x%24%3D%24y%24%2C%24y%24%3D%24x%24%5Cn%60%60%60%5Cnswaps%20the%20values%20of%20%24x%24%20and%20%24y%24.%20The%20same%20variable%20cannot%20appear%20twice%20on%20the%20left%20hand%20part%20of%20the%20same%20set%20statement%20%28so%20set%20%24x%24%3D1%2C%24x%24%3D2%20is%20illegal%29.%5Cn%5CnA%20print%20statement%20evaluates%20and%20prints%20the%20given%20expressions%20in%20the%20output%2C%20separated%20by%20commas%20and%20followed%20by%20a%20new%20line.%20So%5Cn%5Cn%20%60%60%60%5Cnprint%201%2C%282%2B3%29%5Cn%60%60%60%5Cnresults%20in%20the%20line%5Cn%5Cn%20%60%60%60%5Cn1%2C5%5Cn%60%60%60%5Cnin%20the%20output.%22%2C%22inputFormat%22%3A%22The%20input%20consists%20of%20a%20single%20syntactically%20correct%20program.%20You%20may%20assume%20that%20the%20program%20will%20not%20execute%20more%20than%20100000%20set%20statements%20and%20100000%20print%20statements.%22%2C%22outputFormat%22%3A%22Print%20the%20output%20produced%20by%20executing%20the%20given%20program.%20Both%20the%20input%20and%20output%20file%20will%20not%20exceed%20100KB.%22%2C%22samples%22%3A%5B%5B%22When%20%28%24Mr.%20Bill%24%26lt%3B5%29%5Cr%5Cn%20%20%20Set%20%24mr._bill%24%3D%28%24mr.%20%20bill%24%2B1%29%2C%24Y%24%3D%28%24Y%24%2B10%29%5Cr%5CnEnd%20When%5Cr%5CnWhen%20%28%24mr.%20Bill%24%26lt%3B10%29%5Cr%5Cn%20%20Set%20%24MR.%20BILL%24%3D%28%24mr.%20bill%24%2B1%29%5Cr%5Cn%20%20Print%20%24mr.%20bill%24%2C%24Y%24%5Cr%5CnEnd%20When%22%2C%223%2C20%5Cr%5Cn6%2C40%5Cr%5Cn7%2C40%5Cr%5Cn8%2C40%5Cr%5Cn9%2C40%5Cr%5Cn10%2C40%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B500%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F3884%22%2C%22id%22%3A%223884%22%7D%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Atrue%2C%22totalSubmit%22%3A0%2C%22totalAccepted%22%3A0%2C%22pid%22%3A%22SP3884%22%2C%22title%22%3A%22WHEN%20-%20When%20%28You%20Believe%29%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22WHEN%20-%20When%20%28You%20Believe%29%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573363392;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>WHEN - When (You Believe)</h1>
<h2>题目描述</h2>
<div>It's said: there can be miracles, when you believe. The following programming language shows the power of "when". It has a very simple (case insensitive) grammar, shown below:
```
PROGRAM := WHEN | PROGRAM WHEN
WHEN := 'when ' EXPRESSION <ENTER> STATEMENTS 'end when' <ENTER>
STATEMENTS := STATEMENT | STATEMENTS STATEMENT
STATEMENT := PRINT | SET
PRINT := 'print ' EXPRESSION_LIST <ENTER>
SET := 'set ' ASSIGNMENT_LIST <ENTER>
EXPRESSION_LIST := EXPRESSION | EXPRESSION_LIST ',' EXPRESSION
ASSIGNMENT_LIST := ASSIGNMENT | ASSIGNMENT_LIST ',' ASSIGNMENT
ASSIGNMENT := VARIABLE '=' EXPRESSION
EXPRESSION := '(' EXPRESSION OP EXPRESSION ')' | VARIABLE | NUMBER
OP := '<' | '+' | '-' | 'and' | 'or' | 'xor'
VARIABLE := '$' NOT_DOLLAR_STRING '$'
NUMBER := DIGIT | NUMBER DIGIT
DIGIT := '0' | .. | '9'
NOT_DOLLAR_STRING := any sequence of printable characters (including blanks)
that does not contain a $ symbol.
```
In the above, any string enclosed in single quotes are to be treated literally. <ENTER> is the end of line.
In words, Spaces are allowed before or after any literal except inside a number. Spaces are allowed in variable names, and each non-empty sequence of spaces is treated as a single underscore, so the following refer to the same variable:
```
$Remote Switch#1$
$Remote_Switch#1$
$Remote switch#1$
```
All numbers appearing in the program will be integers between 0 and 1000000000, inclusive. All variable and literal values are integers between -1000000000 and 1000000000, inclusive. All variables are global and initially zero. The programs you will be tested on will never have an EXPRESSION that evaluates to a value outside of this range. The logical operators evaluate to 0 for false and 1 for true, and treat any nonzero value as true.
Running the program amounts to executing all the active when clauses until none are active. More specifically, the active list of when clauses is initially empty, then the following steps are repeated:
- In the order they appear in the program, the conditions of all when clauses that are not currently active are evaluated. If true, the clause is added to the end of the active list, with its first statement marked as "ready". Each active when clause has one "ready" statement.
- If the active list is empty after this step, the program terminates.
- The "ready" statement from the "current" when clause (initially the first clause in the active list) is executed.
- The statement marked as "ready" is advanced, removing the when clause from the active list if this is the last statement in the "current" when clause.
- The when clause marked as "current" is advanced, cycling to the beginning of the active list if the end is reached.
In other words, inactive when conditions are evaluated to determine if these clauses are added to the active list. Then one statement (set or print) is executed from the current active when clause. If this is the last statement in that clause, it is removed from the active list. One the next iteration, one statement is executed from the next active when clause, etc.
A set statement executes all the assignments concurrently, so that
```
set $x$=$y$,$y$=$x$
```
swaps the values of $x$ and $y$. The same variable cannot appear twice on the left hand part of the same set statement (so set $x$=1,$x$=2 is illegal).
A print statement evaluates and prints the given expressions in the output, separated by commas and followed by a new line. So
```
print 1,(2+3)
```
results in the line
```
1,5
```
in the output.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The input consists of a single syntactically correct program. You may assume that the program will not execute more than 100000 set statements and 100000 print statements.</div>
<h3>输出格式</h3>
<br />
<div>Print the output produced by executing the given program. Both the input and output file will not exceed 100KB.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>When ($Mr. Bill$&amp;lt;5)
   Set $mr._bill$=($mr.  bill$+1),$Y$=($Y$+10)
End When
When ($mr. Bill$&amp;lt;10)
  Set $MR. BILL$=($mr. bill$+1)
  Print $mr. bill$,$Y$
End When</code></pre>
<h3>输出样例 #1</h3>
<pre><code>3,20
6,40
7,40
8,40
9,40
10,40</code></pre>
</article>
</div>
</div>
</body>
</html>
