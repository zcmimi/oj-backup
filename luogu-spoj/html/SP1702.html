<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>CLEANRBT - Cleaning Robot - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573449669:AWMrKeKQ4YFLXu+7RxGpMnldfUNviWMqtH0S6IdRqRE=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22Here%2C%20we%20want%20to%20solve%20path%20planning%20for%20a%20mobile%20robot%20cleaning%20a%20rectangular%20room%20floor%20with%20furniture.%5Cn%5Cn%20Consider%20the%20room%20floor%20paved%20with%20square%20tiles%20whose%20size%20fits%20the%20cleaning%20robot%20%281%20%5Cu00d7%201%29.%20There%20are%20%27clean%20tiles%27%20and%20%27dirty%20tiles%27%2C%20and%20the%20robot%20can%20change%20a%20%27dirty%20tile%27%20to%20a%20%27clean%20tile%27%20by%20visiting%20the%20tile.%20Also%20there%20may%20be%20some%20obstacles%20%28furniture%29%20whose%20size%20fits%20a%20tile%20in%20the%20room.%20If%20there%20is%20an%20obstacle%20on%20a%20tile%2C%20the%20robot%20cannot%20visit%20it.%20The%20robot%20moves%20to%20an%20adjacent%20tile%20with%20one%20move.%20The%20tile%20onto%20which%20the%20robot%20moves%20must%20be%20one%20of%20four%20tiles%20%28i.e.%2C%20east%2C%20west%2C%20north%20or%20south%29%20adjacent%20to%20the%20tile%20where%20the%20robot%20is%20present.%20The%20robot%20may%20visit%20a%20tile%20twice%20or%20more.%5Cn%5Cn%20Your%20task%20is%20to%20write%20a%20program%20which%20computes%20the%20minimum%20number%20of%20moves%20for%20the%20robot%20to%20change%20all%20%27dirty%20tiles%27%20to%20%27clean%20tiles%27%2C%20if%20ever%20possible.%22%2C%22inputFormat%22%3A%22IThe%20input%20consists%20of%20multiple%20maps%2C%20each%20representing%20the%20size%20and%20arrangement%20of%20the%20room.%20A%20map%20is%20given%20in%20the%20following%20format.%5Cn%5Cn%20w%20h%20%20%5Cn%20c11%20c12%20c13%20...%20c1w%20%20%5Cn%20c21%20c22%20c23%20...%20c2w%20%20%5Cn%20...%20%20%5Cn%20ch1%20ch2%20ch3%20...%20chw%5Cn%5Cn%20The%20integers%20w%20and%20h%20are%20the%20lengths%20of%20the%20two%20sides%20of%20the%20floor%20of%20the%20room%20in%20terms%20of%20widths%20of%20floor%20tiles.%20w%20and%20h%20are%20less%20than%20or%20equal%20to%2020.%20The%20character%20cyx%20represents%20what%20is%20initially%20on%20the%20tile%20with%20coordinates%20%28x%2C%20y%29%20as%20follows.%5Cn%5Cn%20%27.%27%20%3A%20a%20clean%20tile%20%20%5Cn%20%27%5C%5C%2A%27%20%3A%20a%20dirty%20tile%20%20%5Cn%20%27x%27%20%3A%20a%20piece%20of%20furniture%20%28obstacle%29%20%20%5Cn%20%27o%27%20%3A%20the%20robot%20%28initial%20position%29%5Cn%5Cn%20In%20the%20map%20the%20number%20of%20%27dirty%20tiles%27%20does%20not%20exceed%2010.%20There%20is%20only%20one%20%27robot%27.%5Cn%5Cn%20The%20end%20of%20the%20input%20is%20indicated%20by%20a%20line%20containing%20two%20zeros.%22%2C%22outputFormat%22%3A%22For%20each%20map%2C%20your%20program%20should%20output%20a%20line%20containing%20the%20minimum%20number%20of%20moves.%20If%20the%20map%20includes%20%27dirty%20tiles%27%20which%20the%20robot%20cannot%20reach%2C%20your%20program%20should%20output%20-1.%22%2C%22samples%22%3A%5B%5B%227%205%5Cr%5Cn.......%5Cr%5Cn.o...%2A.%5Cr%5Cn.......%5Cr%5Cn.%2A...%2A.%5Cr%5Cn.......%5Cr%5Cn15%2013%5Cr%5Cn.......x.......%5Cr%5Cn...o...x....%2A..%5Cr%5Cn.......x.......%5Cr%5Cn.......x.......%5Cr%5Cn.......x.......%5Cr%5Cn...............%5Cr%5Cnxxxxx.....xxxxx%5Cr%5Cn...............%5Cr%5Cn.......x.......%5Cr%5Cn.......x.......%5Cr%5Cn.......x.......%5Cr%5Cn..%2A....x....%2A..%5Cr%5Cn.......x.......%5Cr%5Cn10%2010%5Cr%5Cn..........%5Cr%5Cn..o.......%5Cr%5Cn..........%5Cr%5Cn..........%5Cr%5Cn..........%5Cr%5Cn.....xxxxx%5Cr%5Cn.....x....%5Cr%5Cn.....x.%2A..%5Cr%5Cn.....x....%5Cr%5Cn.....x....%5Cr%5Cn0%200%22%2C%228%5Cr%5Cn49%5Cr%5Cn-1%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B609%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F1702%22%2C%22id%22%3A%221702%22%7D%2C%22translation%22%3A%22%5Cu5728%5Cu8fd9%5Cu91cc%5Cuff0c%5Cu6211%5Cu4eec%5Cu8981%5Cu89e3%5Cu51b3%5Cu7684%5Cu95ee%5Cu9898%5Cu662f%5Cu8def%5Cu5f84%5Cu89c4%5Cu5212%5Cu79fb%5Cu52a8%5Cu673a%5Cu5668%5Cu4eba%5Cu6e05%5Cu6d01%5Cu77e9%5Cu5f62%5Cu623f%5Cu95f4%5Cu5730%5Cu677f%5Cu3002%5Cn%5Cn%5Cu8003%5Cu8651%5Cu623f%5Cu95f4%5Cu5730%5Cu677f%5Cu94fa%5Cu7684%5Cu662f%5Cu65b9%5Cu5f62%5Cu74f7%5Cu7816%5Cuff0c%5Cu5176%5Cu5c3a%5Cu5bf8%5Cu9002%5Cu5408%5Cu6e05%5Cu6d01%5Cu673a%5Cu5668%5Cu4eba%5Cuff081%5Cu00d71%5Cuff09%5Cu3002%5Cu8fd9%5Cu91cc%5Cu6709%5Cu201c%5Cu5e72%5Cu51c0%5Cu74f7%5Cu7816%5Cu201d%5Cu548c%5Cu201c%5Cu810f%5Cu74f7%5Cu7816%5Cu201d%5Cuff0c%5Cu673a%5Cu5668%5Cu4eba%5Cu53ef%5Cu4ee5%5Cu628a%5Cu201c%5Cu810f%5Cu74f7%5Cu7816%5Cu201d%5Cu53d8%5Cu6210%5Cu201c%5Cu5e72%5Cu51c0%5Cu74f7%5Cu7816%5Cu201d%5Cu3002%5Cu4e5f%5Cu53ef%5Cu80fd%5Cu6709%5Cu4e00%5Cu4e9b%5Cu5360%5Cu4e00%5Cu4e2a%5Cu74f7%5Cu7816%5Cu5927%5Cu5c0f%5Cu7684%5Cu969c%5Cu788d%5Cuff08%5Cu5bb6%5Cu5177%5Cuff09%5Cu5728%5Cu623f%5Cu95f4%5Cu91cc%5Cu3002%5Cu5982%5Cu679c%5Cu74f7%5Cu7816%5Cu4e0a%5Cu6709%5Cu969c%5Cu788d%5Cu7269%5Cuff0c%5Cu673a%5Cu5668%5Cu4eba%5Cu5c31%5Cu4e0d%5Cu80fd%5Cu8bbf%5Cu95ee%5Cu5b83%5Cu3002%5Cu673a%5Cu5668%5Cu4eba%5Cu79fb%5Cu52a8%5Cu5230%5Cu4e00%5Cu4e2a%5Cu76f8%5Cu90bb%5Cu7684%5Cu74f7%5Cu7816%5Cu4e00%5Cu4e2a%5Cu79fb%5Cu52a8%5Cu3002%5Cu673a%5Cu5668%5Cu4eba%5Cu79fb%5Cu52a8%5Cu7684%5Cu74e6%5Cu7247%5Cu5fc5%5Cu987b%5Cu662f%5Cu4e0e%5Cu673a%5Cu5668%5Cu4eba%5Cu6240%5Cu5728%5Cu7684%5Cu74e6%5Cu7247%5Cu76f8%5Cu90bb%5Cu7684%5Cu56db%5Cu4e2a%5Cu74e6%5Cu7247%5Cuff08%5Cu5373%5Cu4e1c%5Cu3001%5Cu897f%5Cu3001%5Cu5317%5Cu6216%5Cu5357%5Cuff09%5Cu4e4b%5Cu4e00%5Cu3002%5Cu673a%5Cu5668%5Cu4eba%5Cu53ef%5Cu4ee5%5Cu8bbf%5Cu95ee%5Cu4e24%5Cu6b21%5Cu6216%5Cu66f4%5Cu591a%5Cu7684%5Cu74e6%5Cu7247%5Cu3002%5Cn%5Cn%5Cu4f60%5Cu7684%5Cu4efb%5Cu52a1%5Cu662f%5Cu7f16%5Cu5199%5Cu4e00%5Cu4e2a%5Cu7a0b%5Cu5e8f%5Cuff0c%5Cu8ba1%5Cu7b97%5Cu673a%5Cu5668%5Cu4eba%5Cu7684%5Cu6700%5Cu5c0f%5Cu79fb%5Cu52a8%5Cu6b21%5Cu6570%5Cuff0c%5Cu5982%5Cu679c%5Cu53ef%5Cu80fd%5Cu7684%5Cu8bdd%5Cuff0c%5Cu5c06%5Cu6240%5Cu6709%5Cu7684%5Cu201c%5Cu810f%5Cu74f7%5Cu7816%5Cu201d%5Cu6539%5Cu4e3a%5Cu201c%5Cu5e72%5Cu51c0%5Cu74f7%5Cu7816%5Cu201d%5Cu3002%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A107%2C%22totalAccepted%22%3A40%2C%22pid%22%3A%22SP1702%22%2C%22title%22%3A%22CLEANRBT%20-%20Cleaning%20Robot%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A141065%2C%22title%22%3A%22%5Cu4e3a%5Cu4ec0%5Cu4e48%5Cu4f1awa%5Cu6389%22%2C%22forum%22%3A%7B%22id%22%3A13369%2C%22name%22%3A%22SP1702%20CLEANRBT%20-%20Cleaning%20Robot%22%2C%22slug%22%3A%22SP1702%22%7D%7D%2C%7B%22id%22%3A46449%2C%22title%22%3A%22%5Cu7ffb%5Cu8bd1%22%2C%22forum%22%3A%7B%22id%22%3A13369%2C%22name%22%3A%22SP1702%20CLEANRBT%20-%20Cleaning%20Robot%22%2C%22slug%22%3A%22SP1702%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%7B%22pid%22%3A%22P1852%22%2C%22title%22%3A%22%5B%5Cu56fd%5Cu5bb6%5Cu96c6%5Cu8bad%5Cu961f%5D%5Cu8df3%5Cu8df3%5Cu68cb%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P1967%22%2C%22title%22%3A%22%5Cu8d27%5Cu8f66%5Cu8fd0%5Cu8f93%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P2880%22%2C%22title%22%3A%22%5BUSACO07JAN%5D%5Cu5e73%5Cu8861%5Cu7684%5Cu9635%5Cu5bb9Balanced%20Lineup%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P4281%22%2C%22title%22%3A%22%5BAHOI2008%5D%5Cu7d27%5Cu6025%5Cu96c6%5Cu5408%20%5C%2F%20%5Cu805a%5Cu4f1a%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P4427%22%2C%22title%22%3A%22%5BBJOI2018%5D%5Cu6c42%5Cu548c%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22P%22%7D%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22CLEANRBT%20-%20Cleaning%20Robot%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>CLEANRBT - Cleaning Robot</h1>
<h2>题意翻译</h2>
<div>在这里，我们要解决的问题是路径规划移动机器人清洁矩形房间地板。
考虑房间地板铺的是方形瓷砖，其尺寸适合清洁机器人（1×1）。这里有“干净瓷砖”和“脏瓷砖”，机器人可以把“脏瓷砖”变成“干净瓷砖”。也可能有一些占一个瓷砖大小的障碍（家具）在房间里。如果瓷砖上有障碍物，机器人就不能访问它。机器人移动到一个相邻的瓷砖一个移动。机器人移动的瓦片必须是与机器人所在的瓦片相邻的四个瓦片（即东、西、北或南）之一。机器人可以访问两次或更多的瓦片。
你的任务是编写一个程序，计算机器人的最小移动次数，如果可能的话，将所有的“脏瓷砖”改为“干净瓷砖”。</div>
<h2>题目描述</h2>
<div>Here, we want to solve path planning for a mobile robot cleaning a rectangular room floor with furniture.
Consider the room floor paved with square tiles whose size fits the cleaning robot (1 × 1). There are 'clean tiles' and 'dirty tiles', and the robot can change a 'dirty tile' to a 'clean tile' by visiting the tile. Also there may be some obstacles (furniture) whose size fits a tile in the room. If there is an obstacle on a tile, the robot cannot visit it. The robot moves to an adjacent tile with one move. The tile onto which the robot moves must be one of four tiles (i.e., east, west, north or south) adjacent to the tile where the robot is present. The robot may visit a tile twice or more.
Your task is to write a program which computes the minimum number of moves for the robot to change all 'dirty tiles' to 'clean tiles', if ever possible.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>IThe input consists of multiple maps, each representing the size and arrangement of the room. A map is given in the following format.
w h
c11 c12 c13 ... c1w
c21 c22 c23 ... c2w
...
ch1 ch2 ch3 ... chw
The integers w and h are the lengths of the two sides of the floor of the room in terms of widths of floor tiles. w and h are less than or equal to 20. The character cyx represents what is initially on the tile with coordinates (x, y) as follows.
'.' : a clean tile
'\*' : a dirty tile
'x' : a piece of furniture (obstacle)
'o' : the robot (initial position)
In the map the number of 'dirty tiles' does not exceed 10. There is only one 'robot'.
The end of the input is indicated by a line containing two zeros.</div>
<h3>输出格式</h3>
<br />
<div>For each map, your program should output a line containing the minimum number of moves. If the map includes 'dirty tiles' which the robot cannot reach, your program should output -1.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>7 5
.......
.o...*.
.......
.*...*.
.......
15 13
.......x.......
...o...x....*..
.......x.......
.......x.......
.......x.......
...............
xxxxx.....xxxxx
...............
.......x.......
.......x.......
.......x.......
..*....x....*..
.......x.......
10 10
..........
..o.......
..........
..........
..........
.....xxxxx
.....x....
.....x.*..
.....x....
.....x....
0 0</code></pre>
<h3>输出样例 #1</h3>
<pre><code>8
49
-1</code></pre>
</article>
</div>
</div>
</body>
</html>
