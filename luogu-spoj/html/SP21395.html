<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>OHANIBTR - Ohani And Binary Search Tree - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573450569:LXxAhITl4to9P1CnVuHKMvVqrRQpFjCL/d/4mo2RSSA=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22Ohani%20has%20recently%20learned%20about%20complete%20binary%20tree%20and%20binary%20search%20tree.%20Now%20she%20wants%20to%20create%20a%20complete%20binary%20tree%20and%20insert%20some%20value%20in%20the%20nodes%20such%20that%20it%20maintains%20the%20property%20of%20a%20binary%20search%20tree.%20She%20calls%20this%20tree%20Complete%20Binary%20Search%20Tree.%20So%20she%20takes%20a%20sorted%20array%20and%20one%20by%20one%20she%20inserts%20the%20values%20in%20a%20complete%20binary%20tree%20to%20create%20Complete%20Binary%20Search%20Tree%20%28CBST%29.%5Cn%5CnA%20binary%20tree%20is%20called%20a%20Binary%20Search%20Tree%20if%20for%20each%20node%20u%2C%20the%20value%20of%20u%20is%20greater%20than%20every%20value%20in%20the%20left%20subtree%20of%20u%20and%20is%20less%20than%20every%20value%20in%20right%20subtree%20of%20u.%5Cn%5CnA%20binary%20tree%20is%20said%20to%20be%20complete%20if%20all%20its%20levels%2C%20expect%20possibly%20the%20last%2C%20have%20the%20maximum%20number%20of%20possible%20nodes%2C%20and%20if%20all%20the%20nodes%20at%20the%20last%20level%20appears%20as%20far%20left%20as%20possible.%20So%2C%20there%20is%20a%20unique%20complete%20tree%20for%20n%20nodes.%20Here%20is%20a%20complete%20tree%20of%2010%20nodes.%5Cn%5Cn%21%5Bbinary%20tree%5D%28https%3A%5C%2F%5C%2Fcdn.luogu.com.cn%5C%2Fupload%5C%2Fvjudge_pic%5C%2FSP21395%5C%2F48e647b1da34523949e6543f3d9afa71097e2cad.png%29%22%2C%22inputFormat%22%3A%22The%20first%20line%20of%20the%20input%20contains%20an%20integer%20T%20%281%3C%3D5%29%20denoting%20the%20number%20of%20test%20cases.%5Cn%5CnEach%20test%20case%20contains%20of%20two%20lines.%20First%20line%20contains%20an%20integer%20N%281%3C%3DN%3C%3D100000%29%2C%20the%20number%20of%20elements%20in%20the%20array.%20%20%5CnNext%20line%20contains%20N%20distinct%20numbers%20where%20each%20numbers%20will%20be%20between%201%20to%20N%22%2C%22outputFormat%22%3A%22For%20each%20test%20case%2C%20you%20need%20to%20output%20the%20case%20number%20on%20the%20first%20line.%20%20%5CnIn%20the%20second%20line%20you%20have%20to%20output%20the%20minimum%20numbers%20of%20steps%20required%20to%20sort%20the%20array.%20%20%5CnIn%20the%20third%20line%2C%20for%20each%20value%20from%201%20to%20N%2C%20the%20parent%20of%20these%20values%20in%20the%20built%20CBST.%20The%20parent%20of%20the%20root%20is%20-1.%5Cn%5CnFor%20example%2C%20for%20if%20the%20given%20array%20is%3A%201%204%202%203%2C%20then%20the%20output%20for%20the%20CBST%20is%2C%5Cn%5Cn2%203%20-1%203%5Cn%5CnBecause%2C%20the%20parent%20of%20value%201%20is%202%2C%20the%20parent%20of%20value%202%20is%203%2C%203%20is%20the%20root%2C%20so%2C%20it%27s%20parent%20is%20-1%2C%20the%20parent%20of%204%20is%203.%22%2C%22samples%22%3A%5B%5B%221%5C%5Cn4%5C%5Cn1%204%202%203%22%2C%22Case%201%3A%5C%5CnMinimum%20Move%3A%26nbsp%3B1%5C%5Cn2%203%20-1%203%26nbsp%3B%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B500%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F21395%22%2C%22id%22%3A%2221395%22%7D%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Atrue%2C%22totalSubmit%22%3A0%2C%22totalAccepted%22%3A0%2C%22pid%22%3A%22SP21395%22%2C%22title%22%3A%22OHANIBTR%20-%20Ohani%20And%20Binary%20Search%20Tree%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22OHANIBTR%20-%20Ohani%20And%20Binary%20Search%20Tree%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573363392;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>OHANIBTR - Ohani And Binary Search Tree</h1>
<h2>题目描述</h2>
<div>Ohani has recently learned about complete binary tree and binary search tree. Now she wants to create a complete binary tree and insert some value in the nodes such that it maintains the property of a binary search tree. She calls this tree Complete Binary Search Tree. So she takes a sorted array and one by one she inserts the values in a complete binary tree to create Complete Binary Search Tree (CBST).
A binary tree is called a Binary Search Tree if for each node u, the value of u is greater than every value in the left subtree of u and is less than every value in right subtree of u.
A binary tree is said to be complete if all its levels, expect possibly the last, have the maximum number of possible nodes, and if all the nodes at the last level appears as far left as possible. So, there is a unique complete tree for n nodes. Here is a complete tree of 10 nodes.
![binary tree](https://cdn.luogu.com.cn/upload/vjudge_pic/SP21395/48e647b1da34523949e6543f3d9afa71097e2cad.png)</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line of the input contains an integer T (1<=5) denoting the number of test cases.
Each test case contains of two lines. First line contains an integer N(1<=N<=100000), the number of elements in the array.
Next line contains N distinct numbers where each numbers will be between 1 to N</div>
<h3>输出格式</h3>
<br />
<div>For each test case, you need to output the case number on the first line.
In the second line you have to output the minimum numbers of steps required to sort the array.
In the third line, for each value from 1 to N, the parent of these values in the built CBST. The parent of the root is -1.
For example, for if the given array is: 1 4 2 3, then the output for the CBST is,
2 3 -1 3
Because, the parent of value 1 is 2, the parent of value 2 is 3, 3 is the root, so, it's parent is -1, the parent of 4 is 3.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>1\n4\n1 4 2 3</code></pre>
<h3>输出样例 #1</h3>
<pre><code>Case 1:\nMinimum Move:&amp;nbsp;1\n2 3 -1 3&amp;nbsp;</code></pre>
</article>
</div>
</div>
</body>
</html>
