<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>ESJAIL - Escape from Jail - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573450023:Cv2M3kVWGy03MI1tmaTnEzBghmjO6i72tvTCvydS18w=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22Harry%20is%20currently%20a%20prisoner%20of%20the%20International%20Common%20Prison%20for%20Criminals%20%28ICPC%29%2C%20the%20%20%5Cnmost%20secure%20prison%20in%20the%20world.%20It%20was%20designed%20by%20and%20old%20gamer%20and%20as%20such%2C%20the%20prison%20is%20%20%5Cnnot%20necesarilly%20closed%2C%20but%20only%20an%20incredibly%20logical%20and%20fast%20mind%20can%20get%20out.%20%20%5CnThe%20prison%20is%20made%20of%20N%20chambers%20connected%20by%20M%20corridors.%20Each%20corridor%20connects%20exactly%20%20%5Cntwo%20chambers%20and%20can%20be%20traversed%20in%20any%20direction.%20Each%20chamber%20is%20either%20empty%2C%20contains%20%20%5Cna%20single%20unbreakable%20door%2C%20or%20contains%20a%20single%20key.%20No%20chamber%20contains%20both%20a%20door%20and%20a%20%20%5Cnkey.%20There%20are%20K%20doors%20and%20K%20keys%20in%20the%20whole%20prison.%20Each%20key%20opens%20a%20different%20door%2C%20and%20%20%5Cneach%20door%20is%20opened%20by%20a%20different%20key.%20If%20a%20chamber%20contains%20a%20door%2C%20the%20corresponding%20key%20is%20%20%5Cnneeded%20to%20enter%20the%20chamber%2C%20regardless%20of%20which%20corridor%20was%20used%20to%20reach%20it.%20%20%5CnHarry%20found%20the%20complete%20map%20of%20the%20prison%2C%20including%20the%20location%20of%20each%20door%20and%20each%20key%2C%20%20%5Cnand%20wants%20to%20know%20how%20to%20get%20out%20that%20hell%20hole.%20According%20to%20the%20map%2C%20Harry%20is%20now%20in%20%20%5Cnchamber%20number%201%2C%20and%20the%20exit%20is%20in%20chamber%20N%20.%20Given%20the%20information%20on%20the%20map%2C%20let%20Harry%20%20%5Cnknow%20if%20it%20is%20possible%20to%20escape%20or%20if%20he%20is%20doomed%20forever.%22%2C%22inputFormat%22%3A%22The%20input%20contains%20several%20test%20cases%2C%20each%20one%20described%20in%20several%20lines.%20The%20first%20line%20of%20each%20%20%5Cntest%20case%20contains%20three%20integers%20N%20%2C%20K%2C%20and%20M%20separated%20by%20single%20spaces.%20The%20value%20N%20is%20the%20%20%5Cnnumber%20of%20chambers%20in%20the%20prison%20%284%20number%20between%201%20and%20N%20.%20The%20value%20K%20is%20the%20number%20of%20doors%20and%20keys%20%281%20M%20is%20the%20number%20of%20corridors%20%281%20corresponding%20key%20using%20two%20integers%20A%20and%20B%20separated%20by%20a%20single%20space%2C%20with%20the%20following%20%20%5Cnmeaning%3A%20chamber%20A%20cointains%20the%20key%20that%20opens%20the%20door%20in%20chamber%20B%20%282%20The%20last%20M%20lines%20of%20the%20test%20case%20describe%20the%20corridors.%20Each%20of%20these%20lines%20cointains%20two%20integers%20%20%5CnC%20and%20D%20separated%20by%20a%20single%20space%2C%20indicating%20that%20there%20is%20a%20corridor%20connecting%20chambers%20%20%5CnC%20and%20D%20%281%20chambers.%20The%20last%20line%20of%20the%20input%20contains%20the%20number%20%5Cu22121%20three%20times%20separated%20by%20single%20%20%5Cnspaces%20and%20should%20not%20be%20processed%20as%20a%20test%20case.%22%2C%22outputFormat%22%3A%22For%20each%20test%20case%20output%20a%20single%20line%20with%20an%20uppercase%20%5Cu201cY%5Cu201d%20if%20it%20is%20possible%20for%20Harry%20to%20escape%20%20%5Cnfrom%20the%20prison%2C%20or%20an%20uppercase%20%5Cu201cN%5Cu201d%20otherwise.%22%2C%22samples%22%3A%5B%5B%22%5C%5Cn4%201%204%5C%5Cn2%203%5C%5Cn3%204%5C%5Cn2%203%5C%5Cn1%203%5C%5Cn2%204%5C%5Cn6%202%205%5C%5Cn5%204%5C%5Cn3%202%5C%5Cn2%206%5C%5Cn2%205%5C%5Cn1%204%5C%5Cn1%205%5C%5Cn3%204%5C%5Cn4%201%201%5C%5Cn3%202%5C%5Cn2%203%5C%5Cn-1%20-1%20-1%5C%5Cn%5C%5Cn%22%2C%22N%5C%5CnY%5C%5CnN%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B968%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F7188%22%2C%22id%22%3A%227188%22%7D%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Atrue%2C%22totalSubmit%22%3A0%2C%22totalAccepted%22%3A0%2C%22pid%22%3A%22SP7188%22%2C%22title%22%3A%22ESJAIL%20-%20Escape%20from%20Jail%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22ESJAIL%20-%20Escape%20from%20Jail%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>ESJAIL - Escape from Jail</h1>
<h2>题目描述</h2>
<div>Harry is currently a prisoner of the International Common Prison for Criminals (ICPC), the
most secure prison in the world. It was designed by and old gamer and as such, the prison is
not necesarilly closed, but only an incredibly logical and fast mind can get out.
The prison is made of N chambers connected by M corridors. Each corridor connects exactly
two chambers and can be traversed in any direction. Each chamber is either empty, contains
a single unbreakable door, or contains a single key. No chamber contains both a door and a
key. There are K doors and K keys in the whole prison. Each key opens a different door, and
each door is opened by a different key. If a chamber contains a door, the corresponding key is
needed to enter the chamber, regardless of which corridor was used to reach it.
Harry found the complete map of the prison, including the location of each door and each key,
and wants to know how to get out that hell hole. According to the map, Harry is now in
chamber number 1, and the exit is in chamber N . Given the information on the map, let Harry
know if it is possible to escape or if he is doomed forever.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The input contains several test cases, each one described in several lines. The first line of each
test case contains three integers N , K, and M separated by single spaces. The value N is the
number of chambers in the prison (4 number between 1 and N . The value K is the number of doors and keys (1 M is the number of corridors (1 corresponding key using two integers A and B separated by a single space, with the following
meaning: chamber A cointains the key that opens the door in chamber B (2 The last M lines of the test case describe the corridors. Each of these lines cointains two integers
C and D separated by a single space, indicating that there is a corridor connecting chambers
C and D (1 chambers. The last line of the input contains the number −1 three times separated by single
spaces and should not be processed as a test case.</div>
<h3>输出格式</h3>
<br />
<div>For each test case output a single line with an uppercase “Y” if it is possible for Harry to escape
from the prison, or an uppercase “N” otherwise.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>\n4 1 4\n2 3\n3 4\n2 3\n1 3\n2 4\n6 2 5\n5 4\n3 2\n2 6\n2 5\n1 4\n1 5\n3 4\n4 1 1\n3 2\n2 3\n-1 -1 -1\n\n</code></pre>
<h3>输出样例 #1</h3>
<pre><code>N\nY\nN</code></pre>
</article>
</div>
</div>
</body>
</html>
