<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>BSHIP - Battleships - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573450388:8b8cANtTD/ccP6CBp7yNM3oTD1wzhRqMahd1970Mh1s=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22You%20and%20a%20friend%20are%20playing%20the%20classic%20game%20of%20Battleships.%20You%20each%20have%20a%20grid%20consisting%20of%20%24%20M%20%24%20rows%20of%20%24%20N%20%24%20cells%20each%20%28%20%24%201%20%5C%5Cleq%20M%2CN%20%5C%5Cleq%202000%20%24%20%29.%20Each%20cell%20is%20either%20empty%20or%20contains%20a%20player%5Cu2019s%20ship%20%28in%20this%20version%20of%20the%20game%2C%20all%20ships%20are%20the%20size%20of%20one%20cell%29.%20The%20goal%20of%20the%20game%20is%20to%20destroy%20all%20of%20the%20opponent%5Cu2019s%20ships%20by%20hitting%20individual%20cells.%5Cn%5CnYou%20and%20your%20friend%20have%20bet%20tons%20of%20Internet%20Points%20on%20this%20game.%20Unfortunately%2C%20your%20friend%20is%20completely%20owning%20you.%20So%20desperate%20times%20call%20for%20desperate%20measures.%5Cn%5CnYou%20know%20for%20a%20fact%20that%20you%20can%20distract%20your%20friend%20for%20a%20brief%20moment%20by%20telling%20him%20that%20a%20famous%20programmer%20is%20behind%20him%2C%20but%20this%20trick%20will%20only%20work%20exactly%20once%20%28programmers%20are%20so%20predictable%29.%20While%20he%20isn%5Cu2019t%20looking%2C%20you%5Cu2019ll%20have%20time%20to%20snatch%20up%20some%20of%20his%20ships%20with%20one%20hand.%20Your%20hand%20can%20cover%20a%20square%20of%20exactly%20%24%20S%20%24%20x%20%24%20S%20%24%20cells%20%28%20%24%201%20%5C%5Cleq%20S%20%5C%5Cleq%20min%5C%5C%7BM%2CN%5C%5C%7D%20%24%20%29%2C%20and%20you%20can%20gather%20all%20the%20ships%20within%20such%20a%20square%20at%20once.%5Cn%5CnOf%20course%2C%20your%20friend%20is%20no%20fool%2C%20so%20he%5Cu2019s%20got%20his%20grid%20well%20concealed.%20As%20such%2C%20you%20don%5Cu2019t%20know%20anything%20about%20it%20except%20its%20size%2C%20so%20when%20the%20time%20comes%2C%20you%5Cu2019ll%20just%20choose%20a%20random%20square%20of%20size%20%24%20S%20%24%20x%20%24%20S%20%24%20that%5Cu2019s%20completely%20within%20the%20grid.%5Cn%5CnAs%20usual%2C%20these%20bets%20attract%20large%20crowds.%20One%20of%20the%20bystanders%20who%20can%20see%20your%20opponent%5Cu2019s%20grid%20knows%20your%20plan%2C%20and%20is%20curious%20as%20to%20the%20expected%20number%20of%20ships%20that%20you%20will%20grab%20%28in%20other%20words%2C%20the%20average%20number%20of%20ships%20out%20of%20all%20the%20possible%20snatches%20you%20could%20make%29.%20Nerdy%20though%20he%20is%2C%20he%20can%5Cu2019t%20calculate%20it%20in%20his%20head%2C%20so%20he%20runs%20over%20to%20a%20computer%20and%20codes%20up%20a%20program...%22%2C%22inputFormat%22%3A%22Line%20%24%201%20%24%20%3A%203%20integers%2C%20%24%20M%20%24%20%2C%20%24%20N%20%24%20%2C%20and%20%24%20S%20%24%5Cn%5CnNext%20%24%20M%20%24%20lines%3A%20%24%20N%20%24%20characters%20each%2C%20representing%20your%20opponent%5Cu2019s%20grid%20%5Cu2013%20an%20%5Cu2018X%5Cu2019%20represents%20a%20ship%2C%20while%20a%20%5Cu2018.%5Cu2019%20represents%20an%20empty%20cell%22%2C%22outputFormat%22%3A%22A%20single%20number%20%5Cu2013%20the%20expected%20number%20of%20ships%20that%20you%5Cu2019ll%20grab%2C%20rounded%20to%206%20decimal%20places.%22%2C%22samples%22%3A%5B%5B%223%204%202%5Cr%5CnXX.X%5Cr%5CnXX..%5Cr%5Cn.X..%22%2C%22%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B2000%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F14822%22%2C%22id%22%3A%2214822%22%7D%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Atrue%2C%22totalSubmit%22%3A0%2C%22totalAccepted%22%3A0%2C%22pid%22%3A%22SP14822%22%2C%22title%22%3A%22BSHIP%20-%20Battleships%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22BSHIP%20-%20Battleships%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573363392;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>BSHIP - Battleships</h1>
<h2>题目描述</h2>
<div>You and a friend are playing the classic game of Battleships. You each have a grid consisting of $ M $ rows of $ N $ cells each ( $ 1 \leq M,N \leq 2000 $ ). Each cell is either empty or contains a player’s ship (in this version of the game, all ships are the size of one cell). The goal of the game is to destroy all of the opponent’s ships by hitting individual cells.
You and your friend have bet tons of Internet Points on this game. Unfortunately, your friend is completely owning you. So desperate times call for desperate measures.
You know for a fact that you can distract your friend for a brief moment by telling him that a famous programmer is behind him, but this trick will only work exactly once (programmers are so predictable). While he isn’t looking, you’ll have time to snatch up some of his ships with one hand. Your hand can cover a square of exactly $ S $ x $ S $ cells ( $ 1 \leq S \leq min\{M,N\} $ ), and you can gather all the ships within such a square at once.
Of course, your friend is no fool, so he’s got his grid well concealed. As such, you don’t know anything about it except its size, so when the time comes, you’ll just choose a random square of size $ S $ x $ S $ that’s completely within the grid.
As usual, these bets attract large crowds. One of the bystanders who can see your opponent’s grid knows your plan, and is curious as to the expected number of ships that you will grab (in other words, the average number of ships out of all the possible snatches you could make). Nerdy though he is, he can’t calculate it in his head, so he runs over to a computer and codes up a program...</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>Line $ 1 $ : 3 integers, $ M $ , $ N $ , and $ S $
Next $ M $ lines: $ N $ characters each, representing your opponent’s grid – an ‘X’ represents a ship, while a ‘.’ represents an empty cell</div>
<h3>输出格式</h3>
<br />
<div>A single number – the expected number of ships that you’ll grab, rounded to 6 decimal places.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>3 4 2
XX.X
XX..
.X..</code></pre>
<h3>输出样例 #1</h3>
<pre><code></code></pre>
</article>
</div>
</div>
</body>
</html>
