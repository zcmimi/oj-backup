<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>SKEY - The SKey - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573450188:a7ZAzoDLIY610kLoY3Eh6l/D2O6HHQfqz7khGCjSzVY=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22It%20is%20the%2010-th%20ACM%20Egyptian%20National%20Programming%20Contest%20and%20Mostafa%20S.%2C%20the%20chief%20judge%2C%20started%20to%20prepare%20for%20the%20problem%20set.%20In%20previous%20years%2C%20a%20chief%20judge%20used%20to%20ask%20problems%5Cu2019%20setters%20to%20use%20his%20public%20key%20to%20encrypt%20the%20data%20so%20that%20they%20keep%20everything%20related%20to%20the%20problems%20secured.%20Unfortunately%2C%20the%20RSA%20algorithm%20was%20broken%202%20weeks%20ago%20and%20Mostafa%20decided%20to%20invent%20a%20temporary%20algorithm%20till%20someone%20finds%20a%20new%20robust%20approach%20for%20encrypting%5C%2Fdecrypting%20plaintext.%20After%20finding%20the%20algorithm%2C%20Mostafa%20met%20the%20judges%20and%20described%20the%20new%20encryption%20algorithm%20for%20them%20and%20gave%20them%20an%20equation%20to%20generate%20a%20key%20which%20the%20algorithm%20depends%20on.%20The%20key%20is%20generated%20through%20the%20following%20equation%3A%5Cn%5Cn%2A%2ASKEY%20%3D%20%28M%20%5C%5C%2A%20SUM%20%5C%5C%5B1%20%5C%2F%20A%5EK%20%28from%20k%20%3D%200%20to%20k%20%3D%20N%29%5C%5C%5D%20%29%20%25%20P%2A%2A%5Cn%5CnA%2C%20N%20and%20P%20are%20integers%20and%20P%20is%20a%20prime%20number%20that%20is%20co-prime%20with%20A%20%28e.g.%20gcd%28A%2C%20P%29%20%3D%201%29.%20Furthermore%20M%20is%20a%20very%20large%20number%20%28millions%20of%20digits%29%20generated%20to%20be%20divisible%20by%20.%20%2A%2AFor%20example%2A%2A%20given%3A%20A%20%3D%203%2C%20N%20%3D%202%2C%20P%20%3D%207%20and%20M%20%3D%2018%2C%20then%20the%20skey%20value%20is%3A%5Cn%5Cn%20%2818%20%5C%5C%2A%20%281%5C%2F1%20%2B%201%5C%2F3%20%2B%201%5C%2F9%29%20%29%20%25%207%20%3D%2026%20%25%207%20%3D%205.%5Cn%5CnUnfortunately%2C%20sending%20extremely%20large%20numbers%20for%20M%20in%20the%20emails%20between%20judges%20is%20impractical.%20Luckily%2C%20a%20property%20of%20the%20modulus%20operator%20is%3A%20%28A%5C%5C%2AB%29%25X%20%3D%20%28A%25X%20%5C%5C%2A%20B%25X%29%20%25X.%5Cn%5CnHence%2C%20we%20still%20can%20find%20our%20way%20to%20evaluate%20the%20skey%20by%20replacing%20M%20with%20M%25P.%5Cn%5CnGiven%20A%2C%20N%2C%20P%2C%20M%25P%2C%20kindly%20help%20the%20chief%20judge%20with%20writing%20a%20code%20to%20compute%20the%20SKey.%5Cn%5Cn%2A%2AInput%20Specification%3A%2A%2A%5Cn%5CnThe%20first%20line%20of%20input%20contains%20an%20integer%20T%20that%20represents%20the%20number%20of%20test%20cases%2C%20then%20follow%20T%20lines%20each%20contains%20only%20four%20integer%20numbers%20A%2C%20N%2C%20P%20where%201%5Cn%5Cn%2A%2AOutput%20Specification%3A%2A%2A%5Cn%5CnFor%20each%20test%20case%2C%20output%20a%20single%20line%20of%20output%20in%20the%20form%20%2A%2A%5Cu201cCase%20K%3A%20SKey%5Cu201d%2A%2A%20where%20K%20is%20the%20number%20of%20the%20test%20case%20and%20Skey%20is%20as%20defined%20in%20the%20problem%20statement.%20Check%20sample%20below%20for%20the%20format.%5Cn%5Cn%2A%2ASample%20input%3A%2A%2A%5Cn%5Cn1%5Cn%5Cn3%202%207%204%5Cn%5Cn%2A%2ASample%20Output%3A%2A%2A%5Cn%5CnCase%201%3A%205%22%2C%22inputFormat%22%3A%22%22%2C%22outputFormat%22%3A%22%22%2C%22samples%22%3A%5B%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B1649%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F9972%22%2C%22id%22%3A%229972%22%7D%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Atrue%2C%22totalSubmit%22%3A0%2C%22totalAccepted%22%3A0%2C%22pid%22%3A%22SP9972%22%2C%22title%22%3A%22SKEY%20-%20The%20SKey%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22SKEY%20-%20The%20SKey%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573363392;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>SKEY - The SKey</h1>
<h2>题目描述</h2>
<div>It is the 10-th ACM Egyptian National Programming Contest and Mostafa S., the chief judge, started to prepare for the problem set. In previous years, a chief judge used to ask problems’ setters to use his public key to encrypt the data so that they keep everything related to the problems secured. Unfortunately, the RSA algorithm was broken 2 weeks ago and Mostafa decided to invent a temporary algorithm till someone finds a new robust approach for encrypting/decrypting plaintext. After finding the algorithm, Mostafa met the judges and described the new encryption algorithm for them and gave them an equation to generate a key which the algorithm depends on. The key is generated through the following equation:
**SKEY = (M \* SUM \[1 / A^K (from k = 0 to k = N)\] ) % P**
A, N and P are integers and P is a prime number that is co-prime with A (e.g. gcd(A, P) = 1). Furthermore M is a very large number (millions of digits) generated to be divisible by . **For example** given: A = 3, N = 2, P = 7 and M = 18, then the skey value is:
(18 \* (1/1 + 1/3 + 1/9) ) % 7 = 26 % 7 = 5.
Unfortunately, sending extremely large numbers for M in the emails between judges is impractical. Luckily, a property of the modulus operator is: (A\*B)%X = (A%X \* B%X) %X.
Hence, we still can find our way to evaluate the skey by replacing M with M%P.
Given A, N, P, M%P, kindly help the chief judge with writing a code to compute the SKey.
**Input Specification:**
The first line of input contains an integer T that represents the number of test cases, then follow T lines each contains only four integer numbers A, N, P where 1
**Output Specification:**
For each test case, output a single line of output in the form **“Case K: SKey”** where K is the number of the test case and Skey is as defined in the problem statement. Check sample below for the format.
**Sample input:**
1
3 2 7 4
**Sample Output:**
Case 1: 5</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div></div>
<h3>输出格式</h3>
<br />
<div></div>
<h2>输入输出样例</h2>
<i>暂无测试点</i>
</article>
</div>
</div>
</body>
</html>
