<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>QUEEN - Wandering Queen - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573449867:Ln8QDpzbt1HNpbihtIr5zC2V2b9s2zj12qfTV2ErHFg=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22There%20is%20a%20checkmates%20board%20with%20%2A%2An%2A%2A%20rows%20and%20%2A%2Am%2A%2A%20columns.%20Some%20of%20the%20cells%20of%20the%20board%20are%20occupied.%20There%20is%20a%20queen%20standing%20on%20a%20certain%20cell.%20It%20wants%20to%20move%20to%20another%20cell%20of%20this%20board.%20Help%20it%20do%20this%20making%20the%20least%20possible%20moves.%20The%20queen%20can%20go%20any%20number%20of%20cells%20in%20any%20of%20eight%20directions%20in%20a%20single%20move%2C%20but%20it%20can%27t%20pass%20through%20or%20stand%20on%20the%20occupied%20cells%20and%20leave%20the%20board.%22%2C%22inputFormat%22%3A%22The%20first%20line%20of%20the%20input%20contains%20number%20%2A%2At%2A%2A%20%5Cu2013%20the%20amount%20of%20tests.%20Then%20%2A%2At%2A%2A%20test%20descriptions%20follow.%20The%20first%20line%20of%20each%20test%20consists%20of%20two%20numbers%20%2A%2An%2A%2A%20and%20%2A%2Am%2A%2A%20separated%20with%20a%20space.%20Then%20%2A%2An%2A%2A%20lines%20follow%20each%20containing%20%2A%2Am%2A%2A%20characters%20describing%20the%20board.%20Character%20%5Cu2018.%5Cu2019%20means%20a%20free%20cell%2C%20character%20%5Cu2018X%5Cu2019%20%5Cu2013%20an%20occupied%20cell%2C%20character%20%5Cu2018S%5Cu2019%20%5Cu2013%20the%20starting%20cell%20of%20the%20queen%2C%20character%20%5Cu2018F%5Cu2019%20%5Cu2013%20the%20cell%20where%20the%20queen%20wants%20to%20go.%20It%20is%20guaranteed%20that%20there%20will%20be%20exactly%20one%20character%20%5Cu2018S%5Cu2019%20and%20one%20character%20%5Cu2018F%5Cu2019%20on%20each%20board.%22%2C%22outputFormat%22%3A%22For%20each%20test%20case%20print%20the%20minimum%20number%20of%20moves%20the%20queen%20has%20to%20do%20to%20reach%20the%20desired%20cell.%20Print%20%5Cu2018-1%5Cu2019%20if%20the%20queen%20can%5Cu2019t%20reach%20the%20cell.%22%2C%22samples%22%3A%5B%5B%223%5Cr%5Cn3%203%5Cr%5CnS..%5Cr%5Cn...%5Cr%5Cn..F%5Cr%5Cn3%203%5Cr%5CnS..%5Cr%5CnXX.%5Cr%5CnF..%5Cr%5Cn3%203%5Cr%5CnS..%5Cr%5CnXXX%5Cr%5Cn..F%22%2C%221%5Cr%5Cn3%5Cr%5Cn-1%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B703%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F4235%22%2C%22id%22%3A%224235%22%7D%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Atrue%2C%22totalSubmit%22%3A4%2C%22totalAccepted%22%3A1%2C%22pid%22%3A%22SP4235%22%2C%22title%22%3A%22QUEEN%20-%20Wandering%20Queen%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22QUEEN%20-%20Wandering%20Queen%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>QUEEN - Wandering Queen</h1>
<h2>题目描述</h2>
<div>There is a checkmates board with **n** rows and **m** columns. Some of the cells of the board are occupied. There is a queen standing on a certain cell. It wants to move to another cell of this board. Help it do this making the least possible moves. The queen can go any number of cells in any of eight directions in a single move, but it can't pass through or stand on the occupied cells and leave the board.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line of the input contains number **t** – the amount of tests. Then **t** test descriptions follow. The first line of each test consists of two numbers **n** and **m** separated with a space. Then **n** lines follow each containing **m** characters describing the board. Character ‘.’ means a free cell, character ‘X’ – an occupied cell, character ‘S’ – the starting cell of the queen, character ‘F’ – the cell where the queen wants to go. It is guaranteed that there will be exactly one character ‘S’ and one character ‘F’ on each board.</div>
<h3>输出格式</h3>
<br />
<div>For each test case print the minimum number of moves the queen has to do to reach the desired cell. Print ‘-1’ if the queen can’t reach the cell.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>3
3 3
S..
...
..F
3 3
S..
XX.
F..
3 3
S..
XXX
..F</code></pre>
<h3>输出样例 #1</h3>
<pre><code>1
3
-1</code></pre>
</article>
</div>
</div>
</body>
</html>
