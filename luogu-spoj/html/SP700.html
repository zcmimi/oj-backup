<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>BPRED - Branch Prediction - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573449610:EPk6hyqI+AOCFEEdRINCZzEq8Qa3Phpc/CdKjcjaaBs=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22As%20most%20of%20you%20might%20already%20know%2C%20the%20Intel-class%20hi-tech%20processors%20of%20today%20do%20a%20series%20of%20parallel%20tasks%20to%20help%20speedup%20instruction%20execution.%20The%20most%20complicated%20of%20those%20tasks%20is%20branch%20prediction.%20Since%20the%20instruction%20chunks%20on%20a%20modern%20processor%20are%20broken%20down%20into%20independent%20chunks%20and%20executed%20for%20a%20speed%20up%2C%20there%20is%20always%20a%20requirement%20to%20predict%20what%20branch%20an%20execution%20path%20will%20take%20%28before%20the%20actual%20operands%20required%20for%20the%20condition%20to%20be%20evaluated%20to%20select%20the%20branch%2C%20are%20available%29.%20This%20complex%20task%2C%20is%20not%20addressed%20to%20fullest%20level%20today%2C%20but%20heuristics%20%28as%20always%29%20have%20helped.%5Cn%5CnThe%20task%20we%20are%20going%20to%20consider%20now%20is%20much%20more%20simple%20compared%20to%20the%20actual%20branch%20prediction%20task.%20For%20our%20modelling%2C%20let%20us%20suppose%20that%20every%20instruction%20has%20the%20following%20syntax%3A%20%20%20%5Cn%20%20%5Cn%20All%20labels%20are%20strings%20of%20alphabets%20only.%20Labels%20are%20case-sensitive.%5Cn%5CnMoreover%20the%20probability%20that%20a%20certain%20branch%20will%20be%20taken%20is%20%2A%2AP%2A%2A%20%28it%20is%20equal%20for%20all%20branches%29.%20If%20a%20branch%20is%20taken%2C%20the%20point%20of%20execution%20%28control%29%20goes%20to%20the%20branched-label.%20Otherwise%20the%20next%20statement%20in%20that%20order%20is%20executed.%20Control%20starts%20at%20the%20%5C%22%2A%2Astart%2A%2A%5C%22%20%28lowercase%29%20label%20and%20control%20ends%20at%20the%20%5C%22%2A%2Aend%2A%2A%5C%22%20%28lowercase%29%20label.%20The%20branch-label%20of%20start%20and%20end%20are%20themselves%2C%20and%20when%20start%20is%20executed%2C%20the%20control%20goes%20to%20the%20next%20instruction%2C%20and%20when%20end%20is%20executed%2C%20processing%20ends%2C%20with%20100%25%20probability.%20The%20last%20statement%20in%20the%20program%20is%20always%20an%20%5Cu201c%2A%2Aend%2A%2A%5Cu201d.%5Cn%5CnIt%20is%20required%20to%20find%20the%20expected%20number%20of%20times%20a%20statement%20executes.%22%2C%22inputFormat%22%3A%22%20T%20%5Cu2013%20the%20number%20of%20test%20cases%3B%20%20%5Cn%20For%20each%20test%20case%3A%20%20%5Cn%201st%20line%20contains%20one%20integer%20N%20%28the%20number%20of%20lines%20to%20follow%29%2C%20one%20real%20P%20and%20one%20label%20L.%20%20%5Cn%20Each%20of%20the%20N%20lines%20that%20follow%20consist%20of%20instructions%20%28two%20labels%29.%22%2C%22outputFormat%22%3A%22For%20each%20test%20case%2C%20output%20one%20line%20containing%3A%20%20%20%5Cn%20%5C%22Expected%20number%20of%20times%20label%20L%20is%20executed%20is%20R%5C%22%2C%20%20%5Cn%20where%20L%20-%20is%20the%20label%20given%20in%20the%20input%20%20%5Cn%20R%20-%20is%20the%20number%20of%20times%20the%20label%20is%20expected%20to%20be%20executed.%20It%20must%20be%20printed%20with%20exactly%20five%20decimal%20places.%5Cn%5Cn%2A%2AConstraints%3A%2A%2A%20%20%5Cn%20T%3C%3D20%20%20%5Cn%203%3C%3DN%3C%3D120.%20%20%5Cn%20P%20lies%20between%200.01%20and%200.99%2C%20i.e.%20no%20jump%20is%20100%25%20sure.%20%20%5Cn%20Also%20you%20can%20assume%20no%20label%20occurs%20on%20the%20jump%20side%2C%20without%20being%20defined%20throughout%20the%20program.%20%20%20%5Cn%20Each%20label%20is%20less%20than%2010%20characters%20in%20length.%20%20%5Cn%20Also%20each%20line%20has%20a%20distinct%20label%20associated%20with%20it.%22%2C%22samples%22%3A%5B%5B%22%5C%5Cn%5Cr%5Cn%20%203%5C%5Cn%5Cr%5Cn%20%205%20.5%20B%5C%5Cn%5Cr%5Cn%20%20C%20start%5C%5Cn%5Cr%5Cn%20%20start%20start%5C%5Cn%5Cr%5Cn%20%20B%20C%5C%5Cn%5Cr%5Cn%5Cr%5Cn%20%20D%20C%5C%5Cn%5Cr%5Cn%20%20end%20end%5C%5Cn%5Cr%5Cn%20%205%20.99%20C%5C%5Cn%5Cr%5Cn%20%20start%20start%5C%5Cn%5Cr%5Cn%20%20A%20B%5C%5Cn%5Cr%5Cn%20%20B%20A%5C%5Cn%5Cr%5Cn%5Cr%5Cn%20%20C%20end%5C%5Cn%5Cr%5Cn%20%20end%20end%5C%5Cn%5Cr%5Cn%20%203%20.5%20label%5C%5Cn%5Cr%5Cn%20%20start%20start%5C%5Cn%5Cr%5Cn%20%20label%20label%5C%5Cn%5Cr%5Cn%20%20end%20end%22%2C%22%5C%5Cn%5Cr%5Cn%20%20Expected%20number%20of%20times%20label%20B%20is%20executed%20is%204.00000%5C%5Cn%5Cr%5Cn%20%20Expected%20number%20of%20times%20label%20C%20is%20executed%20is%201.00000%5C%5Cn%5Cr%5Cn%20%20Expected%20number%20of%20times%20label%20label%20is%20executed%20is%202.00000%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B100%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F700%22%2C%22id%22%3A%22700%22%7D%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Atrue%2C%22totalSubmit%22%3A0%2C%22totalAccepted%22%3A0%2C%22pid%22%3A%22SP700%22%2C%22title%22%3A%22BPRED%20-%20Branch%20Prediction%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22BPRED%20-%20Branch%20Prediction%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>BPRED - Branch Prediction</h1>
<h2>题目描述</h2>
<div>As most of you might already know, the Intel-class hi-tech processors of today do a series of parallel tasks to help speedup instruction execution. The most complicated of those tasks is branch prediction. Since the instruction chunks on a modern processor are broken down into independent chunks and executed for a speed up, there is always a requirement to predict what branch an execution path will take (before the actual operands required for the condition to be evaluated to select the branch, are available). This complex task, is not addressed to fullest level today, but heuristics (as always) have helped.
The task we are going to consider now is much more simple compared to the actual branch prediction task. For our modelling, let us suppose that every instruction has the following syntax:
All labels are strings of alphabets only. Labels are case-sensitive.
Moreover the probability that a certain branch will be taken is **P** (it is equal for all branches). If a branch is taken, the point of execution (control) goes to the branched-label. Otherwise the next statement in that order is executed. Control starts at the "**start**" (lowercase) label and control ends at the "**end**" (lowercase) label. The branch-label of start and end are themselves, and when start is executed, the control goes to the next instruction, and when end is executed, processing ends, with 100% probability. The last statement in the program is always an “**end**”.
It is required to find the expected number of times a statement executes.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div> T – the number of test cases;
For each test case:
1st line contains one integer N (the number of lines to follow), one real P and one label L.
Each of the N lines that follow consist of instructions (two labels).</div>
<h3>输出格式</h3>
<br />
<div>For each test case, output one line containing:
"Expected number of times label L is executed is R",
where L - is the label given in the input
R - is the number of times the label is expected to be executed. It must be printed with exactly five decimal places.
**Constraints:**
T<=20
3<=N<=120.
P lies between 0.01 and 0.99, i.e. no jump is 100% sure.
Also you can assume no label occurs on the jump side, without being defined throughout the program.
Each label is less than 10 characters in length.
Also each line has a distinct label associated with it.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>\n
  3\n
  5 .5 B\n
  C start\n
  start start\n
  B C\n

  D C\n
  end end\n
  5 .99 C\n
  start start\n
  A B\n
  B A\n

  C end\n
  end end\n
  3 .5 label\n
  start start\n
  label label\n
  end end</code></pre>
<h3>输出样例 #1</h3>
<pre><code>\n
  Expected number of times label B is executed is 4.00000\n
  Expected number of times label C is executed is 1.00000\n
  Expected number of times label label is executed is 2.00000</code></pre>
</article>
</div>
</div>
</body>
</html>
