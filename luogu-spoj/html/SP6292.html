<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>SHMOOGLE - Shmoogle Wave - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573449982:suaP4Pw+pWmnswrb30MWp8kRQKRG4a0F27IVEDzwz3s=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22Shmoogle%20company%20developed%20new%20protocol%20%3C%3CWave%3E%3E%20for%20the%20multi-user%20online%20editing%20of%20the%20text%20data.%20Using%20it%2C%20any%20client%20can%20send%20commands%20to%20the%20server%20for%20editing%20the%20text%20and%20the%20server%20would%20broadcast%20it%20to%20all%20other%20connected%20clients.%20Each%20command%20consists%20of%20a%20sequence%20of%20operations%20of%20the%20following%20type%3A%5Cn%5Cn%3E%22%2C%22inputFormat%22%3A%22The%20first%20line%20contains%20T%20%281%20%3C%3D%20T%20%3C%3D%2010%29%20%5Cu2014%20the%20number%20of%20test%20cases.%20The%20description%20of%20T%20tests%20follow.%20The%20first%20line%20of%20each%20test%20case%20contains%20the%20amount%20of%20commands%20n%20%281%20%3C%3D%20n%20%3C%3D%2010000%29.%20The%20description%20of%20each%20command%20follows.%20The%20first%20line%20of%20each%20command%20contains%20the%20amount%20of%20operations%20m%20%281%20%3C%3D%20m%20%3C%3D%2010%29.%20The%20next%20m%20lines%20contain%20the%20description%20of%20each%20operation%20in%20the%20format%20given%20above.%201%20%3C%3D%20k%20%3C%3D%20100000%20for%20R%20and%20D%20operations%2C%20and%201%20%3C%3D%20k%20%3C%3D%2010%20for%20C%20operations.%20The%20strings%20in%20C%20operations%20consist%20of%20latin%20letters%20and%20digits%20only.%22%2C%22outputFormat%22%3A%22For%20each%20test%20case%20your%20program%20should%20print%20the%20result%20of%20merging%20the%20commands.%20The%20format%20of%20the%20command%20should%20be%20the%20same%20as%20in%20the%20input%20file%2C%20except%20for%20the%20limitations%20on%20m%20and%20k.%20The%20result%20should%20consist%20of%20the%20least%20possible%20number%20of%20operations.%20The%20delete%20operations%20should%20precede%20the%20insert%20operations%20if%20possible.%20If%20the%20result%20of%20merging%20consist%20of%20no%20operations%20print%200.%22%2C%22samples%22%3A%5B%5B%221%5Cr%5Cn2%5Cr%5Cn4%5Cr%5CnR%204%5Cr%5CnC%203%20abc%5Cr%5CnR%202%5Cr%5CnC%203%20xyz%5Cr%5Cn3%5Cr%5CnR%207%5Cr%5CnC%203%20def%5Cr%5CnD%203%22%2C%223%5Cr%5CnR%204%5Cr%5CnD%202%5Cr%5CnC%208%20abcdefyz%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B140%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F6292%22%2C%22id%22%3A%226292%22%7D%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Atrue%2C%22totalSubmit%22%3A0%2C%22totalAccepted%22%3A0%2C%22pid%22%3A%22SP6292%22%2C%22title%22%3A%22SHMOOGLE%20-%20Shmoogle%20Wave%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22SHMOOGLE%20-%20Shmoogle%20Wave%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573363392;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>SHMOOGLE - Shmoogle Wave</h1>
<h2>题目描述</h2>
<div>Shmoogle company developed new protocol <<Wave>> for the multi-user online editing of the text data. Using it, any client can send commands to the server for editing the text and the server would broadcast it to all other connected clients. Each command consists of a sequence of operations of the following type:
></div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line contains T (1 <= T <= 10) — the number of test cases. The description of T tests follow. The first line of each test case contains the amount of commands n (1 <= n <= 10000). The description of each command follows. The first line of each command contains the amount of operations m (1 <= m <= 10). The next m lines contain the description of each operation in the format given above. 1 <= k <= 100000 for R and D operations, and 1 <= k <= 10 for C operations. The strings in C operations consist of latin letters and digits only.</div>
<h3>输出格式</h3>
<br />
<div>For each test case your program should print the result of merging the commands. The format of the command should be the same as in the input file, except for the limitations on m and k. The result should consist of the least possible number of operations. The delete operations should precede the insert operations if possible. If the result of merging consist of no operations print 0.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>1
2
4
R 4
C 3 abc
R 2
C 3 xyz
3
R 7
C 3 def
D 3</code></pre>
<h3>输出样例 #1</h3>
<pre><code>3
R 4
D 2
C 8 abcdefyz</code></pre>
</article>
</div>
</div>
</body>
</html>
