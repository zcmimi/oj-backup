<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>FN16CEIL - Ceiling Function - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573450657:fgy68VOMbnxOj4zGq6besbE8sh5XikBiUCCuCNPDykQ=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22Advanced%20Ceiling%20Manufacturers%20%28ACM%29%20is%20analyzing%20the%20properties%20of%20its%20new%20series%20of%20Incredibly%20Collapse-Proof%20Ceilings%20%28ICPCs%29.%20An%20ICPC%20consists%20of%20%24%20n%20%24%20layers%20of%20material%2C%20each%20with%20a%20different%20value%20of%20collapse%20resistance%20%28measured%20as%20a%20positive%20integer%29.%20The%20analysis%20ACM%20wants%20to%20run%20will%20take%20the%20collapse-resistance%20values%20of%20the%20layers%2C%20store%20them%20in%20a%20binary%20search%20tree%2C%20and%20check%20whether%20the%20shape%20of%20this%20tree%20in%20any%20way%20correlates%20with%20the%20quality%20of%20the%20whole%20construction.%20Because%2C%20well%2C%20why%20should%20it%20not%3F%5Cn%5CnTo%20be%20precise%2C%20ACM%20takes%20the%20collapse-resistance%20values%20for%20the%20layers%2C%20ordered%20from%20the%20top%20layer%20to%20the%20bottom%20layer%2C%20and%20inserts%20them%20one-by-one%20into%20a%20tree.%20The%20rules%20for%20inserting%20a%20value%20%24%20v%20%24%20are%3A%5Cn%5Cn-%20If%20the%20tree%20is%20empty%2C%20make%20%24%20v%20%24%20the%20root%20of%20the%20tree.%5Cn-%20If%20the%20tree%20is%20not%20empty%2C%20compare%20%24%20v%20%24%20with%20the%20root%20of%20the%20tree.%20If%20%24%20v%20%24%20is%20smaller%2C%20insert%20%24%20v%20%24%20into%20the%20left%20subtree%20of%20the%20root%2C%20otherwise%20insert%20%24%20v%20%24%20into%20the%20right%20subtree.%5Cn%5CnACM%20has%20a%20set%20of%20ceiling%20prototypes%20it%20wants%20to%20analyze%20by%20trying%20to%20collapse%20them.%20It%20wants%20to%20take%20each%20group%20of%20ceiling%20prototypes%20that%20have%20trees%20of%20the%20same%20shape%20and%20analyze%20them%20together.%5Cn%5CnGiven%20a%20set%20of%20prototypes%2C%20your%20task%20is%20to%20determine%20how%20many%20different%20tree%20shapes%20they%20induce.%22%2C%22inputFormat%22%3A%22Multiple%20test%20cases.%20Please%20process%20until%20EOF%20is%20reached.%20For%20each%20test%20case%3A%5Cn%5CnThe%20first%20line%20contains%20two%20integers%20%24%20n%20%24%20%28%20%24%201%20%5C%5Cle%20n%20%5C%5Cle%2050%20%24%20%29%2C%20which%20is%20the%20number%20of%20ceiling%20prototypes%20to%20analyze%2C%20and%20%24%20k%20%24%20%28%20%24%201%20%20%20%20%20%5C%5Cle%20k%20%5C%5Cle%2020%20%24%20%29%2C%20which%20is%20the%20number%20of%20layers%20in%20each%20of%20the%20prototypes.%5Cn%5CnThe%20next%20%24%20n%20%24%20lines%20describe%20the%20ceiling%20prototypes.%20Each%20of%20these%20lines%20contains%20%24%20k%20%24%20distinct%20integers%20%28between%20%24%201%20%24%20and%20%24%2010%5E6%20%24%20%2C%20inclusive%29%2C%20which%20are%20the%20collapse-resistance%20values%20of%20the%20layers%20in%20a%20ceiling%20prototype%2C%20ordered%20from%20top%20to%20bottom.%22%2C%22outputFormat%22%3A%22For%20each%20test%20case%2C%20display%20the%20number%20of%20different%20tree%20shapes.%22%2C%22samples%22%3A%5B%5B%225%203%5Cr%5Cn2%207%201%5Cr%5Cn3%201%204%5Cr%5Cn1%205%209%5Cr%5Cn2%206%205%5Cr%5Cn9%207%203%5Cr%5Cn3%204%5Cr%5Cn3%201%202%2040000%5Cr%5Cn3%204%202%201%5Cr%5Cn33%2042%2017%2023%22%2C%224%5Cr%5Cn2%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B1000%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F27094%22%2C%22id%22%3A%2227094%22%7D%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Atrue%2C%22totalSubmit%22%3A0%2C%22totalAccepted%22%3A0%2C%22pid%22%3A%22SP27094%22%2C%22title%22%3A%22FN16CEIL%20-%20Ceiling%20Function%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22FN16CEIL%20-%20Ceiling%20Function%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573363392;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>FN16CEIL - Ceiling Function</h1>
<h2>题目描述</h2>
<div>Advanced Ceiling Manufacturers (ACM) is analyzing the properties of its new series of Incredibly Collapse-Proof Ceilings (ICPCs). An ICPC consists of $ n $ layers of material, each with a different value of collapse resistance (measured as a positive integer). The analysis ACM wants to run will take the collapse-resistance values of the layers, store them in a binary search tree, and check whether the shape of this tree in any way correlates with the quality of the whole construction. Because, well, why should it not?
To be precise, ACM takes the collapse-resistance values for the layers, ordered from the top layer to the bottom layer, and inserts them one-by-one into a tree. The rules for inserting a value $ v $ are:
- If the tree is empty, make $ v $ the root of the tree.
- If the tree is not empty, compare $ v $ with the root of the tree. If $ v $ is smaller, insert $ v $ into the left subtree of the root, otherwise insert $ v $ into the right subtree.
ACM has a set of ceiling prototypes it wants to analyze by trying to collapse them. It wants to take each group of ceiling prototypes that have trees of the same shape and analyze them together.
Given a set of prototypes, your task is to determine how many different tree shapes they induce.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>Multiple test cases. Please process until EOF is reached. For each test case:
The first line contains two integers $ n $ ( $ 1 \le n \le 50 $ ), which is the number of ceiling prototypes to analyze, and $ k $ ( $ 1 \le k \le 20 $ ), which is the number of layers in each of the prototypes.
The next $ n $ lines describe the ceiling prototypes. Each of these lines contains $ k $ distinct integers (between $ 1 $ and $ 10^6 $ , inclusive), which are the collapse-resistance values of the layers in a ceiling prototype, ordered from top to bottom.</div>
<h3>输出格式</h3>
<br />
<div>For each test case, display the number of different tree shapes.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>5 3
2 7 1
3 1 4
1 5 9
2 6 5
9 7 3
3 4
3 1 2 40000
3 4 2 1
33 42 17 23</code></pre>
<h3>输出样例 #1</h3>
<pre><code>4
2</code></pre>
</article>
</div>
</div>
</body>
</html>
