<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>MINIMAX - Minimizing maximizer - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573449523:VlhH7ef0lnP27iNK1A2nXQexNR3m9jXwLRDpfk4m+dc=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22%20The%20company%20Chris%20Ltd.%20is%20preparing%20a%20new%20sorting%20hardware%20called%20Maximizer.%20Maximizer%20has%20n%20inputs%20numbered%20from%201%20to%20n.%20Each%20input%20represents%20one%20integer.%20Maximizer%20has%20one%20output%20which%20represents%20the%20maximum%20value%20present%20on%20Maximizer%27s%20inputs.%5Cn%5Cn%20Maximizer%20is%20implemented%20as%20a%20pipeline%20of%20sorters%20Sorter%28i%20%24%20_%7B1%7D%20%24%20%2C%20j%20%24%20_%7B1%7D%20%24%20%29%2C%20...%20%2C%20Sorter%28i%20%24%20_%7Bk%7D%20%24%20%2C%20j%20%24%20_%7Bk%7D%20%24%20%29.%20Each%20sorter%20has%20n%20inputs%20and%20n%20outputs.%20Sorter%28i%2C%20j%29%20sorts%20values%20on%20inputs%20i%2C%20i%2B1%2C...%20%2C%20j%20in%20non-decreasing%20order%20and%20lets%20the%20other%20inputs%20pass%20through%20unchanged.%20The%20n-th%20output%20of%20the%20last%20sorter%20is%20the%20output%20of%20the%20Maximizer.%5Cn%5Cn%20An%20intern%20%28a%20former%20ACM%20contestant%29%20observed%20that%20some%20sorters%20could%20be%20excluded%20from%20the%20pipeline%20and%20Maximizer%20would%20still%20produce%20the%20correct%20result.%20What%20is%20the%20length%20of%20the%20shortest%20subsequence%20of%20the%20given%20sequence%20of%20sorters%20in%20the%20pipeline%20still%20producing%20correct%20results%20for%20all%20possible%20combinations%20of%20input%20values%3F%5Cn%5Cn%20%20%20%5Cn%23%23%23%20Task%5Cn%5CnWrite%20a%20program%20that%3A%5Cn%5Cn-%20reads%20a%20description%20of%20a%20Maximizer%2C%20i.e.%20the%20initial%20sequence%20of%20sorters%20in%20the%20pipeline%2C%5Cn-%20computes%20the%20length%20of%20the%20shortest%20subsequence%20of%20the%20initial%20sequence%20of%20sorters%20still%20producing%20correct%20results%20for%20all%20possible%20input%20data%2C%5Cn-%20writes%20the%20result.%22%2C%22inputFormat%22%3A%22%20The%20input%20begins%20with%20the%20integer%20t%2C%20the%20number%20of%20test%20cases.%20Then%20t%20test%20cases%20follow.%5Cn%5Cn%20For%20each%20test%20case%20the%20first%20line%20of%20the%20input%20contains%20two%20integers%20n%20and%20m%20%282%20%3C%3D%20n%20%3C%3D%2050000%2C%201%20%3C%3D%20m%20%3C%3D%20500000%29%20separated%20by%20a%20single%20space.%20Integer%20n%20is%20the%20number%20of%20inputs%20and%20integer%20m%20is%20the%20number%20of%20sorters%20in%20the%20pipeline.%20The%20initial%20sequence%20of%20sorters%20is%20described%20in%20the%20next%20m%20lines.%20The%20k-th%20of%20these%20lines%20contains%20the%20parameters%20of%20the%20k-th%20sorter%3A%20two%20integers%20i%20%24%20_%7Bk%7D%20%24%20and%20j%20%24%20_%7Bk%7D%20%24%20%281%20%3C%3D%20i%20%24%20_%7Bk%7D%20%24%20%3C%20j%20%24%20_%7Bk%7D%20%24%20%3C%3D%20n%29%20separated%20by%20a%20single%20space.%22%2C%22outputFormat%22%3A%22%20For%20each%20test%20case%20the%20output%20consists%20of%20only%20one%20line%20containing%20an%20integer%20equal%20to%20the%20length%20of%20the%20shortest%20subsequence%20of%20the%20initial%20sequence%20of%20sorters%20still%20producing%20correct%20results%20for%20all%20possible%20data.%22%2C%22samples%22%3A%5B%5B%221%5Cr%5Cn40%206%20%5Cr%5Cn20%2030%20%5Cr%5Cn1%2010%20%5Cr%5Cn10%2020%20%5Cr%5Cn20%2030%20%5Cr%5Cn15%2025%20%5Cr%5Cn30%2040%22%2C%224%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B1500%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F90%22%2C%22id%22%3A%2290%22%7D%2C%22translation%22%3A%22%5Cu5bf9%5Cu4e8e%5Cu6709%5Cu4e2a%5Cu957f%5Cu5ea6%5Cu4e3an%5Cu7684%5Cu5e8f%5Cu5217%5Cuff0c%5Cu6700%5Cu5927%5Cu503c%5Cu5728%5Cu4f4d%5Cu7f6e1%5Cuff0c%5Cu6709k%5Cu4e2a%5Cu201c%5Cu6392%5Cu5e8f%5Cu5668%5Cu201d%5Cuff0c%5Cu7b2ci%5Cu4e2a%5Cu53ef%5Cu4ee5%5Cu5427%5Cu4f4d%5Cu7f6e%5Bli%2Cri%5D%5Cu4e2d%5Cu7684%5Cu6570%5Cu5b57%5Cu975e%5Cu964d%5Cu5e8f%5Cu6392%5Cu5e8f%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cu6c42%5Cu6700%5Cu5c11%5Cu9009%5Cu62e9%5Cu591a%5Cu5c11%5Cu4e2a%5Cu6392%5Cu5e8f%5Cu5668%5Cu4f7f%5Cu5f97%5Cu4ed6%5Cu4eec%5Cu6309%5Cu8f93%5Cu5165%5Cu987a%5Cu5e8f%5Cu4f9d%5Cu6b21%5Cu6267%5Cu884c%5Cu540e%5Cu5e8f%5Cu5217%5Cu7684%5Cu6700%5Cu540e%5Cu4e00%5Cu4e2a%5Cu6570%5Cu5c31%5Cu662f%5Cu5e8f%5Cu5217%5Cu6700%5Cu5927%5Cu503c%5Cr%5Cn%5Cr%5Cn%282%20%3C%3D%20n%20%3C%3D%2050000%2C%201%20%3C%3D%20m%20%3C%3D%20500000%29%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A34%2C%22totalAccepted%22%3A17%2C%22pid%22%3A%22SP90%22%2C%22title%22%3A%22MINIMAX%20-%20Minimizing%20maximizer%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22MINIMAX%20-%20Minimizing%20maximizer%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>MINIMAX - Minimizing maximizer</h1>
<h2>题意翻译</h2>
<div>对于有个长度为n的序列，最大值在位置1，有k个“排序器”，第i个可以吧位置[li,ri]中的数字非降序排序。
求最少选择多少个排序器使得他们按输入顺序依次执行后序列的最后一个数就是序列最大值
(2 <= n <= 50000, 1 <= m <= 500000)</div>
<h2>题目描述</h2>
<div> The company Chris Ltd. is preparing a new sorting hardware called Maximizer. Maximizer has n inputs numbered from 1 to n. Each input represents one integer. Maximizer has one output which represents the maximum value present on Maximizer's inputs.
Maximizer is implemented as a pipeline of sorters Sorter(i $ _{1} $ , j $ _{1} $ ), ... , Sorter(i $ _{k} $ , j $ _{k} $ ). Each sorter has n inputs and n outputs. Sorter(i, j) sorts values on inputs i, i+1,... , j in non-decreasing order and lets the other inputs pass through unchanged. The n-th output of the last sorter is the output of the Maximizer.
An intern (a former ACM contestant) observed that some sorters could be excluded from the pipeline and Maximizer would still produce the correct result. What is the length of the shortest subsequence of the given sequence of sorters in the pipeline still producing correct results for all possible combinations of input values?
### Task
Write a program that:
- reads a description of a Maximizer, i.e. the initial sequence of sorters in the pipeline,
- computes the length of the shortest subsequence of the initial sequence of sorters still producing correct results for all possible input data,
- writes the result.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div> The input begins with the integer t, the number of test cases. Then t test cases follow.
For each test case the first line of the input contains two integers n and m (2 <= n <= 50000, 1 <= m <= 500000) separated by a single space. Integer n is the number of inputs and integer m is the number of sorters in the pipeline. The initial sequence of sorters is described in the next m lines. The k-th of these lines contains the parameters of the k-th sorter: two integers i $ _{k} $ and j $ _{k} $ (1 <= i $ _{k} $ < j $ _{k} $ <= n) separated by a single space.</div>
<h3>输出格式</h3>
<br />
<div> For each test case the output consists of only one line containing an integer equal to the length of the shortest subsequence of the initial sequence of sorters still producing correct results for all possible data.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>1
40 6 
20 30 
1 10 
10 20 
20 30 
15 25 
30 40</code></pre>
<h3>输出样例 #1</h3>
<pre><code>4</code></pre>
</article>
</div>
</div>
</body>
</html>
