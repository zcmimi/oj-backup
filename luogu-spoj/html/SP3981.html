<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>MBRACKET - Shortest Regular Bracket - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573449846:c1wnBvG985t9/ei3HP3Av1YdHQ8cKNvG/Pk/cZ/g7aQ=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22%20%5BEnglish%5D%28%5C%2Fproblems%5C%2FMBRACKET%5C%2Fen%5C%2F%29%20%5BVietnamese%5D%28%5C%2Fproblems%5C%2FMBRACKET%5C%2Fvn%5C%2F%29%20%60%60%60%5CnLets%20observe%20sequences%20made%20only%20of%20round%20and%20square%20brackets%2C%20i.e.%20%5Cncharacters%20%27%28%20%29%20%5B%20%5D%27.%20%5CnA%20sequence%20of%20brackets%20is%20regular%20if%20it%20satisfies%20this%20inductive%20definition%3A%20%5Cn1.%20%27%28%20%29%27%20and%20%27%5B%20%5D%27%20are%20regular%20sequences%20%5Cn2.%20If%20A%20is%20regular%2C%20then%20%28A%29%20and%20%5BA%5D%20are%20regular%20sequences%20%5Cn3.%20If%20A%20and%20B%20are%20regular%2C%20then%20AB%20is%20regular%20sequence.%5Cn%5CnFor%20example%20%27%28%20%29%20%28%20%29%20%5B%20%5D%27%2C%20%27%28%20%5B%20%5D%20%29%20%5B%20%28%20%29%20%5D%27%20and%20%27%5B%20%28%20%28%20%29%20%29%20%5D%20%5B%20%5D%27%20are%20regular%2C%20%5Cnwhile%20%27%28%27%2C%20%27%5D%20%5B%27%2C%20%27%5B%20%28%20%5D%27%20and%20%27%28%20%5B%20%29%20%5D%27%20are%20not%20regular.%20%5CnThe%20sequence%20of%20brackets%20is%20given.%20%5Cn%5CnIn%20every%20step%2C%20one%20bracket%20is%20inserted%20%20at%20the%20beginning%20%20or%20at%20the%20end%20of%20the%20%5Cnsequence%20%28round%20or%20square%2C%20left%20or%20right%29.%20%5Cn%5CnWrite%20a%20program%20that%20will%2C%20%20after%20each%20step%2C%20determine%20%20the%20length%20of%20the%20%20%5Cnshortest%20regular%20subsequence%20of%20consecutive%20characters%20that%20contains%20the%20%5Cnbracket%20added%20in%20that%20step.%20%5Cn%20%5Cn%60%60%60%22%2C%22inputFormat%22%3A%22%60%60%60%5CnFirst%20line%20contains%20initial%20sequence%20of%20brackets%2C%20whose%20length%20is%20at%20most%20%5Cn100%2C000%20characters.%20%5Cn%5CnNext%20line%20contains%20integer%20N%2C%201%20%5Cn%60%60%60%22%2C%22outputFormat%22%3A%22%60%60%60%5CnIn%20each%20of%20N%20lines%2C%20you%20should%20write%20the%20length%20of%20subsequence%20after%5Cnthat%20step.%20If%20there%20is%20no%20such%20subsequence%2C%20write%20number%200.%20%5Cn%60%60%60%22%2C%22samples%22%3A%5B%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B185%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F3981%22%2C%22id%22%3A%223981%22%7D%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Atrue%2C%22totalSubmit%22%3A0%2C%22totalAccepted%22%3A0%2C%22pid%22%3A%22SP3981%22%2C%22title%22%3A%22MBRACKET%20-%20Shortest%20Regular%20Bracket%20%20%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22MBRACKET%20-%20Shortest%20Regular%20Bracket%20%20%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>MBRACKET - Shortest Regular Bracket </h1>
<h2>题目描述</h2>
<div> [English](/problems/MBRACKET/en/) [Vietnamese](/problems/MBRACKET/vn/) ```
Lets observe sequences made only of round and square brackets, i.e.
characters '( ) [ ]'.
A sequence of brackets is regular if it satisfies this inductive definition:
1. '( )' and '[ ]' are regular sequences
2. If A is regular, then (A) and [A] are regular sequences
3. If A and B are regular, then AB is regular sequence.
For example '( ) ( ) [ ]', '( [ ] ) [ ( ) ]' and '[ ( ( ) ) ] [ ]' are regular,
while '(', '] [', '[ ( ]' and '( [ ) ]' are not regular.
The sequence of brackets is given.
In every step, one bracket is inserted at the beginning or at the end of the
sequence (round or square, left or right).
Write a program that will, after each step, determine the length of the
shortest regular subsequence of consecutive characters that contains the
bracket added in that step.
```</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>```
First line contains initial sequence of brackets, whose length is at most
100,000 characters.
Next line contains integer N, 1
```</div>
<h3>输出格式</h3>
<br />
<div>```
In each of N lines, you should write the length of subsequence after
that step. If there is no such subsequence, write number 0.
```</div>
<h2>输入输出样例</h2>
<i>暂无测试点</i>
</article>
</div>
</div>
</body>
</html>
