<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>SETSTACK - The SetStack Computer - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573449688:VrkW+SMsu3wFKl3Tf6qHkcjK2Qg/JwSl8dpM+ITdUvg=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3A%22%22%2C%22description%22%3A%22%20%21%5B%5D%28https%3A%5C%2F%5C%2Fcdn.luogu.com.cn%5C%2Fupload%5C%2Fvjudge_pic%5C%2FSP1835%5C%2F77bc609eda77f7816fd5a2cde55a7439c2d62dbc.png%29%5Cn%5Cn%20Background%20from%20Wikipedia%3A%20Set%20theory%20is%20a%20branch%20of%20mathematics%20created%20principally%20by%20the%20German%20mathematician%20Georg%20Cantor%20at%20the%20end%20of%20the%2019th%20century.%20Initially%20controversial%2C%20set%20theory%20has%20come%20to%20play%20the%20role%20of%20a%20foundational%20theory%20in%20modern%20mathematics%2C%20in%20the%20sense%20of%20a%20theory%20invoked%20to%20justify%20assumptions%20made%20in%20mathematics%20concerning%20the%20existence%20of%20mathematical%20objects%20%28such%20as%20numbers%20or%20functions%29%20and%20their%20properties.%20Formal%20versions%20of%20set%20theory%20also%20have%20a%20foundational%20role%20to%20play%20as%20specifying%20a%20theoretical%20ideal%20of%20mathematical%20rigor%20in%20proofs.%5Cn%5Cn%20Given%20this%20importance%20of%20sets%2C%20being%20the%20basis%20of%20mathematics%2C%20a%20set%20of%20eccentric%20theorist%20set%20off%20to%20construct%20a%20supercomputer%20operating%20on%20sets%20instead%20of%20numbers.%20The%20initial%20SetStack%20Alpha%20is%20under%20construction%2C%20and%20they%20need%20you%20to%20simulate%20it%20in%20order%20to%20verify%20the%20operation%20of%20the%20prototype.%5Cn%5Cn%20The%20computer%20operates%20on%20a%20single%20stack%20of%20sets%2C%20which%20is%20initially%20empty.%20After%20each%20operation%2C%20the%20cardinality%20of%20the%20topmost%20set%20on%20the%20stack%20is%20output.%20The%20cardinality%20of%20a%20set%20_S_%20is%20denoted%20%7C_S_%7C%20and%20is%20the%20number%20of%20elements%20in%20_S_.%20The%20instruction%20set%20of%20the%20SetStack%20Alpha%20is%20PUSH%2C%20DUP%2C%20UNION%2C%20INTERSECT%2C%20and%20ADD%7D.%5Cn%5Cn-%20PUSH%20will%20push%20the%20empty%20set%20%7B%7D%20on%20the%20stack.%5Cn-%20DUP%20will%20duplicate%20the%20topmost%20set%20%28pop%20the%20stack%2C%20and%20then%20push%20that%20set%20on%20the%20stack%20twice%29.%5Cn-%20UNION%20will%20pop%20the%20stack%20twice%20and%20then%20push%20the%20union%20of%20the%20two%20sets%20on%20the%20stack.%5Cn-%20INTERSECT%20will%20pop%20the%20stack%20twice%20and%20then%20push%20the%20intersection%20of%20the%20two%20sets%20on%20the%20stack.%5Cn-%20ADD%20will%20pop%20the%20stack%20twice%2C%20add%20the%20first%20set%20to%20the%20second%20one%2C%20and%20then%20push%20the%20resulting%20set%20on%20the%20stack.%5Cn%5Cn%20For%20illustration%20purposes%2C%20assume%20that%20the%20topmost%20element%20of%20the%20stack%20is%5Cn%5Cn%20_A_%20%3D%20%7B%20%7B%7D%2C%20%7B%7B%7D%7D%20%7D%2C%5Cn%5Cn%20and%20that%20the%20next%20one%20is%5Cn%5Cn%20_B_%20%3D%20%7B%20%7B%7D%2C%20%7B%7B%7B%7D%7D%7D%20%7D.%5Cn%5Cn%20For%20these%20sets%2C%20we%20have%20%7C_A_%7C%20%3D%202%20and%20%7C_B_%7C%20%3D%202.%20Then%3A%5Cn%5Cn-%20UNION%20would%20result%20in%20the%20set%20%7B%20%7B%7D%2C%20%7B%7B%7D%7D%2C%20%7B%7B%7B%7D%7D%7D%20%7D.%20The%20output%20is%203.%5Cn-%20INTERSECT%20would%20result%20in%20the%20set%20%7B%20%7B%7D%20%7D.%20The%20output%20is%201.%5Cn-%20ADD%20would%20result%20in%20the%20set%20%7B%20%7B%7D%2C%20%7B%7B%7B%7D%7D%7D%2C%20%7B%7B%7D%2C%7B%7B%7D%7D%7D%20%7D.%20The%20output%20is%203.%22%2C%22inputFormat%22%3A%22%20An%20integer%200%20%5Cu2264%20_T_%20%5Cu2264%205%20on%20the%20first%20line%20gives%20the%20cardinality%20of%20the%20set%20of%20test%20cases.%20The%20first%20line%20of%20each%20test%20case%20contains%20the%20number%20of%20operations%200%20%5Cu2264%20_N_%20%5Cu2264%202000.%20Then%20follow%20_N_%20lines%20each%20containing%20one%20of%20the%20five%20commands.%20It%20is%20guaranteed%20that%20the%20SetStack%20computer%20can%20execute%20all%20the%20commands%20in%20the%20sequence%20without%20ever%20popping%20an%20empty%20stack.%22%2C%22outputFormat%22%3A%22%20For%20each%20operation%20specified%20in%20the%20input%2C%20there%20will%20be%20one%20line%20of%20output%20consisting%20of%20a%20single%20integer.%20This%20integer%20is%20the%20cardinality%20of%20the%20topmost%20element%20of%20the%20stack%20after%20the%20corresponding%20command%20has%20executed.%20After%20each%20test%20case%20there%20will%20be%20a%20line%20with%20%5C%5C%2A%5C%5C%2A%5C%5C%2A%20%28three%20asterisks%29.%22%2C%22samples%22%3A%5B%5B%222%5Cn9%5CnPUSH%5CnDUP%5CnADD%5CnPUSH%5CnADD%5CnDUP%5CnADD%5CnDUP%5CnUNION%5Cn5%5CnPUSH%5CnPUSH%5CnADD%5CnPUSH%5CnINTERSECT%22%2C%220%5Cn0%5Cn1%5Cn0%5Cn1%5Cn1%5Cn2%5Cn2%5Cn2%5Cn%2A%2A%2A%5Cn0%5Cn0%5Cn1%5Cn0%5Cn0%5Cn%2A%2A%2A%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B2407%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F1835%22%2C%22id%22%3A%221835%22%7D%2C%22translation%22%3A%22%5Cu5bf9%5Cu4e8e%5Cu4e00%5Cu4e2a%5Cu4ee5%5Cu96c6%5Cu5408%5Cu4e3a%5Cu5143%5Cu7d20%5Cu7684%5Cu6808%5Cuff0c%5Cu521d%5Cu59cb%5Cu65f6%5Cu6808%5Cu4e3a%5Cu7a7a%5Cu3002%5Cn%5Cu8f93%5Cu5165%5Cu7684%5Cu547d%5Cu4ee4%5Cu6709%5Cu5982%5Cu4e0b%5Cu51e0%5Cu79cd%5Cuff1a%5CnPUSH%5Cuff1a%5Cu5c06%5Cu7a7a%5Cu96c6%7B%7D%5Cu538b%5Cu6808%5CnDUP%5Cuff1a%5Cu5c06%5Cu6808%5Cu9876%5Cu5143%5Cu7d20%5Cu590d%5Cu5236%5Cu4e00%5Cu4efd%5Cu538b%5Cu5165%5Cu6808%5Cu4e2d%5CnUNION%5Cuff1a%5Cu5148%5Cu8fdb%5Cu884c%5Cu4e24%5Cu6b21%5Cu5f39%5Cu6808%5Cuff0c%5Cu5c06%5Cu83b7%5Cu5f97%5Cu7684%5Cu96c6%5Cu5408A%5Cu548cB%5Cu53d6%5Cu5e76%5Cu96c6%5Cuff0c%5Cu5c06%5Cu7ed3%5Cu679c%5Cu538b%5Cu6808%5CnINTERSECTION%5Cuff1a%5Cu5148%5Cu8fdb%5Cu884c%5Cu4e24%5Cu6b21%5Cu5f39%5Cu6808%5Cuff0c%5Cu5c06%5Cu83b7%5Cu5f97%5Cu7684%5Cu96c6%5Cu5408A%5Cu548cB%5Cu53d6%5Cu4ea4%5Cu96c6%5Cuff0c%5Cu5c06%5Cu7ed3%5Cu679c%5Cu538b%5Cu6808%5CnADD%5Cuff1a%5Cu5148%5Cu8fdb%5Cu884c%5Cu4e24%5Cu6b21%5Cu5f39%5Cu6808%5Cuff0c%5Cu5c06%5Cu83b7%5Cu5f97%5Cu7684%5Cu96c6%5Cu5408A%5Cu548cB%5Cu4e2d%5Cuff0c%5Cu5148%5Cu51fa%5Cu6808%5Cu7684%5Cu96c6%5Cu5408%5Cuff08%5Cu5982A%5Cu5148%5Cuff09%5Cu52a0%5Cu5165%5Cu5230%5Cu540e%5Cu51fa%5Cu6808%5Cu7684%5Cu96c6%5Cu5408%5Cuff0c%5Cu5c06%5Cu7ed3%5Cu679c%5Cu538b%5Cu6808%5Cn%5Cu8f93%5Cu51fa%5Cu6bcf%5Cu4e00%5Cu6b65%5Cu64cd%5Cu4f5c%5Cu540e%5Cu6808%5Cu9876%5Cu96c6%5Cu5408%5Cu7684%5Cu5143%5Cu7d20%5Cu7684%5Cu4e2a%5Cu6570%5Cu3002%5Cn%5Cn%5Cu7ffb%5Cu8bd1%5Cu63d0%5Cu4f9b%5Cu8005%5Cuff1asuper_kidding%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A12%2C%22totalAccepted%22%3A8%2C%22pid%22%3A%22SP1835%22%2C%22title%22%3A%22SETSTACK%20-%20The%20SetStack%20Computer%22%2C%22difficulty%22%3A4%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A44093%2C%22title%22%3A%22%5Cu7ffb%5Cu8bd1%20%22%2C%22forum%22%3A%7B%22id%22%3A13425%2C%22name%22%3A%22SP1835%20SETSTACK%20-%20The%20SetStack%20Computer%22%2C%22slug%22%3A%22SP1835%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22SETSTACK%20-%20The%20SetStack%20Computer%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>SETSTACK - The SetStack Computer</h1>
<h2>题意翻译</h2>
<div>对于一个以集合为元素的栈，初始时栈为空。
输入的命令有如下几种：
PUSH：将空集{}压栈
DUP：将栈顶元素复制一份压入栈中
UNION：先进行两次弹栈，将获得的集合A和B取并集，将结果压栈
INTERSECTION：先进行两次弹栈，将获得的集合A和B取交集，将结果压栈
ADD：先进行两次弹栈，将获得的集合A和B中，先出栈的集合（如A先）加入到后出栈的集合，将结果压栈
输出每一步操作后栈顶集合的元素的个数。
翻译提供者：super_kidding</div>
<h2>题目描述</h2>
<div> ![](https://cdn.luogu.com.cn/upload/vjudge_pic/SP1835/77bc609eda77f7816fd5a2cde55a7439c2d62dbc.png)
Background from Wikipedia: Set theory is a branch of mathematics created principally by the German mathematician Georg Cantor at the end of the 19th century. Initially controversial, set theory has come to play the role of a foundational theory in modern mathematics, in the sense of a theory invoked to justify assumptions made in mathematics concerning the existence of mathematical objects (such as numbers or functions) and their properties. Formal versions of set theory also have a foundational role to play as specifying a theoretical ideal of mathematical rigor in proofs.
Given this importance of sets, being the basis of mathematics, a set of eccentric theorist set off to construct a supercomputer operating on sets instead of numbers. The initial SetStack Alpha is under construction, and they need you to simulate it in order to verify the operation of the prototype.
The computer operates on a single stack of sets, which is initially empty. After each operation, the cardinality of the topmost set on the stack is output. The cardinality of a set _S_ is denoted |_S_| and is the number of elements in _S_. The instruction set of the SetStack Alpha is PUSH, DUP, UNION, INTERSECT, and ADD}.
- PUSH will push the empty set {} on the stack.
- DUP will duplicate the topmost set (pop the stack, and then push that set on the stack twice).
- UNION will pop the stack twice and then push the union of the two sets on the stack.
- INTERSECT will pop the stack twice and then push the intersection of the two sets on the stack.
- ADD will pop the stack twice, add the first set to the second one, and then push the resulting set on the stack.
For illustration purposes, assume that the topmost element of the stack is
_A_ = { {}, {{}} },
and that the next one is
_B_ = { {}, {{{}}} }.
For these sets, we have |_A_| = 2 and |_B_| = 2. Then:
- UNION would result in the set { {}, {{}}, {{{}}} }. The output is 3.
- INTERSECT would result in the set { {} }. The output is 1.
- ADD would result in the set { {}, {{{}}}, {{},{{}}} }. The output is 3.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div> An integer 0 ≤ _T_ ≤ 5 on the first line gives the cardinality of the set of test cases. The first line of each test case contains the number of operations 0 ≤ _N_ ≤ 2000. Then follow _N_ lines each containing one of the five commands. It is guaranteed that the SetStack computer can execute all the commands in the sequence without ever popping an empty stack.</div>
<h3>输出格式</h3>
<br />
<div> For each operation specified in the input, there will be one line of output consisting of a single integer. This integer is the cardinality of the topmost element of the stack after the corresponding command has executed. After each test case there will be a line with \*\*\* (three asterisks).</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>2
9
PUSH
DUP
ADD
PUSH
ADD
DUP
ADD
DUP
UNION
5
PUSH
PUSH
ADD
PUSH
INTERSECT</code></pre>
<h3>输出样例 #1</h3>
<pre><code>0
0
1
0
1
1
2
2
2
***
0
0
1
0
0
***</code></pre>
</article>
</div>
</div>
</body>
</html>
