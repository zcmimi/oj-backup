<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>ASCIRC - Assembler circuits - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573449547:ZHdkzM2+EO3MZZdo9jzDXgGPrbLd/gqzbEa113LI6vU=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22Bytetel%20Company%20decided%20to%20improve%20computers%20they%20produce.%20They%20want%20to%20replace%20assembler%20programs%20with%20special%20systems%20called%20assembler%20circuits.%20Assembler%20programs%20consist%20solely%20of%20assignments.%20Each%20assignment%20is%20determined%20by%20four%20elements%3A%5Cn%5Cn-%20two%20registers%20from%20which%20data%20are%20taken%2C%5Cn-%20elementary%20operation%20that%20should%20be%20performed%20on%20the%20data%2C%5Cn-%20register%20to%20which%20the%20result%20should%20be%20written.%22%2C%22inputFormat%22%3A%22The%20number%20of%20test%20cases%20_t_%20is%20in%20the%20first%20line%20of%20input%2C%20then%20_t_%20test%20cases%20follow%20separated%20by%20an%20empty%20line.%5Cn%5CnIn%20the%20first%20line%20of%20each%20test%20case%20there%20is%20one%20integer%20_n_%20%281%20%3C%3D%20_n_%20%3C%3D%201000%29%2C%20which%20is%20the%20number%20of%20instructions%20in%20the%20program.%5Cn%5CnIn%20the%20following%20_n_%20lines%20there%20are%20descriptions%20of%20consecutive%20instructions%20in%20the%20program.%20Each%20description%20is%20a%20four-letter%20word%20beginning%20with%20an%20elementary%20operation%20symbol%3A%20A%2C%20B%2C%20C%20or%20D.%20The%20second%20and%20the%20third%20letter%20%28which%20are%20small%20letters%20of%20English%20alphabet%29%20are%20names%20of%20registers%2C%20in%20which%20data%20are%20placed.%20The%20fourth%20letter%20is%20a%20name%20of%20a%20register%2C%20in%20which%20the%20result%20should%20be%20placed.%22%2C%22outputFormat%22%3A%22For%20each%20test%20case%20you%20should%20output%20one%20line%20with%20the%20minimal%20number%20of%20gates%20in%20an%20assembler%20circuit%20equivalent%20to%20the%20given%20program.%22%2C%22samples%22%3A%5B%5B%221%5Cr%5Cn8%5Cr%5CnAfbc%5Cr%5CnBfbd%5Cr%5CnCddd%5Cr%5CnBcbc%5Cr%5CnAfcc%5Cr%5CnAfbf%5Cr%5CnCfbb%5Cr%5CnDfdb%22%2C%226%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B542%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F183%22%2C%22id%22%3A%22183%22%7D%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Atrue%2C%22totalSubmit%22%3A0%2C%22totalAccepted%22%3A0%2C%22pid%22%3A%22SP183%22%2C%22title%22%3A%22ASCIRC%20-%20Assembler%20circuits%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22ASCIRC%20-%20Assembler%20circuits%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>ASCIRC - Assembler circuits</h1>
<h2>题目描述</h2>
<div>Bytetel Company decided to improve computers they produce. They want to replace assembler programs with special systems called assembler circuits. Assembler programs consist solely of assignments. Each assignment is determined by four elements:
- two registers from which data are taken,
- elementary operation that should be performed on the data,
- register to which the result should be written.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The number of test cases _t_ is in the first line of input, then _t_ test cases follow separated by an empty line.
In the first line of each test case there is one integer _n_ (1 <= _n_ <= 1000), which is the number of instructions in the program.
In the following _n_ lines there are descriptions of consecutive instructions in the program. Each description is a four-letter word beginning with an elementary operation symbol: A, B, C or D. The second and the third letter (which are small letters of English alphabet) are names of registers, in which data are placed. The fourth letter is a name of a register, in which the result should be placed.</div>
<h3>输出格式</h3>
<br />
<div>For each test case you should output one line with the minimal number of gates in an assembler circuit equivalent to the given program.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>1
8
Afbc
Bfbd
Cddd
Bcbc
Afcc
Afbf
Cfbb
Dfdb</code></pre>
<h3>输出样例 #1</h3>
<pre><code>6</code></pre>
</article>
</div>
</div>
</body>
</html>
