<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>SHUFFLE1 - Shuffling - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573450034:h/2CZsYYSP+buRbJpzAPtNk8kiFwDlJUPQgTpzh1q80=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22A%20casino%20owns%20an%20expensive%20card%20shuffling%20machine%20which%20may%20shuffle%20up%20to%20520%20cards%20at%20a%20%20%5Cntime%20%28there%20are%2052%20cards%20in%20each%20deck%29.%20For%20convenience%2C%20we%20will%20simply%20label%20the%20cards%201%2C%202%2C%20%20%5Cn3%2C%20...%2C%20N%20where%20N%20is%20the%20total%20number%20of%20cards%2C%20and%20copies%20of%20the%20same%20card%20%28e.g.%20Ace%20of%20%20%5CnSpades%29%20from%20different%20decks%20are%20considered%20different.%20Unfortunately%2C%20the%20card%20shuffling%20%20%5Cnmachine%20is%20defective%2C%20and%20it%20always%20shuffles%20the%20cards%20the%20same%20way.%20The%20company%20that%20%20%5Cnproduces%20these%20machines%20is%20out%20of%20business%20because%20of%20the%20economic%20downturn.%20There%20is%20no%20%20%5Cnone%20who%20can%20fix%20the%20machine%2C%20and%20a%20new%20machine%20is%20too%20expensive.%5Cn%5Cn%20%20%5CnBeing%20a%20brilliant%20employee%20of%20the%20casino%2C%20you%20realized%20that%20all%20is%20not%20lost.%20You%20can%20shuffle%20the%20%20%5Cncards%20differently%20simply%20by%20using%20the%20machine%20zero%20or%20more%20times.%20For%20example%2C%20suppose%20%20%5Cnthat%20the%20machine%20shuffles%20the%20cards%201%2C%202%2C%203%2C%204%20into%20the%20order%202%2C%203%2C%204%2C%201.%20If%20you%20put%20the%20cards%20into%20%20%5Cnthe%20machine%2C%20take%20the%20shuffled%20cards%20out%20and%20insert%20them%20into%20the%20machine%20again%20%28without%20%20%5Cnchanging%20the%20order%29%2C%20you%20will%20get%20the%20order%203%2C%204%2C%201%2C%202.%20That%20way%2C%20it%20is%20possible%20to%20shuffle%20the%20%20%5Cncards%20in%20many%20different%20ways%20even%20though%20it%20may%20take%20longer.%20But%20this%20is%20not%20a%20significant%20%20%5Cnissue%20since%20decks%20do%20not%20have%20to%20be%20reshuffled%20often%2C%20and%20used%20decks%20can%20be%20shuffled%20while%20%20%5Cnother%20decks%20are%20being%20used%20to%20avoid%20any%20waiting%20time.%5Cn%5Cn%20%20%5CnUnfortunately%2C%20not%20all%20shufflings%20can%20be%20produced%20in%20this%20way%20in%20general%2C%20and%20you%20wish%20to%20%20%5Cnknow%20if%20this%20procedure%20%5C%22stack%20the%20decks%5C%22%20in%20a%20favorable%20way%20for%20the%20casino%20or%20the%20player.%20As%20%20%5Cna%20first%20step%2C%20you%20wish%20to%20know%20which%20shufflings%20are%20possible%20to%20produce%2C%20and%20how%20many%20times%20%20%5Cnyou%20need%20to%20use%20the%20machine%20on%20the%20deck%20in%20order%20to%20produce%20the%20shuffling.%22%2C%22inputFormat%22%3A%22The%20input%20for%20each%20case%20consists%20of%20three%20lines.%20The%20first%20line%20consists%20of%20a%20single%20integer%20N%20%20%5Cnindicating%20the%20number%20of%20cards%20to%20shuffle.%20The%20number%20of%20cards%20is%20a%20positive%20integer%20up%20to%20%20%5Cn520%5C%5C.%20The%20second%20line%20consists%20of%20the%20integers%201%2C%202%2C%20...%2C%20N%20listed%20in%20some%20order%20and%20separated%20by%20%20%5Cna%20space.%20The%20list%20gives%20the%20order%20of%20the%20shuffling%20performed%20by%20the%20machine%20when%20the%20input%20%20%5Cncards%20are%20ordered%201%2C%202%2C%20...%2C%20N.%20The%20third%20line%20is%20in%20the%20same%20format%20as%20the%20second%20line%2C%20and%20%20%5Cngives%20the%20shuffling%20we%20wish%20to%20obtain.%20The%20end%20of%20input%20is%20indicated%20by%20a%20line%20in%20which%20N%20%3D%200.%22%2C%22outputFormat%22%3A%22For%20each%20case%2C%20print%20the%20smallest%20number%20of%20times%20%28zero%20or%20more%29%20you%20need%20to%20pass%20the%20deck%20%20%5Cnthrough%20the%20machine%20to%20produce%20the%20desired%20shuffling.%20If%20it%20is%20not%20possible%2C%20print%20-1.%20The%20%20%5Cnoutput%20for%20each%20case%20should%20be%20in%20a%20single%20line.%20You%20may%20assume%20that%20the%20answer%20will%20always%20%20%5Cnfit%20in%20a%2032-bit%20signed%20integer.%22%2C%22samples%22%3A%5B%5B%22%5C%5Cn4%5C%5Cn2%203%204%201%5C%5Cn3%204%201%202%5C%5Cn4%5C%5Cn2%203%204%201%5C%5Cn1%203%202%204%5C%5Cn10%5C%5Cn2%201%203%205%206%207%208%209%2010%204%5C%5Cn1%202%203%209%2010%204%205%206%207%208%5C%5Cn0%5C%5Cn%22%2C%222%5C%5Cn-1%5C%5Cn12%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B913%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F7337%22%2C%22id%22%3A%227337%22%7D%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Atrue%2C%22totalSubmit%22%3A0%2C%22totalAccepted%22%3A0%2C%22pid%22%3A%22SP7337%22%2C%22title%22%3A%22SHUFFLE1%20-%20Shuffling%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22SHUFFLE1%20-%20Shuffling%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573363392;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>SHUFFLE1 - Shuffling</h1>
<h2>题目描述</h2>
<div>A casino owns an expensive card shuffling machine which may shuffle up to 520 cards at a
time (there are 52 cards in each deck). For convenience, we will simply label the cards 1, 2,
3, ..., N where N is the total number of cards, and copies of the same card (e.g. Ace of
Spades) from different decks are considered different. Unfortunately, the card shuffling
machine is defective, and it always shuffles the cards the same way. The company that
produces these machines is out of business because of the economic downturn. There is no
one who can fix the machine, and a new machine is too expensive.
Being a brilliant employee of the casino, you realized that all is not lost. You can shuffle the
cards differently simply by using the machine zero or more times. For example, suppose
that the machine shuffles the cards 1, 2, 3, 4 into the order 2, 3, 4, 1. If you put the cards into
the machine, take the shuffled cards out and insert them into the machine again (without
changing the order), you will get the order 3, 4, 1, 2. That way, it is possible to shuffle the
cards in many different ways even though it may take longer. But this is not a significant
issue since decks do not have to be reshuffled often, and used decks can be shuffled while
other decks are being used to avoid any waiting time.
Unfortunately, not all shufflings can be produced in this way in general, and you wish to
know if this procedure "stack the decks" in a favorable way for the casino or the player. As
a first step, you wish to know which shufflings are possible to produce, and how many times
you need to use the machine on the deck in order to produce the shuffling.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The input for each case consists of three lines. The first line consists of a single integer N
indicating the number of cards to shuffle. The number of cards is a positive integer up to
520\. The second line consists of the integers 1, 2, ..., N listed in some order and separated by
a space. The list gives the order of the shuffling performed by the machine when the input
cards are ordered 1, 2, ..., N. The third line is in the same format as the second line, and
gives the shuffling we wish to obtain. The end of input is indicated by a line in which N = 0.</div>
<h3>输出格式</h3>
<br />
<div>For each case, print the smallest number of times (zero or more) you need to pass the deck
through the machine to produce the desired shuffling. If it is not possible, print -1. The
output for each case should be in a single line. You may assume that the answer will always
fit in a 32-bit signed integer.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>\n4\n2 3 4 1\n3 4 1 2\n4\n2 3 4 1\n1 3 2 4\n10\n2 1 3 5 6 7 8 9 10 4\n1 2 3 9 10 4 5 6 7 8\n0\n</code></pre>
<h3>输出样例 #1</h3>
<pre><code>2\n-1\n12</code></pre>
</article>
</div>
</div>
</body>
</html>
