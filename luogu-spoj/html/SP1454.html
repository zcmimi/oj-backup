<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>MEMDIS - Memory Distribution - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573449646:cgJth1bP7gdWxhWsMpgSLXXa4MJCZ2ZpQrumCuCRVj8=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22EMS%20memory%20%28called%20%2A%2Amemory%2A%2A%20for%20short%29%20is%20some%20important%20resource%20of%20a%20computer.%20When%20a%20program%20is%20running%2C%20the%20computer%20must%20distribute%20the%20memory%20for%20it.%5Cn%5CnThe%20classical%20memory%20distribution%20process%20is%20like%20the%20following%3A%5Cn%5Cn-%20The%20basic%20unit%20of%20the%20memory%20is%20called%20a%20%2A%2Acell%2A%2A%2C%20each%20cell%20is%20assigned%20to%20a%20fixed%20integer%20number%20called%20its%20%2A%2Aaddress%2A%2A.%20The%20address%20starts%20from%20number%200.%20If%20two%20cell%27s%20address%20numbers%20are%20two%20consecutive%20integer%20numbers%2C%20the%20two%20cells%20are%20called%20%28logically%29%20consecutive.%20We%20name%20the%20_s_%20consecutive%20cells%20starting%20from%20address%20_i_%20a%20piece%20whose%20length%20is%20_s_%20and%20first%20address%20is%20_i_.%5Cn-%20Many%20programs%20need%20memory%20during%20their%20running.%20For%20each%20program%2C%20we%20need%20a%20application%20time%20_X_%2C%20a%20number%20of%20cells%20needed%20_M_%20and%20a%20running%20time%20_P_%20to%20describe%20it.%20When%20the%20program%20is%20running%28during%20it%20starts%20running%20%28time%20_T_%29%20to%20_T%2BP_%2C%20including%20the%20left%20end%20and%20excluding%20the%20right%20end%29%2CThe%20M%20cells%20cannot%20be%20used%20by%20other%20programs.%5Cn-%20Suppose%20a%20program%20apply%20_M_%20cells%20at%20time%20_X_%20and%20its%20running%20time%20is%20_P_%2Cthen%20%5Cn%20%20-%20%28A%29%20If%20there%20is%20a%20piece%20in%20the%20memory%20at%20time%20_X_%2C%20each%20cell%20of%20which%20is%20not%20being%20used%2C%20and%20whose%20length%20is%20_M_%2C%20the%20computer%20will%20distribute%20these%20_M_%20cells%20to%20this%20program.%20If%20there%20are%20more%20pieces%2C%20the%20computer%20will%20choose%20the%20one%20whose%20first%20address%20is%20minimum.%5Cn%20%20-%20%28B%29%20If%20such%20piece%20does%20not%20exist%20at%20time%20_X_%2C%20the%20program%20will%20be%20put%20into%20a%20queue.If%20after%20some%20time%2C%20there%20exist%20a%20piece%20whose%20length%20is%20_M_%20and%20the%20corresponding%20program%20is%20at%20the%20head%20of%20the%20queue%2C%20the%20computer%20will%20pop%20this%20program%20and%20distribute%20memory%20for%20it%20like%20%28A%29%20immediately.%20During%20the%20process%20of%20memory%20distribution%2C%20the%20programs%20which%20are%20not%20at%20the%20head%20of%20the%20queue%20cannot%20start%20to%20run%20before%20the%20one%20at%20the%20head%20of%20the%20queue.%22%2C%22inputFormat%22%3A%22Ten%20test%20cases%20%28given%20one%20after%20another%2C%20you%20have%20to%20process%20all%21%29.For%20each%20test%20case%3A%5Cn%5CnThe%20first%20line%20is%20a%20number%20N%2C%20which%20shows%20the%20number%20of%20memory%20cells.%20There%20addresses%20are%200..n-1.%20Less%20than%2010000%20lines%20follow%2C%20each%20contains%203%20integers%20X%2C%20M%28M%3C%3DN%29%2C%20P%20describing%20the%20programs.%20A%20line%20containing%20three%20zeroes%20denotes%20the%20end%20of%20a%20test%20case.%20The%20programs%20have%20been%20sorted%20by%20there%20application%20time%20X.%5Cn%5CnAll%20numbers%20in%20the%20input%20and%20output%20file%20will%20be%20less%20than%2010%20%24%20%5E%7B9%7D%20%24%20.%22%2C%22outputFormat%22%3A%22For%20each%20test%20case%20output%20two%20lines.%20The%20first%20line%20contains%20a%20single%20integer%2C%20which%20shows%20the%20time%20when%20all%20the%20programs%20have%20been%20run%20and%20stops%20normally.%20The%20second%20line%20contains%20a%20single%20integer%2C%20which%20is%20the%20number%20of%20programs%20which%20has%20been%20put%20into%20the%20queue.%22%2C%22samples%22%3A%5B%5B%2210%5Cr%5Cn1%203%2010%5Cr%5Cn2%204%203%5Cr%5Cn3%204%204%5Cr%5Cn4%201%204%5Cr%5Cn5%203%204%5Cr%5Cn0%200%200%5Cr%5Cn%5Band%209%20test%20cases%20more%5D%22%2C%2212%5Cr%5Cn2%5Cr%5Cn%5Band%209%20test%20cases%20more%5D%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B5000%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F1454%22%2C%22id%22%3A%221454%22%7D%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Atrue%2C%22totalSubmit%22%3A0%2C%22totalAccepted%22%3A0%2C%22pid%22%3A%22SP1454%22%2C%22title%22%3A%22MEMDIS%20-%20Memory%20Distribution%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22MEMDIS%20-%20Memory%20Distribution%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>MEMDIS - Memory Distribution</h1>
<h2>题目描述</h2>
<div>EMS memory (called **memory** for short) is some important resource of a computer. When a program is running, the computer must distribute the memory for it.
The classical memory distribution process is like the following:
- The basic unit of the memory is called a **cell**, each cell is assigned to a fixed integer number called its **address**. The address starts from number 0. If two cell's address numbers are two consecutive integer numbers, the two cells are called (logically) consecutive. We name the _s_ consecutive cells starting from address _i_ a piece whose length is _s_ and first address is _i_.
- Many programs need memory during their running. For each program, we need a application time _X_, a number of cells needed _M_ and a running time _P_ to describe it. When the program is running(during it starts running (time _T_) to _T+P_, including the left end and excluding the right end),The M cells cannot be used by other programs.
- Suppose a program apply _M_ cells at time _X_ and its running time is _P_,then
- (A) If there is a piece in the memory at time _X_, each cell of which is not being used, and whose length is _M_, the computer will distribute these _M_ cells to this program. If there are more pieces, the computer will choose the one whose first address is minimum.
- (B) If such piece does not exist at time _X_, the program will be put into a queue.If after some time, there exist a piece whose length is _M_ and the corresponding program is at the head of the queue, the computer will pop this program and distribute memory for it like (A) immediately. During the process of memory distribution, the programs which are not at the head of the queue cannot start to run before the one at the head of the queue.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>Ten test cases (given one after another, you have to process all!).For each test case:
The first line is a number N, which shows the number of memory cells. There addresses are 0..n-1. Less than 10000 lines follow, each contains 3 integers X, M(M<=N), P describing the programs. A line containing three zeroes denotes the end of a test case. The programs have been sorted by there application time X.
All numbers in the input and output file will be less than 10 $ ^{9} $ .</div>
<h3>输出格式</h3>
<br />
<div>For each test case output two lines. The first line contains a single integer, which shows the time when all the programs have been run and stops normally. The second line contains a single integer, which is the number of programs which has been put into the queue.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>10
1 3 10
2 4 3
3 4 4
4 1 4
5 3 4
0 0 0
[and 9 test cases more]</code></pre>
<h3>输出样例 #1</h3>
<pre><code>12
2
[and 9 test cases more]</code></pre>
</article>
</div>
</div>
</body>
</html>
