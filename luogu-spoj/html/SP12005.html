<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>GRASSPLA - Grass Planting - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573450296:/zpz1vczMEe1uCEnDCFO3KFP4tO+mtq5Pfm13n8EIQ4=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22%22%2C%22inputFormat%22%3A%22%5C%5C%2A%20Line%201%3A%20Two%20space-separated%20integers%20N%20and%20M%5Cn%5Cn%5C%5C%2A%20Lines%202..N%3A%20Two%20space-separated%20integers%20describing%20the%20endpoints%20of%20a%20road.%5Cn%5Cn%5C%5C%2A%20Lines%20N%2B1..N%2BM%3A%20Line%20i%2B1%20describes%20step%20i.%20The%20first%20character%20of%20the%20line%20is%20either%20P%20or%20Q%2C%20which%20describes%20whether%20or%20not%20FJ%20is%20planting%20grass%20or%20simply%20querying.%20This%20is%20followed%20by%20two%20space-separated%20integers%20A%5C%5C_i%20and%20B%5C%5C_i%20%281%20%3C%3D%20A%5C%5C_i%2C%20B%5C%5C_i%20%3C%3D%20N%29%20which%20describe%20FJ%27s%20action%20or%20query.%22%2C%22outputFormat%22%3A%22%5C%5C%2A%20Lines%201..%3F%3F%3F%3A%20Each%20line%20has%20the%20answer%20to%20a%20query%2C%20appearing%20in%20the%20same%20order%20as%20the%20queries%20appear%20in%20the%20input.%22%2C%22samples%22%3A%5B%5B%224%206%5Cr%5Cn1%204%5Cr%5Cn2%204%5Cr%5Cn3%204%5Cr%5CnP%202%203%5Cr%5CnP%201%203%5Cr%5CnQ%203%204%5Cr%5CnP%201%204%5Cr%5CnQ%202%204%5Cr%5CnQ%201%204%22%2C%222%5Cr%5Cn1%5Cr%5Cn2%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B438%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F12005%22%2C%22id%22%3A%2212005%22%7D%2C%22translation%22%3A%22%23%20%5Cu9898%5Cu76ee%5Cu63cf%5Cu8ff0%5Cr%5Cn%5Cu7ea6%5Cu7ff0%5Cu6709%20N%20%5Cu4e2a%5Cu7267%5Cu573a%5Cuff0c%5Cu7f16%5Cu53f7%5Cu4e3a%201%20%5Cu5230%20N%5Cu3002%5Cu5b83%5Cu4eec%5Cu4e4b%5Cu95f4%5Cu6709%20N%20%5Cu2212%201%20%5Cu6761%5Cu9053%5Cu8def%5Cuff0c%5Cu6bcf%5Cu6761%5Cu9053%5Cu8def%5Cu8fde%5Cu63a5%5Cu4e24%5Cu4e2a%5Cu7267%5Cu573a%5Cu3002%5Cu901a%5Cu8fc7%5Cu8fd9%5Cu4e9b%5Cu9053%5Cu8def%5Cuff0c%5Cu6240%5Cu6709%5Cu7267%5Cu573a%5Cu90fd%5Cu662f%5Cu8fde%5Cu901a%5Cu7684%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cu521a%5Cu5f00%5Cu59cb%5Cu7684%5Cu65f6%5Cu5019%5Cuff0c%5Cu6240%5Cu6709%5Cu9053%5Cu8def%5Cu90fd%5Cu662f%5Cu5149%5Cu79c3%5Cu79c3%5Cu7684%5Cuff0c%5Cu6ca1%5Cu6709%5Cu9752%5Cu8349%5Cu3002%5Cu7ea6%5Cu7ff0%5Cu4f1a%5Cu5728%5Cu4e00%5Cu4e9b%5Cu9053%5Cu8def%5Cu4e0a%5Cu6279%5Cu91cf%5Cu79cd%5Cu8349%5Cu3002%5Cu6bcf%5Cu6b21%5Cu5f00%5Cu59cb%5Cu79cd%5Cu8349%5Cu7684%5Cu65f6%5Cu5019%5Cuff0c%5Cu7ea6%5Cu7ff0%5Cu4f1a%5Cu9009%5Cu62e9%5Cu4e00%5Cu4e2a%5Cu7267%5Cu573a%5Cu4f5c%5Cu4e3a%5Cu8d77%5Cu70b9%5Cuff0c%5Cu4e00%5Cu4e2a%5Cu7267%5Cu573a%5Cu4f5c%5Cu4e3a%5Cu7ec8%5Cu70b9%5Cuff0c%5Cu627e%5Cu5230%5Cu4ece%5Cu8d77%5Cu70b9%5Cu5230%5Cu7ec8%5Cu70b9%5Cu7684%5Cu6700%5Cu77ed%5Cu8def%5Cu5f84%5Cuff0c%5Cu5728%5Cu8fd9%5Cu6761%5Cu8def%5Cu5f84%5Cu4e0a%5Cu6240%5Cu6709%5Cu7684%5Cu9053%5Cu8def%5Cu4e0a%5Cu5206%5Cu522b%5Cu79cd%5Cu4e0b%5Cu4e00%5Cu68f5%5Cu65b0%5Cu7684%5Cu9752%5Cu8349%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cu8d1d%5Cu897f%5Cu5728%5Cu76d1%5Cu7763%5Cu7ea6%5Cu7ff0%5Cu7684%5Cu5de5%5Cu4f5c%5Cuff0c%5Cu5979%5Cu8feb%5Cu4e0d%5Cu53ca%5Cu5f85%5Cu5730%5Cu60f3%5Cu77e5%5Cu9053%5Cu6bcf%5Cu6761%5Cu9053%5Cu8def%5Cu4e0a%5Cu5df2%5Cu7ecf%5Cu6709%5Cu591a%5Cu5c11%5Cu9752%5Cu8349%5Cu4e86%5Cu3002%5Cu7ea6%5Cu7ff0%5Cu7684%5Cu5de5%5Cu4f5c%5Cu603b%5Cu662f%5Cu88ab%5Cu8d1d%5Cu897f%5Cu6253%5Cu65ad%5Cuff0c%5Cu4ed6%5Cu4e0d%5Cu80dc%5Cu5176%5Cu70e6%5Cuff0c%5Cu6240%5Cu4ee5%5Cu8bf7%5Cu4f60%5Cu6765%5Cu5e2e%5Cu5fd9%5Cu56de%5Cu7b54%5Cu8d1d%5Cu897f%5Cu7684%5Cu95ee%5Cu9898%5Cu3002%5Cu7ea6%5Cu7ff0%5Cu7684%5Cu5de5%5Cu4f5c%5Cu548c%5Cu8d1d%5Cu897f%5Cu7684%5Cu8be2%5Cu95ee%5Cu662f%5Cu7a7f%5Cu63d2%5Cu8fdb%5Cu884c%5Cu7684%5Cuff0c%5Cu8f93%5Cu5165%5Cu6570%5Cu636e%5Cu5c06%5Cu4f1a%5Cu4f9d%5Cu6b21%5Cu51fa%5Cu73b0%20M%20%5Cu4e2a%5Cu4e8b%5Cu4ef6%5Cuff0c%5Cu4ee5%5Cu5b57%5Cu7b26%20P%20%5Cu5f00%5Cu5934%5Cu7684%5Cu4e8b%5Cu4ef6%5Cu8868%5Cu793a%5Cu7ea6%5Cu7ff0%5Cu5728%5Cu4e00%5Cu6761%5Cu8def%5Cu5f84%5Cu4e0a%5Cu79cd%5Cu690d%5Cu4e86%5Cu9752%5Cu8349%5Cuff0c%5Cu4ee5%5Cu5b57%5Cu7b26Q%20%5Cu5f00%5Cu5934%5Cu7684%5Cu4e8b%5Cu4ef6%5Cu8868%5Cu793a%5Cu8d1d%5Cu897f%5Cu5728%5Cu67e5%5Cu8be2%5Cu4e00%5Cu6761%5Cu9053%5Cu8def%5Cu4e0a%5Cu6709%5Cu591a%5Cu5c11%5Cu9752%5Cu8349%5Cu3002%5Cr%5Cn%5Cr%5Cn%23%20%5Cu8f93%5Cu5165%5Cu683c%5Cu5f0f%5Cr%5Cn%5Cu7b2c%5Cu4e00%5Cu884c%5Cuff1a%5Cu4e24%5Cu4e2a%5Cu6574%5Cu6570%20N%20%5Cu548c%20M%5Cuff0c%202%20%5Cu2264%20N%20%5Cu2264%2010%5E6%3B%201%20%5Cu2264%20M%20%5Cu2264%2010%5E6%5Cr%5Cn%5Cr%5Cn%5Cu7b2c%5Cu4e8c%5Cu884c%5Cu5230%5Cu7b2c%20N%20%5Cu884c%5Cuff1a%5Cu7b2c%20i%20%2B%201%20%5Cu884c%5Cu6709%5Cu4e24%5Cu4e2a%5Cu6574%5Cu6570%20Ui%20%5Cu548c%20Vi%5Cuff0c%5Cu8868%5Cu793a%5Cu7b2c%20i%20%5Cu6761%5Cu9053%5Cu8def%5Cu8fde%5Cu63a5%5Cu7684%5Cu4e24%5Cu4e2a%5Cu7267%5Cu573a%5Cu7f16%5Cu53f7%5Cuff0c1%20%5Cu2264%20Ui%5Cuff0c%20Vi%20%5Cu2264%20N%5Cr%5Cn%5Cr%5Cn%5Cu7b2c%20N%20%2B%201%20%5Cu884c%5Cu5230%5Cu7b2c%20N%20%2B%20Q%20%5Cu884c%5Cuff1a%5Cu6bcf%5Cu884c%5Cu9996%5Cu5148%5Cu7531%5Cu4e00%5Cu4e2a%5Cu5927%5Cu5199%5Cu5b57%5Cu6bcd%5Cuff1a%5Cr%5Cn%5Cr%5Cn%5Cu5982%5Cu679c%5Cu662f%20P%5Cuff0c%5Cu968f%5Cu540e%5Cu4f1a%5Cu6709%5Cu4e24%5Cu4e2a%5Cu6574%5Cu6570%20A%20%5Cu548c%20B%5Cuff0c%5Cu8868%5Cu793a%5Cu7ea6%5Cu7ff0%5Cu5728%5Cu4ece%20A%20%5Cu901a%5Cu5411%20B%20%5Cu7684%5Cu6bcf%5Cu6761%5Cu9053%5Cu8def%5Cu4e0a%5Cu90fd%5Cu65b0%5Cu79cd%5Cu4e86%5Cu4e00%5Cu68f5%5Cu9752%5Cu8349%5Cuff0c%201%20%5Cu2264%20A%5Cuff0c%20B%20%5Cu2264%20N%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cu5982%5Cu679c%5Cu662f%20Q%5Cuff0c%5Cu968f%5Cu540e%5Cu4f1a%5Cu6709%5Cu4e24%5Cu4e2a%5Cu6574%5Cu6570%20A%20%5Cu548c%20B%5Cuff0c%5Cu8868%5Cu793a%5Cu8d1d%5Cu897f%5Cu67e5%5Cu8be2%5Cu4e00%5Cu6761%5Cu9053%5Cu8def%5Cu4e0a%5Cu7684%5Cu9752%5Cu8349%5Cu6570%5Cu91cf%5Cuff0c%20A%20%5Cu548c%20B%20%5Cu662f%5Cu8fd9%5Cu6761%5Cu9053%5Cu8def%5Cu7684%5Cu4e24%5Cu4e2a%5Cu7aef%5Cu70b9%5Cuff0c%201%20%5Cu2264%20A%5Cuff0c%20B%20%5Cu2264%20N%5Cuff0c%5Cu4fdd%5Cu8bc1%5Cu8f93%5Cu5165%5Cu6570%5Cu636e%5Cu4e2d%5Cu5b58%5Cu5728%5Cu4e00%5Cu6761%20A%20%5Cu5230%20B%20%5Cu7684%5Cu9053%5Cu8def%5Cu3002%5Cr%5Cn%5Cr%5Cn%23%20%5Cu8f93%5Cu51fa%5Cu683c%5Cu5f0f%5Cr%5Cn%5Cr%5Cn%5Cu5bf9%5Cu6bcf%5Cu4e2a%5Cu67e5%5Cu8be2%5Cu8bf7%5Cu6c42%5Cuff0c%5Cu8f93%5Cu51fa%5Cu8be5%5Cu6761%5Cu9053%5Cu8def%5Cu4e0a%5Cu9752%5Cu8349%5Cu7684%5Cu6570%5Cu91cf%5Cuff0c%5Cu4ee5%5Cu6362%5Cu884c%5Cu7b26%5Cu5206%5Cu9694%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A65%2C%22totalAccepted%22%3A18%2C%22pid%22%3A%22SP12005%22%2C%22title%22%3A%22GRASSPLA%20-%20Grass%20Planting%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A38396%2C%22title%22%3A%22%5Cu7ffb%5Cu8bd1%22%2C%22forum%22%3A%7B%22id%22%3A14670%2C%22name%22%3A%22SP12005%20GRASSPLA%20-%20Grass%20Planting%22%2C%22slug%22%3A%22SP12005%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%7B%22pid%22%3A%22P1801%22%2C%22title%22%3A%22%5Cu9ed1%5Cu5323%5Cu5b50_NOI%5Cu5bfc%5Cu520a2010%5Cu63d0%5Cu9ad8%5Cuff0806%5Cuff09%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P3038%22%2C%22title%22%3A%22%5BUSACO11DEC%5D%5Cu7267%5Cu8349%5Cu79cd%5Cu690dGrass%20Planting%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P3254%22%2C%22title%22%3A%22%5Cu5706%5Cu684c%5Cu95ee%5Cu9898%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P3834%22%2C%22title%22%3A%22%5Cu3010%5Cu6a21%5Cu677f%5Cu3011%5Cu53ef%5Cu6301%5Cu4e45%5Cu5316%5Cu7ebf%5Cu6bb5%5Cu6811%201%5Cuff08%5Cu4e3b%5Cu5e2d%5Cu6811%5Cuff09%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P4011%22%2C%22title%22%3A%22%5Cu5b64%5Cu5c9b%5Cu8425%5Cu6551%5Cu95ee%5Cu9898%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22GRASSPLA%20-%20Grass%20Planting%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>GRASSPLA - Grass Planting</h1>
<h2>题意翻译</h2>
<div># 题目描述
约翰有 N 个牧场，编号为 1 到 N。它们之间有 N − 1 条道路，每条道路连接两个牧场。通过这些道路，所有牧场都是连通的。
刚开始的时候，所有道路都是光秃秃的，没有青草。约翰会在一些道路上批量种草。每次开始种草的时候，约翰会选择一个牧场作为起点，一个牧场作为终点，找到从起点到终点的最短路径，在这条路径上所有的道路上分别种下一棵新的青草。
贝西在监督约翰的工作，她迫不及待地想知道每条道路上已经有多少青草了。约翰的工作总是被贝西打断，他不胜其烦，所以请你来帮忙回答贝西的问题。约翰的工作和贝西的询问是穿插进行的，输入数据将会依次出现 M 个事件，以字符 P 开头的事件表示约翰在一条路径上种植了青草，以字符Q 开头的事件表示贝西在查询一条道路上有多少青草。
# 输入格式
第一行：两个整数 N 和 M， 2 ≤ N ≤ 10^6; 1 ≤ M ≤ 10^6
第二行到第 N 行：第 i + 1 行有两个整数 Ui 和 Vi，表示第 i 条道路连接的两个牧场编号，1 ≤ Ui， Vi ≤ N
第 N + 1 行到第 N + Q 行：每行首先由一个大写字母：
如果是 P，随后会有两个整数 A 和 B，表示约翰在从 A 通向 B 的每条道路上都新种了一棵青草， 1 ≤ A， B ≤ N。
如果是 Q，随后会有两个整数 A 和 B，表示贝西查询一条道路上的青草数量， A 和 B 是这条道路的两个端点， 1 ≤ A， B ≤ N，保证输入数据中存在一条 A 到 B 的道路。
# 输出格式
对每个查询请求，输出该条道路上青草的数量，以换行符分隔</div>
<h2>题目描述</h2>
<div></div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>\* Line 1: Two space-separated integers N and M
\* Lines 2..N: Two space-separated integers describing the endpoints of a road.
\* Lines N+1..N+M: Line i+1 describes step i. The first character of the line is either P or Q, which describes whether or not FJ is planting grass or simply querying. This is followed by two space-separated integers A\_i and B\_i (1 <= A\_i, B\_i <= N) which describe FJ's action or query.</div>
<h3>输出格式</h3>
<br />
<div>\* Lines 1..???: Each line has the answer to a query, appearing in the same order as the queries appear in the input.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>4 6
1 4
2 4
3 4
P 2 3
P 1 3
Q 3 4
P 1 4
Q 2 4
Q 1 4</code></pre>
<h3>输出样例 #1</h3>
<pre><code>2
1
2</code></pre>
</article>
</div>
</div>
</body>
</html>
