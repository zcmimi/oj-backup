<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>IMAGE - Image Perimeters - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573449624:/RUSNccpRJDzNGYVg+kPFS7EbNEsw9vpkVoZp0+B/BU=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22%20Technicians%20in%20a%20pathology%20lab%20analyze%20digitized%20images%20of%20slides.%20Objects%20on%20a%20slide%20are%20selected%20for%20analysis%20by%20a%20mouse%20click%20on%20the%20object.%20The%20perimeter%20of%20the%20boundary%20of%20an%20object%20is%20one%20useful%20measure.%20Your%20task%20is%20to%20determine%20this%20perimeter%20for%20selected%20objects.%5Cn%5Cn%20The%20digitized%20slides%20will%20be%20represented%20by%20a%20rectangular%20grid%20of%20periods%2C%20%27.%27%2C%20indicating%20empty%20space%2C%20and%20the%20capital%20letter%20%27X%27%2C%20indicating%20part%20of%20an%20object.%20Simple%20examples%20are%5Cn%5Cn%20%2A%2AXX%20Grid%201%20.XXX%20Grid%202%2A%2A%20%20%20%5Cn%2A%2AXX%20.XXX%2A%2A%20%20%20%5Cn%20%2A%2A.XXX%2A%2A%20%20%20%5Cn%20%2A%2A...X%2A%2A%20%20%20%5Cn%20%2A%2A..X.%2A%2A%20%20%20%5Cn%20%2A%2AX...%2A%2A%5Cn%5Cn%20An%20X%20in%20a%20grid%20square%20indicates%20that%20the%20entire%20grid%20square%2C%20including%20its%20boundaries%2C%20lies%20in%20some%20object.%20The%20X%20in%20the%20center%20of%20the%20grid%20below%20is%20_adjacent_%20to%20the%20X%20in%20any%20of%20the%208%20positions%20around%20it.%20The%20grid%20squares%20for%20any%20two%20adjacent%20X%27s%20overlap%20on%20an%20edge%20or%20corner%2C%20so%20they%20are%20connected.%5Cn%5Cn%20XXX%20%20%20%5CnX%2A%2AX%2A%2AX%20%20Central%20X%20and%20adjacent%20X%27s%20%20%20%5CnXXX%5Cn%5Cn%20An%20object%20consists%20of%20the%20grid%20squares%20of%20all%20X%27s%20that%20can%20be%20linked%20to%20one%20another%20through%20a%20sequence%20of%20adjacent%20X%27s.%20In%20Grid%201%2C%20the%20whole%20grid%20is%20filled%20by%20one%20object.%20In%20Grid%202%20there%20are%20two%20objects.%20One%20object%20contains%20only%20the%20lower%20left%20grid%20square.%20The%20remaining%20X%27s%20belong%20to%20the%20other%20object.%5Cn%5Cn%20The%20technician%20will%20always%20click%20on%20an%20X%2C%20selecting%20the%20object%20containing%20that%20X.%20The%20coordinates%20of%20the%20click%20are%20recorded.%20Rows%20and%20columns%20are%20numbered%20starting%20from%201%20in%20the%20upper%20left%20hand%20corner.%20The%20technician%20could%20select%20the%20object%20in%20Grid%201%20by%20clicking%20on%20row%202%20and%20column%202.%20The%20larger%20object%20in%20Grid%202%20could%20be%20selected%20by%20clicking%20on%20row%202%2C%20column%203.%20The%20click%20could%20not%20be%20on%20row%204%2C%20column%203.%5Cn%5Cn%20%21%5B%5D%28https%3A%5C%2F%5C%2Fcdn.luogu.com.cn%5C%2Fupload%5C%2Fvjudge_pic%5C%2FSP904%5C%2F52be350def3b5baae704ab9cf4f5f069c1e5dfc4.png%29%20One%20useful%20statistic%20is%20the%20perimeter%20of%20the%20object.%20Assume%20each%20X%20corresponds%20to%20a%20square%20one%20unit%20on%20each%20side.%20Hence%20the%20object%20in%20Grid%201%20has%20perimeter%208%20%282%20on%20each%20of%20four%20sides%29.%20The%20perimeter%20for%20the%20larger%20object%20in%20Grid%202%20is%20illustrated%20in%20the%20figure%20at%20the%20left.%20The%20length%20is%2018.%5Cn%5Cn%20Objects%20will%20not%20contain%20any%20totally%20enclosed%20holes%2C%20so%20the%20leftmost%20grid%20patterns%20shown%20below%20could%20_NOT_%20appear.%20The%20variations%20on%20the%20right%20could%20appear%3A%5Cn%5Cn%2A%2AImpossible%20Possible%2A%2A%5Cn%5Cn%2A%2AXXXX%20XXXX%20XXXX%20XXXX%2A%2A%20%20%20%5Cn%2A%2AX..X%20XXXX%20X...%20X...%2A%2A%20%20%20%5Cn%2A%2AXX.X%20XXXX%20XX.X%20XX.X%2A%2A%20%20%20%5Cn%2A%2AXXXX%20XXXX%20XXXX%20XX.X%2A%2A%5Cn%5Cn%2A%2A.....%20.....%20.....%20.....%2A%2A%20%20%20%5Cn%2A%2A..X..%20..X..%20..X..%20..X..%2A%2A%20%20%20%5Cn%2A%2A.X.X.%20.XXX.%20.X...%20.....%2A%2A%20%20%20%5Cn%2A%2A..X..%20..X..%20..X..%20..X..%2A%2A%20%20%20%5Cn%2A%2A.....%20.....%20.....%20.....%2A%2A%5Cn%5Cn%20The%20input%20will%20contain%20one%20or%20more%20grids.%20Each%20grid%20is%20preceded%20by%20a%20line%20containing%20the%20number%20of%20rows%20and%20columns%20in%20the%20grid%20and%20the%20row%20and%20column%20of%20the%20mouse%20click.%20All%20numbers%20are%20in%20the%20range%201-20.%20The%20rows%20of%20the%20grid%20follow%2C%20starting%20on%20the%20next%20line%2C%20consisting%20of%20%27.%27%20and%20%27X%27%20characters.%5Cn%5Cn%20The%20end%20of%20the%20input%20is%20indicated%20by%20a%20line%20containing%20four%20zeros.%20The%20numbers%20on%20any%20one%20line%20are%20separated%20by%20blanks.%20The%20grid%20rows%20contain%20no%20blanks.%5Cn%5Cn%20For%20each%20grid%20in%20the%20input%2C%20the%20output%20contains%20a%20single%20line%20with%20the%20perimeter%20of%20the%20specified%20object.%5Cn%5Cn%20%60%60%60%5Cn%5CnInput%3A%5Cn2%202%202%202%5CnXX%5CnXX%5Cn6%204%202%203%5Cn.XXX%5Cn.XXX%5Cn.XXX%5Cn...X%5Cn..X.%5CnX...%5Cn5%206%201%203%5Cn.XXXX.%5CnX....X%5Cn..XX.X%5Cn.X...X%5Cn..XXX.%5Cn7%207%202%206%5CnXXXXXXX%5CnXX...XX%5CnX..X..X%5CnX..X...%5CnX..X..X%5CnX.....X%5CnXXXXXXX%5Cn7%207%204%204%5CnXXXXXXX%5CnXX...XX%5CnX..X..X%5CnX..X...%5CnX..X..X%5CnX.....X%5CnXXXXXXX%5Cn0%200%200%200%5Cn%60%60%60%5Cn%20%60%60%60%5Cn%5CnOutput%3A%5Cn8%5Cn18%5Cn40%5Cn48%5Cn8%5Cn%60%60%60%22%2C%22inputFormat%22%3A%22%22%2C%22outputFormat%22%3A%22%22%2C%22samples%22%3A%5B%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B100%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F904%22%2C%22id%22%3A%22904%22%7D%2C%22translation%22%3A%22%23%23%23%20%5Cu63cf%5Cu8ff0%5Cr%5Cn%5Cu7ed9%5Cu51fa%5Cu4e00%5Cu5f20%5Cu7531%5C%22x%5C%22%5Cu548c%5C%22.%5C%22%5Cu7ec4%5Cu6210%5Cu7684%5Cu77e9%5Cu9635%5Cu3002%5Cu6bcf%5Cu4e2a%5C%22x%5C%22%5Cu53ef%5Cu4ee5%5Cu5411%5Cu4e0a%5Cu4e0b%5Cu5de6%5Cu53f3%5Cu53ca%5Cu4e24%5Cu4e2a%5Cu659c%5Cu5bf9%5Cu89d2%5Cu8fdb%5Cu884c%5Cu8fde%5Cu901a%5Cuff0c%5Cu8bf7%5Cu95ee%5Cu7531%5Cu67d0%5Cu4e2a%5Cu70b9%5Cu5f00%5Cu59cb%5Cu7684%5C%22x%5C%22%5Cuff0c%5Cu5b83%5Cu6240%5Cu8fde%5Cu901a%5Cu7684%5Cu56fe%5Cu5f62%5Cu7684%5Cu5468%5Cu957f%5Cu4e3a%5Cu591a%5Cu5c11%5Cu3002%5Cr%5Cn%23%23%23%20%5Cu8f93%5Cu5165%5Cr%5Cn%5Cu6574%5Cu4e2a%5Cu6d4b%5Cu8bd5%5Cu6709%5Cu591a%5Cu7ec4%5Cu6570%5Cu636e%5Cuff0c%5Cu6574%5Cu4e2a%5Cu6d4b%5Cu8bd5%5Cu4ee5%5Cu56db%5Cu4e2a%5Cu96f6%5Cu4ee3%5Cu8868%5Cu7ed3%5Cu675f%5Cu3002%5Cr%5Cn%5Cu5bf9%5Cu4e8e%5Cu6bcf%5Cu4e2a%5Cu6570%5Cu636e%5Cuff0c%5Cu7b2c%5Cu4e00%5Cu884c%5Cu7ed9%5Cu51fa%5Cu6574%5Cu4e2a%5Cu56fe%5Cu5f62%5Cu7684%5Cu5927%5Cu5c0f%28%5Cu957f%5Cu5ea6%5Cu5c0f%5Cu4e8e50%29%5Cuff0c%5Cu518d%5Cu7ed9%5Cu51fa%5Cu5f00%5Cu59cb%5Cu70b9%5Cu7684%5Cu5750%5Cu6807%5Cu3002%5Cu63a5%5Cu4e0b%5Cu6765%5Cu82e5%5Cu5e72%5Cu884c%5Cu7528%5Cu4e8e%5Cu63cf%5Cu8ff0%5Cu8fd9%5Cu4e2a%5Cu56fe%5Cu5f62%5Cu3002%5Cr%5Cn%23%23%23%20%5Cu8f93%5Cu51fa%5Cr%5Cn%5Cu5982%5Cu9898%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A14%2C%22totalAccepted%22%3A10%2C%22pid%22%3A%22SP904%22%2C%22title%22%3A%22IMAGE%20-%20Image%20Perimeters%22%2C%22difficulty%22%3A3%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22IMAGE%20-%20Image%20Perimeters%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>IMAGE - Image Perimeters</h1>
<h2>题意翻译</h2>
<div>### 描述
给出一张由"x"和"."组成的矩阵。每个"x"可以向上下左右及两个斜对角进行连通，请问由某个点开始的"x"，它所连通的图形的周长为多少。
### 输入
整个测试有多组数据，整个测试以四个零代表结束。
对于每个数据，第一行给出整个图形的大小(长度小于50)，再给出开始点的坐标。接下来若干行用于描述这个图形。
### 输出
如题</div>
<h2>题目描述</h2>
<div> Technicians in a pathology lab analyze digitized images of slides. Objects on a slide are selected for analysis by a mouse click on the object. The perimeter of the boundary of an object is one useful measure. Your task is to determine this perimeter for selected objects.
The digitized slides will be represented by a rectangular grid of periods, '.', indicating empty space, and the capital letter 'X', indicating part of an object. Simple examples are
**XX Grid 1 .XXX Grid 2**
**XX .XXX**
**.XXX**
**...X**
**..X.**
**X...**
An X in a grid square indicates that the entire grid square, including its boundaries, lies in some object. The X in the center of the grid below is _adjacent_ to the X in any of the 8 positions around it. The grid squares for any two adjacent X's overlap on an edge or corner, so they are connected.
XXX
X**X**X Central X and adjacent X's
XXX
An object consists of the grid squares of all X's that can be linked to one another through a sequence of adjacent X's. In Grid 1, the whole grid is filled by one object. In Grid 2 there are two objects. One object contains only the lower left grid square. The remaining X's belong to the other object.
The technician will always click on an X, selecting the object containing that X. The coordinates of the click are recorded. Rows and columns are numbered starting from 1 in the upper left hand corner. The technician could select the object in Grid 1 by clicking on row 2 and column 2. The larger object in Grid 2 could be selected by clicking on row 2, column 3. The click could not be on row 4, column 3.
![](https://cdn.luogu.com.cn/upload/vjudge_pic/SP904/52be350def3b5baae704ab9cf4f5f069c1e5dfc4.png) One useful statistic is the perimeter of the object. Assume each X corresponds to a square one unit on each side. Hence the object in Grid 1 has perimeter 8 (2 on each of four sides). The perimeter for the larger object in Grid 2 is illustrated in the figure at the left. The length is 18.
Objects will not contain any totally enclosed holes, so the leftmost grid patterns shown below could _NOT_ appear. The variations on the right could appear:
**Impossible Possible**
**XXXX XXXX XXXX XXXX**
**X..X XXXX X... X...**
**XX.X XXXX XX.X XX.X**
**XXXX XXXX XXXX XX.X**
**..... ..... ..... .....**
**..X.. ..X.. ..X.. ..X..**
**.X.X. .XXX. .X... .....**
**..X.. ..X.. ..X.. ..X..**
**..... ..... ..... .....**
The input will contain one or more grids. Each grid is preceded by a line containing the number of rows and columns in the grid and the row and column of the mouse click. All numbers are in the range 1-20. The rows of the grid follow, starting on the next line, consisting of '.' and 'X' characters.
The end of the input is indicated by a line containing four zeros. The numbers on any one line are separated by blanks. The grid rows contain no blanks.
For each grid in the input, the output contains a single line with the perimeter of the specified object.
```
Input:
2 2 2 2
XX
XX
6 4 2 3
.XXX
.XXX
.XXX
...X
..X.
X...
5 6 1 3
.XXXX.
X....X
..XX.X
.X...X
..XXX.
7 7 2 6
XXXXXXX
XX...XX
X..X..X
X..X...
X..X..X
X.....X
XXXXXXX
7 7 4 4
XXXXXXX
XX...XX
X..X..X
X..X...
X..X..X
X.....X
XXXXXXX
0 0 0 0
```
```
Output:
8
18
40
48
8
```</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div></div>
<h3>输出格式</h3>
<br />
<div></div>
<h2>输入输出样例</h2>
<i>暂无测试点</i>
</article>
</div>
</div>
</body>
</html>
