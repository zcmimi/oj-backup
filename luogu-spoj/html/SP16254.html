<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>RMID2 - Running Median Again - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573450459:dpnIVeLFXYgqrXXxcrHZ7dgdrHyfeAk6C3JlzOopiv4=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22%5BDanish%5D%28..%5C%2F..%5C%2F..%5C%2Fusers%5C%2Fdanish037%5C%2F%29%20has%20just%20solved%20the%20problem%20%5BRunning%20Median%5D%28..%5C%2FRMID%5C%2F%29.%5Cn%5CnThe%20first%20line%20of%20the%20problem%20says%20%5C%22You%20will%20be%20given%20some%20integers%20in%20non-decreasing%20order%5C%22.%20The%20problem%20asks%20you%20to%20report%20and%20remove%20the%20median%20of%20the%20list%20every%20time%20it%20is%20queried.%5Cn%5CnHaving%20solved%20this%20problem%2C%20Danish%20now%20begins%20to%20wonder%20how%20to%20solve%20the%20problem%20if%20the%20input%20is%20in%20any%20order%20%28not%20necessarily%20non-decreasing%20order%20as%20mentioned%20above%29.%5Cn%5CnCan%20you%20help%20him%3F%5Cn%5CnYour%20task%20is%20to%20take%20as%20input%20a%20list%20of%20positive%20integers.%20Whenever%20-1%20is%20given%20as%20input%2C%20you%20must%20output%20the%20median%20of%20the%20list%2C%20and%20remove%20it%20from%20the%20list.%20Take%20the%20smaller%20element%20as%20the%20median%20in%20case%20of%20even%20number%20of%20elements.%22%2C%22inputFormat%22%3A%22The%20input%20contains%20several%20test%20caes.%5Cn%5CnThe%20first%20line%20contains%20an%20integer%20t%2C%20the%20number%20of%20test%20cases.%5Cn%5CnEach%20test%20case%20has%20several%20lines%2C%20each%20containing%20an%20integer%20n%20%28%3C%3D10%5E9%29%20.%20If%20n%20is%20positive%2C%20add%20it%20to%20the%20list.%20n%3D-1%20indicates%20a%20median%20query%20%28there%20will%20be%20no%20median%20query%20if%20the%20list%20is%20empty%29.%20The%20test%20case%20is%20terminated%20by%20n%3D0.%5Cn%5CnIn%20each%20test%20case%2C%20there%20will%20be%20upto%2010%5E5%20integers%20to%20be%20added%20to%20the%20list%2C%20and%20upto%2010%5E5%20median%20queries.%22%2C%22outputFormat%22%3A%22For%20each%20median%20query%20as%20described%20above%2C%20print%20the%20median%20on%20a%20new%20line.%22%2C%22samples%22%3A%5B%5B%221%5Cr%5Cn9%5Cr%5Cn10%5Cr%5Cn2%5Cr%5Cn5%5Cr%5Cn1%5Cr%5Cn18%5Cr%5Cn-1%5Cr%5Cn-1%5Cr%5Cn4%5Cr%5Cn3%5Cr%5Cn-1%5Cr%5Cn8%5Cr%5Cn7%5Cr%5Cn-1%5Cr%5Cn0%22%2C%225%5Cr%5Cn9%5Cr%5Cn3%5Cr%5Cn7%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B695%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F16254%22%2C%22id%22%3A%2216254%22%7D%2C%22translation%22%3A%22%23%23%20%5Cu9898%5Cu76ee%5Cu63cf%5Cu8ff0%5Cr%5Cn%5Cu9898%5Cu76ee%5Cu5c06%5Cu4ee5%5Cu4efb%5Cu610f%5Cu6b21%5Cu5e8f%5Cu7ed9%5Cu51fa%5Cu6574%5Cu6570%2A%2A%5Cuff08%5Cu4e0e%5BSP15376%5D%28https%3A%5C%2F%5C%2Fwww.luogu.org%5C%2Fproblemnew%5C%2Fshow%5C%2FSP15376%29%5Cu4e0d%5Cu4e00%5Cu6837%5Cuff0c%5Cu4e0d%5Cu4e00%5Cu5b9a%5Cu6309%5Cu7167%5Cu4e0d%5Cu9012%5Cu51cf%5Cu6b21%5Cu5e8f%5Cu7ed9%5Cu51fa%5Cuff09%2A%2A%5Cuff0c%5Cu5f53%5Cu8f93%5Cu5165%5Cu7684%5Cu6574%5Cu6570%5Cu662f-1%5Cu65f6%5Cuff0c%5Cu8f93%5Cu51fa%5Cu5f53%5Cu524d%5Cu5e8f%5Cu5217%5Cu7684%5Cu4e2d%5Cu4f4d%5Cu6570%2A%2A%5Cu5e76%5Cu4e14%5Cu5220%5Cu53bb%5Cu8fd9%5Cu4e2a%5Cu6570%2A%2A%5Cuff08%5Cu6ce8%5Cu610f%5Cu4e0d%5Cu8981%5Cu63d2%5Cu5165-1%5Cuff01%5Cuff09%5Cuff0c%5Cu5bf9%5Cu4e8e%5Cu6570%5Cu5217%5Cu91cc%5Cu6709%5Cu5076%5Cu6570%5Cu9879%5Cu6570%5Cu65f6%5Cuff0c%5Cu8f93%5Cu51fa%5Cu8f83%5Cu5c0f%5Cu7684%5Cu90a3%5Cu4e2a%5Cu4e2d%5Cu4f4d%5Cu6570%5Cu3002%5Cr%5Cn%23%23%20%5Cu8f93%5Cu5165%5Cu8f93%5Cu51fa%5Cu683c%5Cu5f0f%5Cr%5Cn%2A%2A%20%5Cu8f93%5Cu5165%5Cu683c%5Cu5f0f%5Cuff1a%2A%2A%5Cr%5Cn%5Cu7b2c%5Cu4e00%5Cu884c%5Cuff0c%5Cu4e00%5Cu4e2a%5Cu6b63%5Cu6574%5Cu6570%20%24t%24%20%5Cuff0c%5Cu8868%5Cu793a%5Cu6570%5Cu636e%5Cu6570%5Cu91cf%5Cu3002%5Cr%5Cn%5Cu6bcf%5Cu4e00%5Cu4e2a%5Cu6570%5Cu636e%5Cu4f1a%5Cu6709%5Cu82e5%5Cu5e72%5Cu884c%5Cuff0c%5Cu6bcf%5Cu4e00%5Cu884c%5Cu90fd%5Cu6709%5Cu4e00%5Cu4e2a%5Cu6574%5Cu6570%20%24%28n%20%5C%5Cleqslant%2010%5E9%29%24%20%5Cuff0c%5Cu5982%5Cu679c%20%24n%24%20%5Cu662f%5Cu6b63%5Cu6570%5Cuff0c%5Cu628a%5Cu5b83%5Cu52a0%5Cu5165%5Cu6570%5Cu5217%5Cuff0c%5Cu5982%5Cu679c%20%24n%3D-1%24%20%5Cuff0c%5Cu90a3%5Cu4e48%5Cu8f93%5Cu51fa%5Cu5f53%5Cu524d%5Cu6570%5Cu5217%5Cu4e2d%5Cu7684%5Cu4e2d%5Cu4f4d%5Cu6570%5Cu5e76%5Cu4e14%5Cu5220%5Cu53bb%5Cu3002%5Cu6700%5Cu540e%5Cu4ee5%20%240%24%20%5Cu7ed3%5Cu675f%5Cu3002%5Cr%5Cn%2A%2A%5Cu5728%5Cu6bcf%5Cu4e00%5Cu4e2a%5Cu6570%5Cu636e%5Cu4e2d%5Cuff0c%5Cu6700%5Cu591a%5Cu4f1a%5Cu6709%2410%5E5%24%5Cu4e2a%5Cu6574%5Cu6570%5Cu52a0%5Cu8fdb%5Cu6570%5Cu5217%5Cuff0c%5Cu6700%5Cu591a%5Cu4f1a%5Cu6709%2410%5E5%24%5Cu6b21%5Cu8be2%5Cu95ee%2A%2A%5Cr%5Cn%5Cr%5Cn%2A%2A%20%5Cu8f93%5Cu51fa%5Cu683c%5Cu5f0f%5Cuff1a%2A%2A%5Cr%5Cn%5Cu5bf9%5Cu4e8e%5Cu6bcf%5Cu6b21%5Cu8be2%5Cu95ee%5Cuff0c%5Cu8f93%5Cu51fa%5Cu5f53%5Cu524d%5Cu6570%5Cu5217%5Cu4e2d%5Cu7684%5Cu4e2d%5Cu4f4d%5Cu6570%5Cu3002%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A69%2C%22totalAccepted%22%3A26%2C%22pid%22%3A%22SP16254%22%2C%22title%22%3A%22RMID2%20-%20Running%20Median%20Again%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A69305%2C%22title%22%3A%22%5Cu7ffb%5Cu8bd1%5Cu3010SP16254%20RMID2%5Cu3011%22%2C%22forum%22%3A%7B%22id%22%3A16029%2C%22name%22%3A%22SP16254%20RMID2%20-%20Running%20Median%20Again%22%2C%22slug%22%3A%22SP16254%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%7B%22pid%22%3A%22P2512%22%2C%22title%22%3A%22%5BHAOI2008%5D%5Cu7cd6%5Cu679c%5Cu4f20%5Cu9012%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P4168%22%2C%22title%22%3A%22%5BViolet%5D%5Cu84b2%5Cu516c%5Cu82f1%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22SP4354%22%2C%22title%22%3A%22TWINSNOW%20-%20Snowflakes%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22SP%22%7D%2C%7B%22pid%22%3A%22SP15376%22%2C%22title%22%3A%22RMID%20-%20Running%20Median%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22SP%22%7D%2C%7B%22pid%22%3A%22P4552%22%2C%22title%22%3A%22%5BPoetize6%5D%20IncDec%20Sequence%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22RMID2%20-%20Running%20Median%20Again%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573363392;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>RMID2 - Running Median Again</h1>
<h2>题意翻译</h2>
<div>## 题目描述
题目将以任意次序给出整数**（与[SP15376](https://www.luogu.org/problemnew/show/SP15376)不一样，不一定按照不递减次序给出）**，当输入的整数是-1时，输出当前序列的中位数**并且删去这个数**（注意不要插入-1！），对于数列里有偶数项数时，输出较小的那个中位数。
## 输入输出格式
** 输入格式：**
第一行，一个正整数 $t$ ，表示数据数量。
每一个数据会有若干行，每一行都有一个整数 $(n \leqslant 10^9)$ ，如果 $n$ 是正数，把它加入数列，如果 $n=-1$ ，那么输出当前数列中的中位数并且删去。最后以 $0$ 结束。
**在每一个数据中，最多会有$10^5$个整数加进数列，最多会有$10^5$次询问**
** 输出格式：**
对于每次询问，输出当前数列中的中位数。</div>
<h2>题目描述</h2>
<div>[Danish](../../../users/danish037/) has just solved the problem [Running Median](../RMID/).
The first line of the problem says "You will be given some integers in non-decreasing order". The problem asks you to report and remove the median of the list every time it is queried.
Having solved this problem, Danish now begins to wonder how to solve the problem if the input is in any order (not necessarily non-decreasing order as mentioned above).
Can you help him?
Your task is to take as input a list of positive integers. Whenever -1 is given as input, you must output the median of the list, and remove it from the list. Take the smaller element as the median in case of even number of elements.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The input contains several test caes.
The first line contains an integer t, the number of test cases.
Each test case has several lines, each containing an integer n (<=10^9) . If n is positive, add it to the list. n=-1 indicates a median query (there will be no median query if the list is empty). The test case is terminated by n=0.
In each test case, there will be upto 10^5 integers to be added to the list, and upto 10^5 median queries.</div>
<h3>输出格式</h3>
<br />
<div>For each median query as described above, print the median on a new line.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>1
9
10
2
5
1
18
-1
-1
4
3
-1
8
7
-1
0</code></pre>
<h3>输出样例 #1</h3>
<pre><code>5
9
3
7</code></pre>
</article>
</div>
</div>
</body>
</html>
