<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>CPATTERN - Cow Patterns - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573450013:6R87vhLImRkeJ8KzuCPp7WHIZHLDF0Clyl2hoG1Ehw0=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3A%22%22%2C%22description%22%3A%22A%20particular%20subgroup%20of%20K%20%281%20%3C%3D%20K%20%3C%3D%2025%2C000%29%20of%20Farmer%20John%27s%20cows%20likes%20to%20make%20trouble.%20When%20placed%20in%20a%20line%2C%20these%20troublemakers%20stand%20together%20in%20a%20particular%20order.%20In%20order%20to%20locate%20these%20troublemakers%2C%20FJ%20has%20lined%20up%20his%20N%20%281%20%3C%3D%20N%20%3C%3D%20100%2C000%29%20cows.%20The%20cows%20will%20file%20past%20FJ%20into%20the%20barn%2C%20staying%20in%20order.%20FJ%20needs%20your%20help%20to%20locate%20suspicious%20blocks%20of%20K%20cows%20within%20this%20line%20that%20might%20potentially%20be%20the%20troublemaking%20cows.%20%20%20%5Cn%20%20%5CnFJ%20distinguishes%20his%20cows%20by%20the%20number%20of%20spots%201..S%20on%20each%20cow%27s%20coat%20%281%20%3C%3D%20S%20%3C%3D%2025%29.%20While%20not%20a%20perfect%20method%2C%20it%20serves%20his%20purposes.%20FJ%20does%20not%20remember%20the%20exact%20number%20of%20spots%20on%20each%20cow%20in%20the%20subgroup%20of%20troublemakers.%20He%20can%2C%20however%2C%20remember%20which%20cows%20in%20the%20group%20have%20the%20same%20number%20of%20spots%2C%20and%20which%20of%20any%20pair%20of%20cows%20has%20more%20spots%20%28if%20the%20spot%20counts%20differ%29.%20He%20describes%20such%20a%20pattern%20with%20a%20sequence%20of%20K%20ranks%20in%20the%20range%201..S.%20For%20example%2C%20consider%20this%20sequence%3A%5Cn%5Cn%20%60%20%20%201%204%204%203%202%201%60In%20this%20example%2C%20FJ%20is%20seeking%20a%20consecutive%20sequence%20of%206%20cows%20from%20among%20his%20N%20cows%20in%20a%20line.%20Cows%20%231%20and%20%236%20in%20this%20sequence%20have%20the%20same%20number%20of%20spots%20%28although%20this%20number%20is%20not%20necessarily%201%29%20and%20they%20have%20the%20smallest%20number%20of%20spots%20of%20cows%20%231..%236%20%28since%20they%20are%20labeled%20as%20%271%27%29.%20Cow%20%235%20has%20the%20second-smallest%20number%20of%20spots%2C%20different%20from%20all%20the%20other%20cows%20%231..%236.%20Cows%20%232%20and%20%233%20have%20the%20same%20number%20of%20spots%2C%20and%20this%20number%20is%20the%20largest%20of%20all%20cows%20%231..%236.%20%20%20%5Cn%20%20%5CnIf%20the%20true%20count%20of%20spots%20for%20some%20sequence%20of%20cows%20is%3A%5Cn%5Cn%20%60%20%20%205%206%202%2010%2010%207%203%202%209%60then%20only%20the%20subsequence%202%2010%2010%207%203%202%20matches%20FJ%27s%20pattern%20above.%20%20%20%5Cn%20%20%5CnPlease%20help%20FJ%20locate%20all%20the%20length-K%20subsequences%20in%20his%20line%20of%20cows%20that%20match%20his%20specified%20pattern.%22%2C%22inputFormat%22%3A%22Line%201%3A%20Three%20space-separated%20integers%3A%20N%2C%20K%2C%20and%20S%20%20%20%5Cn%20%20%5CnLines%202..N%2B1%3A%20Line%20i%2B1%20describes%20the%20number%20of%20spots%20on%20cow%20i.%20%20%20%5Cn%20%20%5CnLines%20N%2B2..N%2BK%2B1%3A%20Line%20i%2BN%2B1%20describes%20pattern-rank%20slot%20i.%22%2C%22outputFormat%22%3A%22Line%201%3A%20The%20number%20of%20indices%2C%20B%2C%20at%20which%20the%20pattern%20matches%20%20%20%5Cn%20%20%5CnLines%202..B%2B1%3A%20An%20index%20%28in%20the%20range%201..N%29%20of%20the%20starting%20location%20where%20the%20pattern%20matches.%22%2C%22samples%22%3A%5B%5B%229%206%2010%5Cn5%5Cn6%5Cn2%5Cn10%5Cn10%5Cn7%5Cn3%5Cn2%5Cn9%5Cn1%5Cn4%5Cn4%5Cn3%5Cn2%5Cn1%22%2C%221%5Cn3%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B248%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F7022%22%2C%22id%22%3A%227022%22%7D%2C%22translation%22%3A%22%5Cu7ea6%5Cu7ff0%5Cu7684N%281%5Cu2264N%5Cu2264100000%29%5Cu53ea%5Cu5976%5Cu725b%5Cu4e2d%5Cu51fa%5Cu73b0%5Cu4e86K%281%5Cu2264K%5Cu226425000%29%5Cu53ea%5Cu7231%5Cu60f9%5Cu9ebb%5Cu70e6%5Cu7684%5Cu574f%5Cu86cb%5Cu3002%5Cu5976%5Cu725b%5Cu4eec%5Cu6309%5Cu4e00%5Cu5b9a%5Cu7684%5Cu987a%5Cu5e8f%5Cu6392%5Cu961f%5Cu7684%5Cu65f6%5Cu5019%5Cuff0c%5Cu8fd9%5Cu4e9b%5Cu574f%5Cu86cb%5Cu603b%5Cu4f1a%5Cu7ad9%5Cu5728%5Cu4e00%5Cu8d77%5Cu3002%5Cu4e3a%5Cu4e86%5Cu627e%5Cu51fa%5Cu8fd9%5Cu4e9b%5Cu574f%5Cu86cb%5Cuff0c%5Cu7ea6%5Cu7ff0%5Cu8ba9%5Cu4ed6%5Cu7684%5Cu5976%5Cu725b%5Cu6392%5Cu597d%5Cu961f%5Cu8fdb%5Cu5165%5Cu725b%5Cu68da%5Cuff0c%5Cu540c%5Cu65f6%5Cu9700%5Cu8981%5Cu4f60%5Cu7684%5Cu6167%5Cu773c%5Cu6765%5Cu8bc6%5Cu522b%5Cu574f%5Cu86cb%5Cuff0c%5Cu4e3a%5Cu4e86%5Cu533a%5Cu5206%5Cuff0c%5Cu7ea6%5Cu7ff0%5Cu7ed9%5Cu6240%5Cu6709%5Cu5976%5Cu725b%5Cu90fd%5Cu53d1%5Cu4e86%5Cu53f7%5Cu724c%5Cuff0c%5Cu4e0a%5Cu9762%5Cu5199%5Cu7740%5Cu4e00%5Cu4e2a1~S%281%5Cu2264S%5Cu226425%29%5Cu4e4b%5Cu95f4%5Cu7684%5Cu6570%5Cu5b57%5Cu3002%5Cu867d%5Cu7136%5Cu8fd9%5Cu4e0d%5Cu662f%5Cu4e00%5Cu4e2a%5Cu5b8c%5Cu7f8e%5Cu7684%5Cu65b9%5Cu6cd5%5Cuff0c%5Cu4f46%5Cu4e5f%5Cu80fd%5Cu8d77%5Cu4e00%5Cu70b9%5Cu4f5c%5Cu7528%5Cu3002%5Cu73b0%5Cu5728%5Cuff0c%5Cu7ea6%5Cu7ff0%5Cu5df2%5Cu7ecf%5Cu4e0d%5Cu8bb0%5Cu5f97%5Cu574f%5Cu86cb%5Cu4eec%5Cu7684%5Cu5177%5Cu4f53%5Cu53f7%5Cu7801%5Cu3002%5Cu4f46%5Cu662f%5Cu51ed%5Cu4ed6%5Cu7684%5Cu8bb0%5Cu5fc6%5Cuff0c%5Cu4ed6%5Cu7ed9%5Cu51fa%5Cu4e00%5Cu4e2a%5Cu201c%5Cu6a21%5Cu5f0f%5Cu4e32%5Cu201d%5Cu3002%5Cu539f%5Cu574f%5Cu86cb%5Cu7684%5Cu53f7%5Cu7801%5Cu5982%5Cu679c%5Cu76f8%5Cu540c%5Cuff0c%5Cu6a21%5Cu5f0f%5Cu4e32%5Cu4e2d%5Cu4ed6%5Cu4eec%5Cu7684%5Cu53f7%5Cu7801%5Cu4f9d%5Cu7136%5Cu76f8%5Cu540c%5Cu3002%5Cu6a21%5Cu5f0f%5Cu4e32%5Cu4e2d%5Cu574f%5Cu86cb%5Cu4eec%5Cu4e4b%5Cu95f4%5Cu53f7%5Cu7801%5Cu7684%5Cu5927%5Cu5c0f%5Cu5173%5Cu7cfb%5Cu4e5f%5Cu4e0e%5Cu539f%5Cu53f7%5Cu7801%5Cu76f8%5Cu540c%5Cu7684%5Cu3002%5Cu6bd4%5Cu5982%5Cuff0c%5Cu5bf9%5Cu4e8e%5Cu8fd9%5Cu6837%5Cu4e00%5Cu4e2a%5Cu6a21%5Cu5f0f%5Cu4e32%5Cuff1a1%5Cuff0c4%5Cuff0c4%5Cuff0c3%5Cuff0c2%5Cuff0c1%5Cu3002%5Cu539f%5Cu6765%5Cu76846%5Cu53ea%5Cu574f%5Cu86cb%5Cuff0c%5Cu6392%5Cu6700%5Cu524d%5Cu9762%5Cu7684%5Cu4e0e%5Cu6392%5Cu6700%5Cu540e%5Cu7684%5Cu53f7%5Cu7801%5Cu76f8%5Cu540c%5Cuff08%5Cu5c3d%5Cu7ba1%5Cu4e0d%5Cu4e00%5Cu5b9a%5Cu662f1%5Cuff09%5Cuff0c%5Cu800c%5Cu4e14%5Cu4ed6%5Cu4eec%5Cu7684%5Cu53f7%5Cu7801%5Cu5728%5Cu56e2%5Cu4f19%5Cu4e2d%5Cu662f%5Cu6700%5Cu5c0f%5Cu7684%5Cu3002%5Cu7b2c2%5Cuff0c3%5Cu4f4d%5Cu7f6e%5Cu7684%5Cu574f%5Cu86cb%5Cuff0c%5Cu4ed6%5Cu4eec%5Cu7684%5Cu53f7%5Cu7801%5Cu4e5f%5Cu76f8%5Cu540c%5Cuff08%5Cu4e0d%5Cu4e00%5Cu5b9a%5Cu662f4%5Cuff09%5Cuff0c%5Cu4e14%5Cu662f%5Cu574f%5Cu86cb%5Cu56e2%5Cu4f19%5Cu4e2d%5Cu6700%5Cu5927%5Cu7684%5Cu3002%5Cu73b0%5Cu5728%5Cu6240%5Cu6709%5Cu5976%5Cu725b%5Cu6392%5Cu6210%5Cu961f%5Cu5217%5Cuff0c%5Cu53f7%5Cu7801%5Cu4f9d%5Cu6b21%5Cu662f%5Cu8fd9%5Cu6837%5Cuff1a5%5Cuff0c6%5Cuff0c2%5Cuff0c10%5Cuff0c10%5Cuff0c7%5Cuff0c3%5Cuff0c2%5Cuff0c9%5Cu5b58%5Cu5728%5Cu5b50%5Cu4e322%5Cuff0c10%5Cuff0c10%5Cuff0c7%5Cuff0c3%5Cuff0c2%5Cuff0c%5Cu6ee1%5Cu8db3%5Cu6a21%5Cu5f0f%5Cu4e32%5Cu7684%5Cu76f8%5Cu540c%5Cu5173%5Cu7cfb%5Cu548c%5Cu5927%5Cu5c0f%5Cu5173%5Cu7cfb%5Cuff0c%5Cu6240%5Cu4ee5%5Cu8fd9%5Cu5c31%5Cu662f%5Cu574f%5Cu86cb%5Cu56e2%5Cu4f19%5Cuff0c%5Cu8bf7%5Cu627e%5Cu51faK%5Cu4e2a%5Cu574f%5Cu86cb%5Cu7684%5Cu56f0%5Cu4f19%5Cu7684%5Cu6240%5Cu6709%5Cu53ef%5Cu80fd%5Cu6027%5Cu3002%5Cn%5CnInput%5Cn%5Cn%5Cu7b2c1%5Cu884c%5Cu8f93%5Cu5165%5Cu4e09%5Cu4e2a%5Cu6574%5Cu6570N%5Cuff0cK%5Cuff0cS%5Cu3002%5Cu63a5%5Cu4e0b%5Cu6765N%5Cu884c%5Cu6bcf%5Cu884c%5Cu8f93%5Cu5165%5Cu4e00%5Cu53ea%5Cu725b%5Cu7684%5Cu53f7%5Cu7801%5Cu3002%5Cu63a5%5Cu4e0b%5Cu6765K%5Cu884c%5Cu6bcf%5Cu884c%5Cu8f93%5Cu5165%5Cu4e00%5Cu4e2a%5Cu6a21%5Cu5f0f%5Cu4e32%5Cu7684%5Cu53f7%5Cu7801%5Cu3002%5Cn%5CnOutput%5Cn%5Cn%5Cu7b2c1%5Cu884c%5Cu8f93%5Cu51fa%5Cu4e00%5Cu4e2a%5Cu6574%5Cu6570B%5Cu3002%5Cu63a5%5Cu4e0b%5Cu6765B%5Cu884c%5Cuff0c%5Cu6bcf%5Cu884c%5Cu4e00%5Cu4e2a%5Cu6574%5Cu6570%5Cuff0c%5Cu8868%5Cu793a%5Cu4e00%5Cu79cd%5Cu53ef%5Cu80fd%5Cu4e0b%5Cu7684%5Cu574f%5Cu86cb%5Cu56e2%5Cu4f19%5Cu7684%5Cu8d77%5Cu59cb%5Cu4f4d%5Cu7f6e%5Cu3002%5Cn%5Cn%5Cu611f%5Cu8c22%40aoandon%20%5Cu63d0%5Cu4f9b%5Cu7684%5Cu7ffb%5Cu8bd1%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A46%2C%22totalAccepted%22%3A23%2C%22pid%22%3A%22SP7022%22%2C%22title%22%3A%22CPATTERN%20-%20Cow%20Patterns%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A38372%2C%22title%22%3A%22%5Cu7ffb%5Cu8bd1%5Cuff08%5Cu53ef%5Cu60dc%5Cu4f30%5Cu8ba1%5Cu6ca1%5Cu4eba%5Cu770b%5Cuff09%22%2C%22forum%22%3A%7B%22id%22%3A14408%2C%22name%22%3A%22SP7022%20CPATTERN%20-%20Cow%20Patterns%22%2C%22slug%22%3A%22SP7022%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%7B%22pid%22%3A%22P2444%22%2C%22title%22%3A%22%5BPOI2000%5D%5Cu75c5%5Cu6bd2%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P3629%22%2C%22title%22%3A%22%5BAPIO2010%5D%5Cu5de1%5Cu903b%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P3121%22%2C%22title%22%3A%22%5BUSACO15FEB%5D%5Cu5ba1%5Cu67e5%5Cuff08%5Cu9ec4%5Cu91d1%5Cuff09Censoring%20%28Gold%29%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P3804%22%2C%22title%22%3A%22%5Cu3010%5Cu6a21%5Cu677f%5Cu3011%5Cu540e%5Cu7f00%5Cu81ea%5Cu52a8%5Cu673a%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P3809%22%2C%22title%22%3A%22%5Cu3010%5Cu6a21%5Cu677f%5Cu3011%5Cu540e%5Cu7f00%5Cu6392%5Cu5e8f%22%2C%22difficulty%22%3A6%2C%22type%22%3A%22P%22%7D%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22CPATTERN%20-%20Cow%20Patterns%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573363392;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>CPATTERN - Cow Patterns</h1>
<h2>题意翻译</h2>
<div>约翰的N(1≤N≤100000)只奶牛中出现了K(1≤K≤25000)只爱惹麻烦的坏蛋。奶牛们按一定的顺序排队的时候，这些坏蛋总会站在一起。为了找出这些坏蛋，约翰让他的奶牛排好队进入牛棚，同时需要你的慧眼来识别坏蛋，为了区分，约翰给所有奶牛都发了号牌，上面写着一个1~S(1≤S≤25)之间的数字。虽然这不是一个完美的方法，但也能起一点作用。现在，约翰已经不记得坏蛋们的具体号码。但是凭他的记忆，他给出一个“模式串”。原坏蛋的号码如果相同，模式串中他们的号码依然相同。模式串中坏蛋们之间号码的大小关系也与原号码相同的。比如，对于这样一个模式串：1，4，4，3，2，1。原来的6只坏蛋，排最前面的与排最后的号码相同（尽管不一定是1），而且他们的号码在团伙中是最小的。第2，3位置的坏蛋，他们的号码也相同（不一定是4），且是坏蛋团伙中最大的。现在所有奶牛排成队列，号码依次是这样：5，6，2，10，10，7，3，2，9存在子串2，10，10，7，3，2，满足模式串的相同关系和大小关系，所以这就是坏蛋团伙，请找出K个坏蛋的困伙的所有可能性。
Input
第1行输入三个整数N，K，S。接下来N行每行输入一只牛的号码。接下来K行每行输入一个模式串的号码。
Output
第1行输出一个整数B。接下来B行，每行一个整数，表示一种可能下的坏蛋团伙的起始位置。
感谢@aoandon 提供的翻译</div>
<h2>题目描述</h2>
<div>A particular subgroup of K (1 <= K <= 25,000) of Farmer John's cows likes to make trouble. When placed in a line, these troublemakers stand together in a particular order. In order to locate these troublemakers, FJ has lined up his N (1 <= N <= 100,000) cows. The cows will file past FJ into the barn, staying in order. FJ needs your help to locate suspicious blocks of K cows within this line that might potentially be the troublemaking cows.
FJ distinguishes his cows by the number of spots 1..S on each cow's coat (1 <= S <= 25). While not a perfect method, it serves his purposes. FJ does not remember the exact number of spots on each cow in the subgroup of troublemakers. He can, however, remember which cows in the group have the same number of spots, and which of any pair of cows has more spots (if the spot counts differ). He describes such a pattern with a sequence of K ranks in the range 1..S. For example, consider this sequence:
` 1 4 4 3 2 1`In this example, FJ is seeking a consecutive sequence of 6 cows from among his N cows in a line. Cows #1 and #6 in this sequence have the same number of spots (although this number is not necessarily 1) and they have the smallest number of spots of cows #1..#6 (since they are labeled as '1'). Cow #5 has the second-smallest number of spots, different from all the other cows #1..#6. Cows #2 and #3 have the same number of spots, and this number is the largest of all cows #1..#6.
If the true count of spots for some sequence of cows is:
` 5 6 2 10 10 7 3 2 9`then only the subsequence 2 10 10 7 3 2 matches FJ's pattern above.
Please help FJ locate all the length-K subsequences in his line of cows that match his specified pattern.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>Line 1: Three space-separated integers: N, K, and S
Lines 2..N+1: Line i+1 describes the number of spots on cow i.
Lines N+2..N+K+1: Line i+N+1 describes pattern-rank slot i.</div>
<h3>输出格式</h3>
<br />
<div>Line 1: The number of indices, B, at which the pattern matches
Lines 2..B+1: An index (in the range 1..N) of the starting location where the pattern matches.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>9 6 10
5
6
2
10
10
7
3
2
9
1
4
4
3
2
1</code></pre>
<h3>输出样例 #1</h3>
<pre><code>1
3</code></pre>
</article>
</div>
</div>
</body>
</html>
