<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>CODESPTD - Queens on a Board - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573450170:7hrOmX+OYT+KxmC3fCTx9nOYUGb6FZyR55oCJASYWrI=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22You%20have%20an%20N%20%5C%5C%2A%20M%20chessboard%20on%20which%20some%20squares%20are%20blocked%20out.%20In%20how%20many%20ways%20can%20you%20place%20one%20or%20more%20queens%20on%20the%20board%20such%20that%20no%20two%20queens%20attack%20each%20other%3F%20Two%20queens%20attack%20each%20other%20if%20one%20can%20reach%20the%20other%20by%20moving%20horizontally%2C%20vertically%20or%20diagonally%20without%20passing%20over%20any%20blocked%20square.%20At%20most%20one%20queen%20can%20be%20placed%20on%20a%20square.%20A%20queen%20cannot%20be%20placed%20on%20a%20blocked%20square.%22%2C%22inputFormat%22%3A%22%22%2C%22outputFormat%22%3A%22%22%2C%22samples%22%3A%5B%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B259%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F9725%22%2C%22id%22%3A%229725%22%7D%2C%22translation%22%3A%22%5Cu3010%5Cu95ee%5Cu9898%5Cu63cf%5Cu8ff0%5Cu3011%5Cr%5Cn%5Ct%5Cu4f60%5Cu6709%5Cu4e00%5Cu4e2aN%2AM%5Cu7684%5Cu68cb%5Cu76d8%5Cuff0c%5Cu68cb%5Cu76d8%5Cu4e0a%5Cu6709%5Cu4e00%5Cu4e9b%5Cu683c%5Cu5b50%5Cu662f%5Cu5c01%5Cu95ed%5Cu7684%5Cu3002%5Cu4f60%5Cu6709%5Cu591a%5Cu5c11%5Cu79cd%5Cu653e%5Cu7f6e%5Cu4e00%5Cu4e2a%5Cu6216%5Cu8005%5Cu591a%5Cu4e2a%5Cu7687%5Cu540e%5Cu7684%5Cu65b9%5Cu6cd5%5Cuff0c%5Cu4f7f%5Cu5f97%5Cu7687%5Cu540e%5Cu4e4b%5Cu95f4%5Cu4e0d%5Cu80fd%5Cu76f8%5Cu4e92%5Cu653b%5Cu51fb%5Cu3002%5Cu4e24%5Cu4e2a%5Cu7687%5Cu540e%5Cu80fd%5Cu76f8%5Cu4e92%5Cu653b%5Cu51fb%5Cu5f53%5Cu4e14%5Cu4ec5%5Cu5f53%5Cu4e00%5Cu4e2a%5Cu7687%5Cu540e%5Cu80fd%5Cu6a2a%5Cu7740%5Cuff0c%5Cu6216%5Cu8005%5Cu7ad6%5Cu7740%5Cuff0c%5Cu6216%5Cu8005%5Cu6cbf%5Cu7740%5Cu5bf9%5Cu89d2%5Cu7ebf%5Cu8d70%5Cu5230%5Cu53e6%5Cu4e00%5Cu4e2a%5Cu7687%5Cu540e%5Cuff0c%5Cu5e76%5Cu4e14%5Cu4e0d%5Cu80fd%5Cu7ecf%5Cu8fc7%5Cu5c01%5Cu95ed%5Cu7684%5Cu683c%5Cu5b50%5Cu3002%5Cu4e00%5Cu4e2a%5Cu683c%5Cu5b50%5Cu6700%5Cu591a%5Cu653e%5Cu4e00%5Cu4e2a%5Cu7687%5Cu540e%5Cu3002%5Cu5c01%5Cu95ed%5Cu7684%5Cu683c%5Cu5b50%5Cu4e0a%5Cu4e0d%5Cu80fd%5Cu653e%5Cu7687%5Cu540e%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cu3010%5Cu8f93%5Cu5165%5Cu683c%5Cu5f0f%5Cu3011%5Cr%5Cn%5Ct%5Cu7b2c%5Cu4e00%5Cu884c%5Cu4e00%5Cu4e2a%5Cu6574%5Cu6570T%20%281%3C%3DT%3C%3D100%29%5Cu8868%5Cu793a%5Cu6570%5Cu636e%5Cu7684%5Cu7ec4%5Cu6570%5Cu3002%5Cu6bcf%5Cu7ec4%5Cu6570%5Cu636e%5Cu7684%5Cu7b2c%5Cu4e00%5Cu884c%5Cu4e3aN%281%3C%3DN%3C%3D50%29%5Cu548cM%281%3C%3DM%3C%3D5%29%5Cu3002%5Cu63a5%5Cu4e0b%5Cu6765N%2AM%5Cu7684%5Cu4e00%5Cu4e2a%5Cu77e9%5Cu9635%5Cu8868%5Cu793a%5Cu68cb%5Cu76d8%5Cu3002%5Cu2019%23%5Cu2019%5Cu8868%5Cu793a%5Cu5c01%5Cu95ed%5Cu7684%5Cu683c%5Cu5b50%5Cuff0c%5Cu2019.%5Cu2019%5Cu8868%5Cu793a%5Cu4e0d%5Cu5c01%5Cu95ed%5Cu7684%5Cu683c%5Cu5b50%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cu3010%5Cu8f93%5Cu51fa%5Cu683c%5Cu5f0f%5Cu3011%5Cr%5Cn%5Ct%5Cu8f93%5Cu51faT%5Cu884c%5Cuff0c%5Cu6bcf%5Cu884c%5Cu4e3a%5Cu5408%5Cu6cd5%5Cu7684%5Cu65b9%5Cu6848%5Cu603b%5Cu6570%5Cu3002%5Cu7b54%5Cu6848%5Cu8981mod%201000000007.%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A0%2C%22totalAccepted%22%3A0%2C%22pid%22%3A%22SP9725%22%2C%22title%22%3A%22CODESPTD%20-%20Queens%20on%20a%20Board%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22CODESPTD%20-%20Queens%20on%20a%20Board%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>CODESPTD - Queens on a Board</h1>
<h2>题意翻译</h2>
<div>【问题描述】
你有一个N*M的棋盘，棋盘上有一些格子是封闭的。你有多少种放置一个或者多个皇后的方法，使得皇后之间不能相互攻击。两个皇后能相互攻击当且仅当一个皇后能横着，或者竖着，或者沿着对角线走到另一个皇后，并且不能经过封闭的格子。一个格子最多放一个皇后。封闭的格子上不能放皇后。
【输入格式】
第一行一个整数T (1<=T<=100)表示数据的组数。每组数据的第一行为N(1<=N<=50)和M(1<=M<=5)。接下来N*M的一个矩阵表示棋盘。’#’表示封闭的格子，’.’表示不封闭的格子。
【输出格式】
输出T行，每行为合法的方案总数。答案要mod 1000000007.</div>
<h2>题目描述</h2>
<div>You have an N \* M chessboard on which some squares are blocked out. In how many ways can you place one or more queens on the board such that no two queens attack each other? Two queens attack each other if one can reach the other by moving horizontally, vertically or diagonally without passing over any blocked square. At most one queen can be placed on a square. A queen cannot be placed on a blocked square.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div></div>
<h3>输出格式</h3>
<br />
<div></div>
<h2>输入输出样例</h2>
<i>暂无测试点</i>
</article>
</div>
</div>
</body>
</html>
