<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>IOPC1205 - The magical escape - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573450220:C9fcSSLxKbRfRsaViTS0oLkAhwx6CIJfObvs9guLf+A=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22The%20nasty%20king%20of%20Dystopia%20has%20captured%20a%20group%20of%20travellers%20from%20Utopia.%20The%20king%20wants%20to%20toy%20with%20them%2C%20so%20he%20makes%20them%20play%20a%20little%20%5C%22game%5C%22%3A%5Cn%5CnThe%20king%20will%20place%20everyone%20in%20solitary%20confinement.%20He%20has%20placed%20a%20bulb%20in%20a%20separate%20room%20which%20is%20controlled%20by%20a%20switch.%20Initially%20the%20bulb%20is%20off.%20Each%20day%20he%20picks%20a%20prisoner%20at%20random%20and%20takes%20him%20to%20the%20room.%20He%20can%20see%20whether%20the%20bulb%20is%20on%20or%20not%2C%20and%20choose%20whether%20to%20toggle%20the%20state%20of%20the%20bulb.%20This%20continues%20day%20after%20day.%20Now%20the%20king%20says%20that%2C%20once%20a%20prisoner%20realises%20that%20all%20of%20them%20have%20visited%20the%20special%20room%20at%20least%20once%2C%20he%20can%20convey%20it%20to%20the%20king%20and%20he%20will%20set%20everyone%20free.%20However%2C%20if%20someone%20makes%20such%20a%20claim%20wrongly%2C%20everyone%20will%20be%20executed.%20Before%20locking%20everyone%20up%2C%20the%20king%20would%20allow%20all%20prisoners%20to%20get%20together%20and%20decide%20a%20strategy.%5Cn%5CnThis%20would%20usually%20be%20a%20very%20diabolic%20game%20to%20play%20-%20However%2C%20among%20the%20prisoners%20there%20were%20some%20magicians%20who%20could%20communicate%20with%20each%20other%20telepathically.%20So%20they%20come%20up%20with%20this%20strategy.%20All%20magicians%20start%20counting%20from%200.%20Every%20time%20a%20non-magician%20who%20has%20never%20toggled%20the%20state%20of%20the%20bulb%20before%20enters%20the%20room%20and%20finds%20the%20lamp%20off%2C%20he%20turns%20it%20on.%20However%20if%20he%20finds%20it%20on%20already%2C%20or%20if%20he%20has%20toggled%20the%20state%20of%20the%20bulb%20before%2C%20he%20leaves%20it%20as%20is.%20Whenever%20a%20magician%20enters%20the%20room%2C%20he%20does%20the%20following%3A%5Cn%5Cn-%20If%20he%20is%20entering%20the%20room%20for%20the%20first%20time%2C%20he%20increases%20his%20counter%20by%201%20and%20telepathically%20communicates%20this%20to%20all%20other%20magicians%20who%20update%20their%20counter%20as%20well.%5Cn%20%20%20%5Cn-%20If%20he%20finds%20the%20lamp%20on%2C%20whether%20or%20not%20he%20is%20a%20first%20timer%2C%20he%20turns%20it%20off%20and%20all%20magicians%20increase%20their%20counter%20by%20one.%5Cn%5CnFinally%20when%20the%20magicians%27%20counter%20reaches%20the%20total%20number%20of%20prisoners%2C%20they%20declare%20that%20everyone%20has%20been%20in%20the%20room%20at%20least%20once.%5Cn%5CnFind%20the%20expected%20number%20of%20days%20that%20pass%20before%20this%20declaration%20occurs.%22%2C%22inputFormat%22%3A%22The%20first%20line%20of%20the%20input%20contains%20T%2C%20the%20number%20of%20test%20cases%20%28T%22%2C%22outputFormat%22%3A%22For%20each%20test%20case%2C%20output%20the%20expected%20number%20of%20days%20before%20the%20magicians%20declare%20that%20all%20prisoners%20have%20entered%20the%20room%20at%20least%20once.%20The%20output%20has%20to%20be%20formatted%20in%20the%20following%20fashion%3A%20%23.%23%23%23%23%23%23E%2B%23%23%20That%20is%2C%20one%20nonzero%20digit%20before%20the%20decimal%20point%2C%20six%20digits%20after%20the%20decimal%20point%20and%20two%20digits%20for%20the%20exponent.%20See%20the%20sample%20test%20case%20for%20a%20formatting%20example.%22%2C%22samples%22%3A%5B%5B%222%5Cr%5Cn100%2010%5Cr%5Cn1%201%22%2C%221.408258E%2B03%5Cr%5Cn1.000000E%2B00%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B235%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F10461%22%2C%22id%22%3A%2210461%22%7D%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Atrue%2C%22totalSubmit%22%3A4%2C%22totalAccepted%22%3A0%2C%22pid%22%3A%22SP10461%22%2C%22title%22%3A%22IOPC1205%20-%20The%20magical%20escape%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22IOPC1205%20-%20The%20magical%20escape%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>IOPC1205 - The magical escape</h1>
<h2>题目描述</h2>
<div>The nasty king of Dystopia has captured a group of travellers from Utopia. The king wants to toy with them, so he makes them play a little "game":
The king will place everyone in solitary confinement. He has placed a bulb in a separate room which is controlled by a switch. Initially the bulb is off. Each day he picks a prisoner at random and takes him to the room. He can see whether the bulb is on or not, and choose whether to toggle the state of the bulb. This continues day after day. Now the king says that, once a prisoner realises that all of them have visited the special room at least once, he can convey it to the king and he will set everyone free. However, if someone makes such a claim wrongly, everyone will be executed. Before locking everyone up, the king would allow all prisoners to get together and decide a strategy.
This would usually be a very diabolic game to play - However, among the prisoners there were some magicians who could communicate with each other telepathically. So they come up with this strategy. All magicians start counting from 0. Every time a non-magician who has never toggled the state of the bulb before enters the room and finds the lamp off, he turns it on. However if he finds it on already, or if he has toggled the state of the bulb before, he leaves it as is. Whenever a magician enters the room, he does the following:
- If he is entering the room for the first time, he increases his counter by 1 and telepathically communicates this to all other magicians who update their counter as well.
- If he finds the lamp on, whether or not he is a first timer, he turns it off and all magicians increase their counter by one.
Finally when the magicians' counter reaches the total number of prisoners, they declare that everyone has been in the room at least once.
Find the expected number of days that pass before this declaration occurs.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line of the input contains T, the number of test cases (T</div>
<h3>输出格式</h3>
<br />
<div>For each test case, output the expected number of days before the magicians declare that all prisoners have entered the room at least once. The output has to be formatted in the following fashion: #.######E+## That is, one nonzero digit before the decimal point, six digits after the decimal point and two digits for the exponent. See the sample test case for a formatting example.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>2
100 10
1 1</code></pre>
<h3>输出样例 #1</h3>
<pre><code>1.408258E+03
1.000000E+00</code></pre>
</article>
</div>
</div>
</body>
</html>
