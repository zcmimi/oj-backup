<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>HANGLET - Hang or not to hang - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573449523:6Im9GJrExoG0c0ihUZQplBWLUAWcJEX9WklK/1CbPXM=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22%20Little%20Tom%20is%20learning%20how%20to%20program.%20He%20has%20just%20written%20some%20programs%20but%20is%20afraid%20to%20run%20them%2C%20because%20he%20does%20not%20know%20if%20they%20will%20ever%20stop.%20Please%20write%20a%20program%20to%20help%20him.%20This%20task%20is%20not%20as%20easy%20as%20it%20may%20seem%2C%20because%20Tom%27s%20programs%20are%20possibly%20not%20deterministic.%20Given%20a%20program%20written%20by%20Tom%2C%20your%20program%20should%20tell%20him%20whether%20his%20program%20can%20stop%20and%20if%20so%2C%20what%20is%20the%20shortest%20possible%20time%20before%20it%20stops.%5Cn%5Cn%20Tom%27s%20computer%20consists%20of%2032%201-bit%20registers%20and%20the%20program%20consists%20of%20n%20instructions.%20The%20registers%20are%20numbered%20from%200%20to%2031%20and%20the%20instructions%20are%20numbered%20from%200%20to%20n-1.%5Cn%5Cn%20Below%2C%20MEM%5C%5C%5Ba%5C%5C%5D%20stands%20for%20the%20contents%20of%20the%20a-th%20register%2C%200%20%3C%3D%20a%2C%20b%20%3C%2032%2C%200%20%3C%3D%20x%20%3C%20n%2C%200%20%3C%3D%20c%20%3C%3D%201.%5Cn%5Cn%20The%20instruction%20set%20is%20as%20follows%3A%5Cn%5Cn%20%60%60%60%5Cn%5CnInstruction%20%20%20Semantics%20%5Cn%5CnAND%20a%20b%20%20%20%20%20%20%20MEM%5Ba%5D%20%3A%3D%20MEM%5Ba%5D%20and%20MEM%5Bb%5D%20%5CnOR%20a%20b%20%20%20%20%20%20%20%20MEM%5Ba%5D%20%3A%3D%20MEM%5Ba%5D%20or%20MEM%5Bb%5D%20%5CnXOR%20a%20b%20%20%20%20%20%20%20MEM%5Ba%5D%20%3A%3D%20MEM%5Ba%5D%20xor%20MEM%5Bb%5D%20%5CnNOT%20a%20%20%20%20%20%20%20%20%20MEM%5Ba%5D%20%3A%3D%20not%20MEM%5Ba%5D%20%5CnMOV%20a%20b%20%20%20%20%20%20%20MEM%5Ba%5D%20%3A%3D%20MEM%5Bb%5D%20%5CnSET%20a%20c%20%20%20%20%20%20%20MEM%5Ba%5D%20%3A%3D%20c%20%5CnRANDOM%20a%20%20%20%20%20%20MEM%5Ba%5D%20%3A%3D%20random%20value%20%280%20or%201%29%20%5CnJMP%20x%20%20%20%20%20%20%20%20%20jump%20to%20the%20instruction%20with%20the%20number%20x%20%5CnJZ%20x%20a%20%20%20%20%20%20%20%20jump%20to%20the%20instruction%20with%20the%20number%20x%20if%20MEM%5Ba%5D%20%3D%200%20%5CnSTOP%20%20%20%20%20%20%20%20%20%20stop%20the%20program%20%5Cn%5Cn%60%60%60%22%2C%22inputFormat%22%3A%22%20The%20input%20begins%20with%20the%20integer%20t%2C%20the%20number%20of%20test%20cases.%20Then%20t%20test%20cases%20follow.%5Cn%5Cn%20For%20each%20test%20case%20the%20first%20line%20of%20the%20input%20contains%20an%20integer%20n%20%281%20%3C%3D%20n%20%3C%3D%2016%29%20being%20the%20number%20of%20instructions%20of%20the%20program.%20Each%20of%20the%20next%20n%20lines%20contains%20one%20instruction%20of%20the%20program%20in%20the%20format%20given%20above.%20You%20may%20assume%20that%20the%20only%20white%20characters%20in%20the%20program%20are%20single%20spaces%20between%20successive%20tokens%20of%20each%20instruction.%22%2C%22outputFormat%22%3A%22%20For%20each%20test%20case%20the%20first%20and%20only%20line%20of%20the%20output%20should%20contain%20the%20shortest%20possible%20running%20time%20of%20the%20program%2C%20measured%20in%20processor%20cycles.%20If%20the%20program%20cannot%20stop%2C%20output%20should%20contain%20the%20word%20HANGS.%22%2C%22samples%22%3A%5B%5B%222%5Cr%5Cn5%20%5Cr%5CnSET%200%201%20%5Cr%5CnJZ%204%200%20%5Cr%5CnRANDOM%200%20%5Cr%5CnJMP%201%20%5Cr%5CnSTOP%20%5Cr%5Cn5%20%5Cr%5CnMOV%203%205%20%5Cr%5CnNOT%203%20%5Cr%5CnAND%203%205%20%5Cr%5CnJZ%200%203%20%5Cr%5CnSTOP%22%2C%226%20%5Cr%5CnHANGS%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B3000%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F89%22%2C%22id%22%3A%2289%22%7D%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Atrue%2C%22totalSubmit%22%3A0%2C%22totalAccepted%22%3A0%2C%22pid%22%3A%22SP89%22%2C%22title%22%3A%22HANGLET%20-%20Hang%20or%20not%20to%20hang%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22HANGLET%20-%20Hang%20or%20not%20to%20hang%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>HANGLET - Hang or not to hang</h1>
<h2>题目描述</h2>
<div> Little Tom is learning how to program. He has just written some programs but is afraid to run them, because he does not know if they will ever stop. Please write a program to help him. This task is not as easy as it may seem, because Tom's programs are possibly not deterministic. Given a program written by Tom, your program should tell him whether his program can stop and if so, what is the shortest possible time before it stops.
Tom's computer consists of 32 1-bit registers and the program consists of n instructions. The registers are numbered from 0 to 31 and the instructions are numbered from 0 to n-1.
Below, MEM\[a\] stands for the contents of the a-th register, 0 <= a, b < 32, 0 <= x < n, 0 <= c <= 1.
The instruction set is as follows:
```
Instruction Semantics
AND a b MEM[a] := MEM[a] and MEM[b]
OR a b MEM[a] := MEM[a] or MEM[b]
XOR a b MEM[a] := MEM[a] xor MEM[b]
NOT a MEM[a] := not MEM[a]
MOV a b MEM[a] := MEM[b]
SET a c MEM[a] := c
RANDOM a MEM[a] := random value (0 or 1)
JMP x jump to the instruction with the number x
JZ x a jump to the instruction with the number x if MEM[a] = 0
STOP stop the program
```</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div> The input begins with the integer t, the number of test cases. Then t test cases follow.
For each test case the first line of the input contains an integer n (1 <= n <= 16) being the number of instructions of the program. Each of the next n lines contains one instruction of the program in the format given above. You may assume that the only white characters in the program are single spaces between successive tokens of each instruction.</div>
<h3>输出格式</h3>
<br />
<div> For each test case the first and only line of the output should contain the shortest possible running time of the program, measured in processor cycles. If the program cannot stop, output should contain the word HANGS.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>2
5 
SET 0 1 
JZ 4 0 
RANDOM 0 
JMP 1 
STOP 
5 
MOV 3 5 
NOT 3 
AND 3 5 
JZ 0 3 
STOP</code></pre>
<h3>输出样例 #1</h3>
<pre><code>6 
HANGS</code></pre>
</article>
</div>
</div>
</body>
</html>
