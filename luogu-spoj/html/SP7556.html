<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>HASTOCK - B - Stock Charts - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573450043:61IlN9kSrHJ8b4EYlagnhHPtQ7mKBp7SA/cO5IfPmU8=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22%2A%2AB%20-%20Stock%20Charts%2A%2A%5Cn%5CnYou%27re%20in%20the%20middle%20of%20writing%20your%20newspaper%27s%20end-of-year%20economics%20summary%2C%20and%20you%27ve%20decided%20that%20you%20want%20to%20show%20a%20number%20of%20charts%20to%20demonstrate%20how%20different%20stocks%20have%20performed%20over%20the%20course%20of%20the%20last%20year.%20You%27ve%20already%20decided%20that%20you%20want%20to%20show%20the%20price%20of%20%2A%2An%2A%2A%20different%20stocks%2C%20all%20at%20the%20same%20%2A%2Ak%2A%2A%20points%20of%20the%20year.%5Cn%5CnA%20_simple%20chart_%20of%20one%20stock%27s%20price%20would%20draw%20lines%20between%20the%20points%20%280%2C%20price%20%24%20_%7B0%7D%20%24%20%29%2C%20%281%2C%20price%20%24%20_%7B1%7D%20%24%20%29%2C%20...%20%2C%20%28k-1%2C%20price%20%24%20_%7Bk-1%7D%20%24%20%29%2C%20where%20price%20%24%20_%7Bi%7D%20%24%20is%20the%20price%20of%20the%20stock%20at%20the%20_i_th%20point%20in%20time.%5Cn%5CnIn%20order%20to%20save%20space%2C%20you%20have%20invented%20the%20concept%20of%20an%20_overlaid%20chart_.%20An%20overlaid%20chart%20is%20the%20combination%20of%20one%20or%20more%20simple%20charts%2C%20and%20shows%20the%20prices%20of%20multiple%20stocks%20%28simply%20drawing%20a%20line%20for%20each%20one%29.%20In%20order%20to%20avoid%20confusion%20between%20the%20stocks%20shown%20in%20a%20chart%2C%20the%20lines%20in%20an%20overlaid%20chart%20may%20not%20cross%20or%20touch.%5Cn%5CnGiven%20a%20list%20of%20_n_%20stocks%27%20prices%20at%20each%20of%20_k_%20time%20points%2C%20determine%20the%20minimum%20number%20of%20overlaid%20charts%20you%20need%20to%20show%20all%20of%20the%20stocks%27%20prices.%5Cn%5CnInput%5Cn%5CnThe%20first%20line%20of%20input%20will%20contain%20a%20single%20integer%20%2A%2AT%2A%2A%2C%20the%20number%20of%20test%20cases.%20After%20this%20will%20follow%20%2A%2AT%2A%2A%20test%20cases%20on%20different%20lines%2C%20each%20of%20the%20form%3A%5Cn%5Cn%20%60%60%60%5Cnn%20k%5Cnprice0%2C0%20price0%2C1%20...%20price0%2Ck-1%5Cnprice1%2C0%20price1%2C1%20...%20price1%2Ck-1%5Cn...%5Cnpricen-1%2C0%20pricen-1%2C1%20...%20pricen-1%2Ck-1%5Cn%60%60%60%5CnWhere%20price%20%24%20_%7Bi%2Cj%7D%20%24%20is%20an%20integer%2C%20the%20price%20of%20the%20_i_th%20stock%20at%20time%20_j_.%5Cn%5CnOutput%5Cn%5CnFor%20each%20test%20case%2C%20a%20single%20line%20containing%20%5C%22Case%20%23X%3A%20Y%5C%22%2C%20where%20_X_%20is%20the%20number%20of%20the%20test-case%20%281-indexed%29%20and%20_Y_%20is%20the%20minimum%20number%20of%20overlaid%20charts%20needed%20to%20show%20the%20prices%20of%20all%20of%20the%20stocks.%5Cn%5CnLimits%5Cn%5Cn1%20T%202%20k%200%5Cn%5Cn1%20n%5Cn%5CnSample%5Cn%5Cn%20%20%20%5CnInput%20%20%20%5Cn%20%20%20%20%5CnOutput%20%20%20%5Cn%20%20%60%203%3Cbr%3E%3C%5C%2Fbr%3E%203%204%3Cbr%3E%3C%5C%2Fbr%3E%201%202%203%204%3Cbr%3E%3C%5C%2Fbr%3E%202%203%204%206%3Cbr%3E%3C%5C%2Fbr%3E%206%205%204%203%3Cbr%3E%3C%5C%2Fbr%3E%203%203%3Cbr%3E%3C%5C%2Fbr%3E%205%205%205%3Cbr%3E%3C%5C%2Fbr%3E%204%204%206%3Cbr%3E%3C%5C%2Fbr%3E%204%205%204%3Cbr%3E%3C%5C%2Fbr%3E%205%202%3Cbr%3E%3C%5C%2Fbr%3E%201%201%3Cbr%3E%3C%5C%2Fbr%3E%202%202%3Cbr%3E%3C%5C%2Fbr%3E%205%204%3Cbr%3E%3C%5C%2Fbr%3E%204%204%3Cbr%3E%3C%5C%2Fbr%3E%204%201%3Cbr%3E%3C%5C%2Fbr%3E%60%20%60%20Case%20%231%3A%202%3Cbr%3E%3C%5C%2Fbr%3E%20Case%20%232%3A%203%3Cbr%3E%3C%5C%2Fbr%3E%20Case%20%233%3A%202%60%22%2C%22inputFormat%22%3A%22%22%2C%22outputFormat%22%3A%22%22%2C%22samples%22%3A%5B%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B239%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F7556%22%2C%22id%22%3A%227556%22%7D%2C%22translation%22%3A%22%2A%2A%5Cu4e00%5Cu53e5%5Cu8bdd%5Cu9898%5Cu610f%2A%2A%5Cr%5Cn%5Cr%5Cn%5Cu7ed9%5Cu51fa%24N%24%5Cu6761%2A%2A%5Cu6298%5Cu7ebf%5Cu6bb5%2A%2A%5Cuff0c%5Cu6c42%5Cu51fa%5Cu6700%5Cu5c11%5Cu5206%5Cu591a%5Cu5c11%5Cu7ec4%5Cu4f7f%5Cu5f97%5Cu6bcf%5Cu7ec4%5Cu7684%5Cu6298%5Cu7ebf%5Cu6bb5%5Cu90fd%5Cu4e0d%5Cu4e92%5Cu76f8%5Cu76f8%5Cu4ea4%5Cu3002%5Cr%5Cn%5Cr%5Cn%241%20%5C%5Cle%20T%20%5C%5Cle%20100%24%5Cuff0c%242%20%5C%5Cle%20k%20%5C%5Cle%2025%24%5Cuff0c%240%20%5C%5Cle%20price_i%20%5C%5Cle%201000000%24%5Cuff0c%241%20%5C%5Cle%20n%20%5C%5Cle%2016%24%5Cr%5Cn%5Cr%5Cn%2A%2A%5Cu8f93%5Cu5165%5Cu683c%5Cu5f0f%2A%2A%5Cr%5Cn%5Cr%5Cn%5Cu7b2c%5Cu4e00%5Cu884c%5Cu7ed9%5Cu51fa%5Cu6570%5Cu636e%5Cu603b%5Cu7ec4%5Cu6570%24T%24%5Cu3002%5Cr%5Cn%5Cr%5Cn%5Cu5bf9%5Cu4e8e%5Cu6bcf%5Cu7ec4%5Cu6570%5Cu636e%5Cuff0c%5Cu9996%5Cu5148%5Cu7ed9%5Cu51fa%24n%24%5Cu548c%24k%24%5Cuff0c%5Cu8868%5Cu793a%5Cu6709%24n%24%5Cu6761%5Cu6298%5Cu7ebf%5Cu6bb5%5Cuff0c%5Cu7136%5Cu540e%5Cu4ee5%5Cu4e0b%24n%24%5Cu884c%5Cuff0c%5Cu6bcf%5Cu884c%24k%24%5Cu4e2a%5Cu6570%28%24price_1%2Cprice_2%2C...%2Cprice_k%24%29%5Cuff0c%5Cu8868%5Cu793a%5Cu8be5%5Cu6298%5Cu7ebf%5Cu6a2a%5Cu5750%5Cu6807%5Cu4e3a%241%2C2%2C...%2Ck%24%5Cu65f6%5Cu7684%5Cu7eb5%5Cu5750%5Cu6807%5Cu7684%5Cu503c%5Cu3002%5Cr%5Cn%5Cr%5Cn%2A%2A%5Cu8f93%5Cu51fa%5Cu683c%5Cu5f0f%2A%2A%5Cr%5Cn%5Cr%5Cn%5Cu5bf9%5Cu4e8e%5Cu6bcf%5Cu7ec4%5Cu6570%5Cu636e%5Cuff0c%5Cu8f93%5Cu51fa%5Cu6700%5Cu5c11%5Cu7684%5Cu5206%5Cu7ec4%5Cu6570%5Cu3002%5Cr%5Cn%5Cr%5Cn%2A%2A%5Cu6837%5Cu4f8b%5Cu8f93%5Cu5165%2A%2A%5Cr%5Cn%60%60%60%5Cr%5Cn3%5Cr%5Cn3%204%5Cr%5Cn1%202%203%204%5Cr%5Cn2%203%204%206%5Cr%5Cn6%205%204%203%5Cr%5Cn3%203%5Cr%5Cn5%205%205%5Cr%5Cn4%204%206%5Cr%5Cn4%205%204%5Cr%5Cn5%202%5Cr%5Cn1%201%5Cr%5Cn2%202%5Cr%5Cn5%204%5Cr%5Cn4%204%5Cr%5Cn4%201%5Cr%5Cn%60%60%60%5Cr%5Cn%5Cr%5Cn%2A%2A%5Cu6837%5Cu4f8b%5Cu8f93%5Cu51fa%2A%2A%5Cr%5Cn%60%60%60%5Cr%5CnCase%20%231%3A%202%5Cr%5CnCase%20%232%3A%203%5Cr%5CnCase%20%233%3A%202%5Cr%5Cn%60%60%60%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A10%2C%22totalAccepted%22%3A2%2C%22pid%22%3A%22SP7556%22%2C%22title%22%3A%22HASTOCK%20-%20B%20-%20Stock%20Charts%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22HASTOCK%20-%20B%20-%20Stock%20Charts%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1573363392;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>HASTOCK - B - Stock Charts</h1>
<h2>题意翻译</h2>
<div>**一句话题意**
给出$N$条**折线段**，求出最少分多少组使得每组的折线段都不互相相交。
$1 \le T \le 100$，$2 \le k \le 25$，$0 \le price_i \le 1000000$，$1 \le n \le 16$
**输入格式**
第一行给出数据总组数$T$。
对于每组数据，首先给出$n$和$k$，表示有$n$条折线段，然后以下$n$行，每行$k$个数($price_1,price_2,...,price_k$)，表示该折线横坐标为$1,2,...,k$时的纵坐标的值。
**输出格式**
对于每组数据，输出最少的分组数。
**样例输入**
```
3
3 4
1 2 3 4
2 3 4 6
6 5 4 3
3 3
5 5 5
4 4 6
4 5 4
5 2
1 1
2 2
5 4
4 4
4 1
```
**样例输出**
```
Case #1: 2
Case #2: 3
Case #3: 2
```</div>
<h2>题目描述</h2>
<div>**B - Stock Charts**
You're in the middle of writing your newspaper's end-of-year economics summary, and you've decided that you want to show a number of charts to demonstrate how different stocks have performed over the course of the last year. You've already decided that you want to show the price of **n** different stocks, all at the same **k** points of the year.
A _simple chart_ of one stock's price would draw lines between the points (0, price $ _{0} $ ), (1, price $ _{1} $ ), ... , (k-1, price $ _{k-1} $ ), where price $ _{i} $ is the price of the stock at the _i_th point in time.
In order to save space, you have invented the concept of an _overlaid chart_. An overlaid chart is the combination of one or more simple charts, and shows the prices of multiple stocks (simply drawing a line for each one). In order to avoid confusion between the stocks shown in a chart, the lines in an overlaid chart may not cross or touch.
Given a list of _n_ stocks' prices at each of _k_ time points, determine the minimum number of overlaid charts you need to show all of the stocks' prices.
Input
The first line of input will contain a single integer **T**, the number of test cases. After this will follow **T** test cases on different lines, each of the form:
```
n k
price0,0 price0,1 ... price0,k-1
price1,0 price1,1 ... price1,k-1
...
pricen-1,0 pricen-1,1 ... pricen-1,k-1
```
Where price $ _{i,j} $ is an integer, the price of the _i_th stock at time _j_.
Output
For each test case, a single line containing "Case #X: Y", where _X_ is the number of the test-case (1-indexed) and _Y_ is the minimum number of overlaid charts needed to show the prices of all of the stocks.
Limits
1 T 2 k 0
1 n
Sample
Input
Output
` 3<br></br> 3 4<br></br> 1 2 3 4<br></br> 2 3 4 6<br></br> 6 5 4 3<br></br> 3 3<br></br> 5 5 5<br></br> 4 4 6<br></br> 4 5 4<br></br> 5 2<br></br> 1 1<br></br> 2 2<br></br> 5 4<br></br> 4 4<br></br> 4 1<br></br>` ` Case #1: 2<br></br> Case #2: 3<br></br> Case #3: 2`</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div></div>
<h3>输出格式</h3>
<br />
<div></div>
<h2>输入输出样例</h2>
<i>暂无测试点</i>
</article>
</div>
</div>
</body>
</html>
