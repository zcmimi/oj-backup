<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>JTRIP - Johns Trip - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573450159:pMXWywn+PpzJCWTAc3BINtkzuD/FbDEYnvz89x+62F8=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22Little%20Johnny%20has%20got%20a%20new%20car.%20He%20decided%20to%20drive%20around%20the%20town%20to%20visit%20his%20friends.%20Johnny%20wanted%20to%20visit%20all%20his%20friends%2C%20but%20there%20was%20many%20of%20them.%20In%20each%20street%20he%20had%20one%20friend.%20He%20started%20thinking%20how%20to%20make%20his%20trip%20as%20short%20as%20possible.%20Very%20soon%20he%20realized%20that%20the%20best%20way%20to%20do%20it%20was%20to%20travel%20through%20each%20street%20of%20town%20only%20once.%20Naturally%2C%20he%20wanted%20to%20finish%20his%20trip%20at%20the%20same%20place%20he%20started%2C%20at%20his%20parents%27%20house.%5Cn%5CnThe%20streets%20in%20Johnny%27s%20town%20were%20named%20by%20integer%20numbers%20from%201%20to%20_n_%2C%20_n_%20%3C%201995.%20The%20junctions%20were%20independently%20named%20by%20integer%20numbers%20from%201%20to%20_m_%2C%20%21%5Btex2html_wrap_inline32%5D%28http%3A%5C%2F%5C%2Fuva.onlinejudge.org%5C%2Fexternal%5C%2F3%5C%2F302img1.gif%29%20.%20All%20junctions%20in%20the%20town%20had%20different%20numbers.%20Each%20street%20was%20connecting%20exactly%20two%20%28not%20necessarily%20different%29%20junctions.%20No%20two%20streets%20in%20the%20town%20had%20the%20same%20number.%20He%20immediately%20started%20to%20plan%20his%20round%20trip.%20If%20there%20was%20more%20than%20one%20such%20round%20trip%2C%20he%20would%20have%20chosen%20the%20one%20which%2C%20when%20written%20down%20as%20a%20sequence%20of%20street%20numbers%20is%20lexicographically%20the%20smallest.%5Cn%5CnBut%20Johnny%20was%20not%20able%20to%20find%20even%20one%20such%20round%20trip.%20Help%20Johnny%20and%20write%20a%20program%20which%20finds%20the%20desired%20shortest%20round%20trip.%20If%20the%20round%20trip%20does%20not%20exist%20the%20program%20should%20write%20a%20message.%20Assume%20that%20Johnny%20lives%20at%20the%20junction%20ending%20the%201st%20street%20input%20with%20smaller%20number.%20All%20streets%20in%20the%20town%20are%20two%20way.%20There%20exists%20a%20way%20from%20each%20street%20to%20another%20street%20in%20the%20town.%20The%20streets%20in%20the%20town%20are%20very%20narrow%20and%20there%20is%20no%20possibility%20to%20turn%20back%20the%20car%20once%20he%20is%20in%20the%20street.%5Cn%5Cn%20%20%20%5Cn%3Ca%20name%3D%5C%22SECTION0001001000000000000000%5C%22%3EInput%3C%5C%2Fa%3E%5Cn-------------------------------------------------%5Cn%5CnInput%20file%20consists%20of%20several%20blocks.%20Each%20block%20describes%20one%20town.%20Each%20line%20in%20the%20block%20contains%20three%20integers%20_x_%2C%20_y_%2C%20_z_%2C%20where%20_x_%20%3E%200%20and%20_y_%20%3E%200%20are%20the%20numbers%20of%20junctions%20which%20are%20connected%20by%20the%20street%20number%20_z_.%20The%20end%20of%20the%20block%20is%20marked%20by%20the%20line%20containing%20_x_%20%3D%20_y_%20%3D%200.%20At%20the%20end%20of%20the%20input%20file%20there%20is%20an%20empty%20block%2C%20_x_%20%3D%20_y_%20%3D%200.%5Cn%5Cn%20%20%20%5Cn%3Ca%20name%3D%5C%22SECTION0001002000000000000000%5C%22%3EOutput%3C%5C%2Fa%3E%5Cn--------------------------------------------------%5Cn%5CnThe%20output%20file%20consists%20of%202%20line%20blocks%20corresponding%20to%20the%20blocks%20of%20the%20input%20file.%20The%20first%20line%20of%20each%20block%20contains%20the%20sequence%20of%20street%20numbers%20%28single%20members%20of%20the%20sequence%20are%20separated%20by%20space%29%20describing%20Johnny%27s%20round%20trip.%20If%20the%20round%20trip%20cannot%20be%20found%20the%20corresponding%20output%20block%20contains%20the%20message%20%60%60Round%20trip%20does%20not%20exist.%27%27.%20The%20second%20line%20of%20each%20block%20is%20empty.%5Cn%5Cn%20%20%20%5Cn%3Ca%20name%3D%5C%22SECTION0001003000000000000000%5C%22%3ESample%20Input%3C%5C%2Fa%3E%5Cn--------------------------------------------------------%5Cn%5Cn%20%60%60%60%5Cn1%202%201%5Cn2%203%202%5Cn3%201%206%5Cn1%202%205%5Cn2%203%203%5Cn3%201%204%5Cn0%200%5Cn1%202%201%5Cn2%203%202%5Cn1%203%203%5Cn2%204%204%5Cn0%200%5Cn0%200%5Cn%60%60%60%5Cn%20%20%20%5Cn%3Ca%20name%3D%5C%22SECTION0001004000000000000000%5C%22%3ESample%20Output%3C%5C%2Fa%3E%5Cn---------------------------------------------------------%5Cn%5Cn%20%60%60%60%5Cn1%202%203%205%204%206%5Cn%5CnRound%20trip%20does%20not%20exist.%5Cn%60%60%60%22%2C%22inputFormat%22%3A%22%22%2C%22outputFormat%22%3A%22%22%2C%22samples%22%3A%5B%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B253%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F9528%22%2C%22id%22%3A%229528%22%7D%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Atrue%2C%22totalSubmit%22%3A4%2C%22totalAccepted%22%3A1%2C%22pid%22%3A%22SP9528%22%2C%22title%22%3A%22JTRIP%20-%20Johns%20Trip%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22JTRIP%20-%20Johns%20Trip%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>JTRIP - Johns Trip</h1>
<h2>题目描述</h2>
<div>Little Johnny has got a new car. He decided to drive around the town to visit his friends. Johnny wanted to visit all his friends, but there was many of them. In each street he had one friend. He started thinking how to make his trip as short as possible. Very soon he realized that the best way to do it was to travel through each street of town only once. Naturally, he wanted to finish his trip at the same place he started, at his parents' house.
The streets in Johnny's town were named by integer numbers from 1 to _n_, _n_ < 1995. The junctions were independently named by integer numbers from 1 to _m_, ![tex2html_wrap_inline32](http://uva.onlinejudge.org/external/3/302img1.gif) . All junctions in the town had different numbers. Each street was connecting exactly two (not necessarily different) junctions. No two streets in the town had the same number. He immediately started to plan his round trip. If there was more than one such round trip, he would have chosen the one which, when written down as a sequence of street numbers is lexicographically the smallest.
But Johnny was not able to find even one such round trip. Help Johnny and write a program which finds the desired shortest round trip. If the round trip does not exist the program should write a message. Assume that Johnny lives at the junction ending the 1st street input with smaller number. All streets in the town are two way. There exists a way from each street to another street in the town. The streets in the town are very narrow and there is no possibility to turn back the car once he is in the street.
<a name="SECTION0001001000000000000000">Input</a>
-------------------------------------------------
Input file consists of several blocks. Each block describes one town. Each line in the block contains three integers _x_, _y_, _z_, where _x_ > 0 and _y_ > 0 are the numbers of junctions which are connected by the street number _z_. The end of the block is marked by the line containing _x_ = _y_ = 0. At the end of the input file there is an empty block, _x_ = _y_ = 0.
<a name="SECTION0001002000000000000000">Output</a>
--------------------------------------------------
The output file consists of 2 line blocks corresponding to the blocks of the input file. The first line of each block contains the sequence of street numbers (single members of the sequence are separated by space) describing Johnny's round trip. If the round trip cannot be found the corresponding output block contains the message ``Round trip does not exist.''. The second line of each block is empty.
<a name="SECTION0001003000000000000000">Sample Input</a>
--------------------------------------------------------
```
1 2 1
2 3 2
3 1 6
1 2 5
2 3 3
3 1 4
0 0
1 2 1
2 3 2
1 3 3
2 4 4
0 0
0 0
```
<a name="SECTION0001004000000000000000">Sample Output</a>
---------------------------------------------------------
```
1 2 3 5 4 6
Round trip does not exist.
```</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div></div>
<h3>输出格式</h3>
<br />
<div></div>
<h2>输入输出样例</h2>
<i>暂无测试点</i>
</article>
</div>
</div>
</body>
</html>
