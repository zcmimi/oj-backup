<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>DFLOOR - Dance Floor - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573449526:KStAJM0Qn2ICBaUryKRsY30WoNYr1ovqwEeJJ522djU=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3A%22%22%2C%22description%22%3A%22%20You%20recently%20watched%20a%20video%20clip%20in%20which%20a%20singer%20danced%20on%20a%20grid%20of%20colourful%20tiles%20enlightened%20from%20below.%20Each%20step%20on%20a%20tile%20flipped%20the%20tile%27s%20state%2C%20i.e.%20light%20on%20or%20off.%20In%20addition%20to%20that%2C%20all%20the%20neighbouring%20tiles%20flipped%20their%20states%2C%20too.%20%20%20%5Cn%20%20%5Cn%20In%20this%20task%2C%20you%20are%20supposed%20to%20come%20up%20with%20a%20short%20program%20that%20decides%20if%20it%20is%20possible%20for%20the%20singer%20to%20switch%20on%20the%20lights%20of%20all%20the%20tiles%2C%20provided%20that%20he%20dances%20on%20the%20appropriate%20tiles.%20%20%20%5Cn%20%20%5Cn%20The%20dance%20floor%20has%20rectangular%20shape.%20At%20the%20beginning%2C%20some%20of%20the%20tiles%20are%20already%20alight.%20Your%20program%20may%20temporarily%20switch%20off%20some%20tiles%2C%20if%20it%20deems%20that%20necessary%20to%20reach%20its%20goal.%20Stepping%20on%20a%20tile%20toggles%20its%20own%20state%20as%20well%20as%20the%20states%20of%20the%20four%20neighbouring%20tiles%20directly%20above%2C%20below%2C%20to%20the%20left%20and%20to%20the%20right.%20Of%20course%2C%20in%20the%20case%20of%20a%20peripheral%20tile%2C%20there%20will%20be%20only%20three%20or%20two%20neighbouring%20tiles.%20%20%20%5Cn%20%20%5Cn%20Here%20comes%20an%20example%3A%20%20%20%5Cn%21%5B%5D%28https%3A%5C%2F%5C%2Fcdn.luogu.com.cn%5C%2Fupload%5C%2Fvjudge_pic%5C%2FSP98%5C%2Fbf44d1fec142d6d814944a04fb48942c08c4d265.png%29%20%20%5Cn%20If%20the%20dancer%20steps%20on%20the%20tile%20indicated%20by%20the%20brown%20shoe%2C%20all%20the%20tiles%20within%20the%20white%20area%20change%20their%20states.%20The%20resulting%20dance%20floor%20is%20depicted%20on%20the%20right.%20%20%20%5Cn%20%20%5Cn%20You%20may%20assume%20that%20the%20singer%20is%20fit%20enough%20to%20jump%20from%20any%20tile%20to%20any%20other%20tile%2C%20even%20if%20the%20destination%20tile%20lies%20on%20the%20opposite%20side%20of%20the%20dance%20floor.%22%2C%22inputFormat%22%3A%22%20There%20are%20several%20test%20cases.%20The%20first%20line%20of%20each%20case%20contains%20two%20integer%20numbers%20_x_%20and%20_y_%2C%20indicating%20the%20width%20and%20the%20height%20of%20the%20dance%20floor%20grid.%20The%20numbers%20are%20separated%20by%20a%20single%20space%20and%20satisfy%203%20%5Cu2264%20_x_%2C_y_%20%5Cu2264%2015.%20%20%20%5Cn%20%20%5Cn%20The%20following%20_y_%20lines%20containing%20_x_characters%20each%20describe%20the%20initial%20on%5C%2Foff%20states%20of%20the%20tiles.%20A%20zero%20means%20%5C%22the%20tile%20is%20switched%20off%5C%22%2C%20a%20one%20digit%20means%20%5C%22the%20tile%20is%20alight%5C%22.%20%20%20%5Cn%20%20%5CnInput%20ends%20with%200%200.%22%2C%22outputFormat%22%3A%22%20For%20each%20test%20case%20your%20program%20should%20output%20the%20number%20of%20steps%20needed%20to%20switch%20all%20the%20lights%20on%2C%20followed%20by%20exactly%20that%20many%20lines%20with%20two%20space-separated%20numbers%20_i_%20and%20_j_.%20Each%20individual%20line%20commands%20the%20singer%20to%20step%20on%20the%20_i_-th%20tile%20of%20the%20_j_-th%20row.%20Starting%20with%20the%20situation%20of%20the%20input%20file%20and%20executing%20all%20the%20commands%20in%20the%20output%20file%2C%20all%20the%20tiles%20must%20be%20switched%20on.%20%20%20%5Cn%20%20%5Cn%20If%20more%20than%20one%20solution%20exist%2C%20your%20program%20should%20output%20an%20arbitrary%20one%20of%20them.%20If%2C%20on%20the%20other%20hand%2C%20no%20solution%20exists%2C%20your%20program%20should%20write%20the%20number%20%5C%22-1%5C%22.%22%2C%22samples%22%3A%5B%5B%224%203%5Cn0111%5Cn1010%5Cn1000%5Cn%5Cn0%200%22%2C%223%5Cn1%202%5Cn1%203%5Cn4%203%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B2400%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F98%22%2C%22id%22%3A%2298%22%7D%2C%22translation%22%3A%22%5Cu6709%5Cu4e00%5Cu4e2a%5Cu77e9%5Cu5f62%5Cu821e%5Cu6c60%5Cuff0c%5Cu821e%5Cu6c60%5Cu91cc%5Cu7684%5Cu74f7%5Cu7816%5Cu6709%5Cu7684%5Cu6b63%5Cu9762%5Cu671d%5Cu4e0a%5Cuff0c%5Cu6709%5Cu7684%5Cu53cd%5Cu9762%5Cu671d%5Cu4e0a%5Cu3002%5Cu5f53%5Cu821e%5Cu8005%5Cu8e29%5Cu5230%5Cu74f7%5Cu7816%5Cu65f6%5Cuff0c%5Cu8be5%5Cu74f7%5Cu7816%5Cu53ca%5Cu4e0e%5Cu5176%5Cu76f8%5Cu90bb%5Cu7684%5Cu6240%5Cu6709%5Cu74f7%5Cu7816%5Cu5168%5Cu90e8%5Cu7ffb%5Cu8f6c%5Cu3002%5Cn%5Cn%21%5B%5D%28https%3A%5C%2F%5C%2Fcdn.luogu.org%5C%2Fupload%5C%2Fpic%5C%2F15017.png%29%5Cn%5Cn%5Cuff08%5Cu5982%5Cu56fe%5Cuff0c%5Cu5f53%5Cu821e%5Cu8005%5Cu8e29%5Cu5230%5Cu74f7%5Cu7816%5Cuff083%2C2%5Cuff09%5Cu65f6%5Cuff0c%5Cu5b83%5Cu81ea%5Cu8eab%5Cu4e0e%5Cu5176%5Cu76f8%5Cu90bb%5Cu7684%5Cu6240%5Cu6709%5Cu74f7%5Cu7816%5Cu7ffb%5Cu8f6c%5Cuff09%5Cn%5Cn%5Cu73b0%5Cu5728%5Cu8bf7%5Cu4f60%5Cu7f16%5Cu5199%5Cu7a0b%5Cu5e8f%5Cuff0c%5Cu5c1d%5Cu8bd5%5Cu8ba9%5Cu6240%5Cu6709%5Cu74f7%5Cu7816%5Cu6b63%5Cu9762%5Cu671d%5Cu4e0a%5Cu3002%5Cn%5Cn%5Cu8f93%5Cu5165%5Cuff1a%5Cu591a%5Cu7ec4%5Cu6570%5Cu636e%5Cuff0c%5Cu7b2c%5Cu4e00%5Cu884c%5Cu4e3a%5Cu821e%5Cu6c60%5Cu7684%5Cu957f%5Cu548c%5Cu5bbdx%5Cuff0cy%5Cuff0c%5Cu63a5%5Cu4e0b%5Cu6765%5Cu51e0%5Cu884c%5Cu63cf%5Cu8ff0%5Cu821e%5Cu6c60%5Cu7684%5Cu5f62%5Cu72b6%5Cu30020%5Cu8868%5Cu793a%5Cu53cd%5Cu9762%5Cu671d%5Cu4e0a%5Cuff0c1%5Cu8868%5Cu793a%5Cu6b63%5Cu9762%5Cu671d%5Cu4e0a%5Cuff083%3C%3Dx%2Cy%3C%3D15%5Cuff09%5Cu5f53%5Cu8bfb%5Cu51650%200%5Cu65f6%5Cu7ed3%5Cu675f%5Cn%5Cn%5Cu8f93%5Cu51fa%5Cuff1a%5Cu7b2c%5Cu4e00%5Cu884c%5Cu6700%5Cu5c11%5Cu6b65%5Cu6570%5Cuff08%5Cu591a%5Cu79cd%5Cu60c5%5Cu51b5%5Cu8f93%5Cu51fa%5Cu4e00%5Cu79cd%5Cuff0c%5Cu65e0%5Cu89e3%5Cu8f93%5Cu51fa-1%5Cuff09%5Cuff0c%5Cu63a5%5Cu4e0b%5Cu6765%5Cu4e3a%5Cu6bcf%5Cu6b21%5Cu7ffb%5Cu8f6c%5Cu7684%5Cu5750%5Cu6807%5Cu3002%5Cn%5Cn%5Cu611f%5Cu8c22%40____233____%20%20%5Cu63d0%5Cu4f9b%5Cu7684%5Cu7ffb%5Cu8bd1%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A1%2C%22totalAccepted%22%3A0%2C%22pid%22%3A%22SP98%22%2C%22title%22%3A%22DFLOOR%20-%20Dance%20Floor%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A35480%2C%22title%22%3A%22%5Cu7ffb%5Cu8bd1%22%2C%22forum%22%3A%7B%22id%22%3A12932%2C%22name%22%3A%22SP98%20DFLOOR%20-%20Dance%20Floor%22%2C%22slug%22%3A%22SP98%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22DFLOOR%20-%20Dance%20Floor%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>DFLOOR - Dance Floor</h1>
<h2>题意翻译</h2>
<div>有一个矩形舞池，舞池里的瓷砖有的正面朝上，有的反面朝上。当舞者踩到瓷砖时，该瓷砖及与其相邻的所有瓷砖全部翻转。
![](https://cdn.luogu.org/upload/pic/15017.png)
（如图，当舞者踩到瓷砖（3,2）时，它自身与其相邻的所有瓷砖翻转）
现在请你编写程序，尝试让所有瓷砖正面朝上。
输入：多组数据，第一行为舞池的长和宽x，y，接下来几行描述舞池的形状。0表示反面朝上，1表示正面朝上（3<=x,y<=15）当读入0 0时结束
输出：第一行最少步数（多种情况输出一种，无解输出-1），接下来为每次翻转的坐标。
感谢@____233____ 提供的翻译</div>
<h2>题目描述</h2>
<div> You recently watched a video clip in which a singer danced on a grid of colourful tiles enlightened from below. Each step on a tile flipped the tile's state, i.e. light on or off. In addition to that, all the neighbouring tiles flipped their states, too.
In this task, you are supposed to come up with a short program that decides if it is possible for the singer to switch on the lights of all the tiles, provided that he dances on the appropriate tiles.
The dance floor has rectangular shape. At the beginning, some of the tiles are already alight. Your program may temporarily switch off some tiles, if it deems that necessary to reach its goal. Stepping on a tile toggles its own state as well as the states of the four neighbouring tiles directly above, below, to the left and to the right. Of course, in the case of a peripheral tile, there will be only three or two neighbouring tiles.
Here comes an example:
![](https://cdn.luogu.com.cn/upload/vjudge_pic/SP98/bf44d1fec142d6d814944a04fb48942c08c4d265.png)
If the dancer steps on the tile indicated by the brown shoe, all the tiles within the white area change their states. The resulting dance floor is depicted on the right.
You may assume that the singer is fit enough to jump from any tile to any other tile, even if the destination tile lies on the opposite side of the dance floor.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div> There are several test cases. The first line of each case contains two integer numbers _x_ and _y_, indicating the width and the height of the dance floor grid. The numbers are separated by a single space and satisfy 3 ≤ _x_,_y_ ≤ 15.
The following _y_ lines containing _x_characters each describe the initial on/off states of the tiles. A zero means "the tile is switched off", a one digit means "the tile is alight".
Input ends with 0 0.</div>
<h3>输出格式</h3>
<br />
<div> For each test case your program should output the number of steps needed to switch all the lights on, followed by exactly that many lines with two space-separated numbers _i_ and _j_. Each individual line commands the singer to step on the _i_-th tile of the _j_-th row. Starting with the situation of the input file and executing all the commands in the output file, all the tiles must be switched on.
If more than one solution exist, your program should output an arbitrary one of them. If, on the other hand, no solution exists, your program should write the number "-1".</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>4 3
0111
1010
1000

0 0</code></pre>
<h3>输出样例 #1</h3>
<pre><code>3
1 2
1 3
4 3</code></pre>
</article>
</div>
</div>
</body>
</html>
