<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>TOURIST - Tourist - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573449795:HuZI8PavSRDE0mwPEKlXQ3lO6dE8yWF/8JG3t9477OE=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22A%20lazy%20tourist%20wants%20to%20visit%20as%20many%20interesting%20locations%20in%20a%20city%20as%20possible%20without%20going%20one%20step%20further%20than%20necessary.%20Starting%20from%20his%20hotel%2C%20located%20in%20the%20north-west%20corner%20of%20city%2C%20he%20intends%20to%20take%20a%20walk%20to%20the%20south-east%20corner%20of%20the%20city%20and%20then%20walk%20back.%20When%20walking%20to%20the%20south-east%20corner%2C%20he%20will%20only%20walk%20east%20or%20south%2C%20and%20when%20walking%20back%20to%20the%20north-west%20corner%2C%20he%20will%20only%20walk%20north%20or%20west.%20After%20studying%20the%20city%20map%20he%20realizes%20that%20the%20task%20is%20not%20so%20simple%20because%20some%20areas%20are%20blocked.%20Therefore%20he%20has%20kindly%20asked%20you%20to%20write%20a%20program%20to%20solve%20his%20problem.%20%20%5Cn%20%20%5Cn%20Given%20the%20city%20map%20%28a%202D%20grid%29%20where%20the%20interesting%20locations%20and%20blocked%20areas%20are%20marked%2C%20determine%20the%20maximum%20number%20of%20interesting%20locations%20he%20can%20visit.%20Locations%20visited%20twice%20are%20only%20counted%20once.%22%2C%22inputFormat%22%3A%22The%20first%20line%20in%20the%20input%20contains%20the%20number%20of%20test%20cases%20%28at%20most%2020%29.%20Then%20follow%20the%20cases.%20Each%20case%20starts%20with%20a%20line%20containing%20two%20integers%2C%20W%20and%20H%20%282%20%5Cu2264%20W%20%2C%20H%20%5Cu2264%20100%29%2C%20the%20width%20and%20the%20height%20of%20the%20city%20map.%20Then%20follow%20H%20lines%2C%20each%20containing%20a%20string%20with%20W%20characters%20with%20the%20following%20meaning%3A%20%20%5Cn%20%20%5Cn%20.%20Walkable%20area%20%20%5Cn%20%5C%5C%2A%20Interesting%20location%20%28also%20walkable%20area%29%20%20%5Cn%20%23%20Blocked%20area%20%20%5Cn%20%20%5Cn%20You%20may%20assume%20that%20the%20upper-left%20corner%20%28start%20and%20end%20point%29%20and%20lower-right%20corner%20%28turning%20point%29%20are%20walkable%2C%20and%20that%20a%20walkable%20path%20of%20length%20H%20%2B%20W%20%5Cu2212%202%20exists%20between%20them.%22%2C%22outputFormat%22%3A%22For%20each%20test%20case%2C%20output%20a%20line%20containing%20a%20single%20integer%3A%20the%20maximum%20number%20of%20interesting%20locations%20the%20lazy%20tourist%20can%20visit.%22%2C%22samples%22%3A%5B%5B%222%5Cr%5Cn9%207%5Cr%5Cn%2A........%5Cr%5Cn.....%2A%2A%23.%5Cr%5Cn..%2A%2A...%23%2A%5Cr%5Cn..%23%23%23%23%2A%23.%5Cr%5Cn.%2A.%23%2A.%2A%23.%5Cr%5Cn...%23%2A%2A...%5Cr%5Cn%2A........%5Cr%5Cn5%205%5Cr%5Cn.%2A.%2A.%5Cr%5Cn%2A%23%23%23.%5Cr%5Cn%2A.%2A.%2A%5Cr%5Cn.%23%23%23%2A%5Cr%5Cn.%2A.%2A.%22%2C%227%5Cr%5Cn8%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B370%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F3380%22%2C%22id%22%3A%223380%22%7D%2C%22translation%22%3A%22%5Cu4e00%5Cu4e2a%5Cu5de8%5Cu4f6ctourist%5Cu60f3%5Cu5728%5Cu4e00%5Cu4e2a%5Cu57ce%5Cu5e02%5Cu91cc%5Cu5c3d%5Cu53ef%5Cu80fd%5Cu591a%5Cu7684%5Cu6e38%5Cu89c8%5Cu4e00%5Cu4e9b%5Cu6709%5Cu8da3%5Cu7684%5Cu5730%5Cu65b9%5Cuff0c%5Cu800c%5Cu4e0d%5Cu5fc5%5Cu8d70%5Cu4e0d%5Cu5fc5%5Cu8981%5Cu7684%5Cu8def%5Cu3002%5Cu4ece%5Cu57ce%5Cu5e02%5Cu897f%5Cu5317%5Cu89d2%5Cu7684%5Cu9152%5Cu5e97%5Cu51fa%5Cu53d1%5Cuff0c%5Cu5230%5Cu57ce%5Cu5e02%5Cu4e1c%5Cu5357%5Cu89d2%5Cuff0c%5Cu7136%5Cu540e%5Cu518d%5Cu8fd4%5Cu56de%5Cu3002%2A%2A%5Cu5f53%5Cu4ed6%5Cu8d70%5Cu5230%5Cu4e1c%5Cu5357%5Cu89d2%5Cu65f6%5Cuff0c%5Cu4ed6%5Cu53ea%5Cu80fd%5Cu5f80%5Cu4e1c%5Cu6216%5Cu5f80%5Cu5357%5Cu8d70%5Cuff0c%5Cu5f53%5Cu4ed6%5Cu56de%5Cu5230%5Cu897f%5Cu5317%5Cu89d2%5Cu65f6%5Cuff0c%5Cu4ed6%5Cu53ea%5Cu80fd%5Cu5f80%5Cu5317%5Cu6216%5Cu5f80%5Cu897f%5Cu8d70%5Cu3002%2A%2A%5Cu5728%20_%5Cu8ba4%5Cu771f_%20%5Cu7814%5Cu7a76%5Cu4e86%5Cu5730%5Cu56fe%5Cu4e4b%5Cu540e%5Cuff0c%5Cu4ed6%5Cu610f%5Cu8bc6%5Cu5230%5Cu4efb%5Cu52a1%5Cu5e76%5Cu4e0d%5Cu90a3%5Cu4e48%5Cu7b80%5Cu5355%5Cuff0c%5Cu56e0%5Cu4e3a%5Cu6709%5Cu4e9b%5Cu5730%5Cu533a%5Cu88ab%5Cu5c01%5Cu9501%5Cu4e86%5Cu3002%5Cr%5Cn%5Cu56e0%5Cu6b64%5Cuff0c%5Cu4ed6%5Cu6073%5Cu8bf7%5Cu4f60%5Cu5199%5Cu4e00%5Cu4e2a%5Cu7a0b%5Cu5e8f%5Cu6765%5Cu89e3%5Cu51b3%5Cu4ed6%5Cu7684%5Cu95ee%5Cu9898%5Cu3002%5Cr%5Cn%5Cu6839%5Cu636e%5Cu57ce%5Cu5e02%5Cu5730%5Cu56fe%5Cuff08%5Cu4e00%5Cu4e2a%5Cu4e8c%5Cu7ef4map%5Cuff09%5Cuff0c%5Cu5728%5Cu5730%5Cu56fe%5Cu4e0a%5Cu6807%5Cu51fa%2A%2A%5Cu6709%5Cu8da3%2A%2A%5Cu7684%5Cu4f4d%5Cu7f6e%5Cu548c%2A%2A%5Cu5c01%5Cu9501%2A%2A%5Cu7684%5Cu533a%5Cu57df%5Cuff0c%5Cu786e%5Cu5b9a%5Cu4ed6%5Cu53ef%5Cu4ee5%5Cu8bbf%5Cu95ee%5Cu7684%5Cu611f%5Cu5174%5Cu8da3%5Cu7684%5Cu4f4d%5Cu7f6e%5Cu7684%5Cu6700%5Cu5927%5Cu6570%5Cu91cf%5Cu3002%2A%2A%5Cu4e24%5Cu6b21%5Cu8bbf%5Cu95ee%5Cu7684%5Cu5730%5Cu70b9%5Cu53ea%5Cu8ba1%5Cu7b97%5Cu4e00%5Cu6b21%5Cu3002%2A%2A%5Cr%5Cn%5Cu8f93%5Cu5165%5Cu4e2d%5Cu7684%5Cu7b2c%5Cu4e00%5Cu884c%5Cu5305%5Cu542b%5Cu6d4b%5Cu8bd5%5Cu7528%5Cu4f8b%5Cu7684%5Cu6570%5Cu91cf%5Cuff08%5Cu6700%5Cu591a20%5Cu4e2a%5Cuff09%5Cu3002%5Cr%5Cn%5Cu7136%5Cu540e%5Cu8ddf%5Cu7740%5Cu8fd9%5Cu4e9b%5Cu6837%5Cu4f8b%5Cu3002%5Cu6bcf%5Cu79cd%5Cu60c5%5Cu51b5%5Cu90fd%5Cu4ee5%5Cu5305%5Cu542b%5Cu4e24%5Cu4e2a%5Cu6574%5Cu6570%5Cu7684%5Cu884c%5Cu5f00%5Cu59cb%5Cuff0c%5Cu5373w%5Cu548ch%5Cuff082%5Cu2264w%5Cuff0ch%5Cu2264100%5Cuff09%5Cu8868%5Cu57ce%5Cu5e02%5Cu5730%5Cu56fe%5Cu7684%5Cu5bbd%5Cu5ea6%5Cu548c%5Cu9ad8%5Cu5ea6%5Cu3002%5Cr%5Cn%5Cu7136%5Cu540e%5Cu8ddf%5Cu968fH%5Cu884c%5Cuff0c%5Cu6bcf%5Cu884c%5Cu5305%5Cu542b%5Cu4e00%5Cu4e2a%5Cu5e26%5Cu6709W%5Cu5b57%5Cu7b26%5Cu7684%5Cu5b57%5Cu7b26%5Cu4e32%5Cuff0c%5Cu5176%5Cu542b%5Cu4e49%5Cu5982%5Cu4e0b%5Cuff1a%2A%2A%5Cu611f%5Cu5174%5Cu8da3%5Cu7684%5Cu4f4d%5Cu7f6e%5Cuff08%5Cu4e5f%5Cu662f%5Cu80fd%5Cu8d70%5Cu7684%5Cu533a%5Cu57df%5Cuff09%2A%2A%5Cr%5Cn%23%23%23%23%20%5Cu5c01%5Cu9501%5Cu533a%5Cuff1a%5Cr%5Cn%5Cu60a8%5Cu53ef%5Cu4ee5%5Cu5047%5Cu8bbe%5Cu5de6%5Cu4e0a%5Cu89d2%5Cuff08%5Cu8d77%5Cu70b9%5Cu548c%5Cu7ec8%5Cu70b9%5Cuff09%5Cu548c%5Cu53f3%5Cu4e0b%5Cu89d2%5Cuff08%5Cu62d0%5Cu70b9%5Cuff09%5Cu662f%5Cu53ef%5Cu884c%5Cu8d70%5Cu7684%5Cuff0c%5Cu5e76%5Cu4e14%5Cu5b83%5Cu4eec%5Cu4e4b%5Cu95f4%5Cu5b58%5Cu5728%5Cu957f%5Cu5ea6%5Cu4e3ah%2Bw-2%5Cu7684%5Cu53ef%5Cu884c%5Cu8d70%5Cu8def%5Cu5f84%5Cu3002%5Cr%5Cn%5Cu8f93%5Cu51fa%5Cu4e00%5Cu884c%5Cu5305%5Cu542b%5Cu4e00%5Cu4e2a%5Cu6574%5Cu6570%5Cuff1a%5Cu5de8%5Cu4f6c%5Cu53ef%5Cu4ee5%5Cu8bbf%5Cu95ee%5Cu7684%5Cu611f%5Cu5174%5Cu8da3%5Cu4f4d%5Cu7f6e%5Cu7684%5Cu6700%5Cu5927%5Cu6570%5Cu91cf%5Cu3002%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A0%2C%22totalAccepted%22%3A0%2C%22pid%22%3A%22SP3380%22%2C%22title%22%3A%22TOURIST%20-%20Tourist%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22TOURIST%20-%20Tourist%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>TOURIST - Tourist</h1>
<h2>题意翻译</h2>
<div>一个巨佬tourist想在一个城市里尽可能多的游览一些有趣的地方，而不必走不必要的路。从城市西北角的酒店出发，到城市东南角，然后再返回。**当他走到东南角时，他只能往东或往南走，当他回到西北角时，他只能往北或往西走。**在 _认真_ 研究了地图之后，他意识到任务并不那么简单，因为有些地区被封锁了。
因此，他恳请你写一个程序来解决他的问题。
根据城市地图（一个二维map），在地图上标出**有趣**的位置和**封锁**的区域，确定他可以访问的感兴趣的位置的最大数量。**两次访问的地点只计算一次。**
输入中的第一行包含测试用例的数量（最多20个）。
然后跟着这些样例。每种情况都以包含两个整数的行开始，即w和h（2≤w，h≤100）表城市地图的宽度和高度。
然后跟随H行，每行包含一个带有W字符的字符串，其含义如下：**感兴趣的位置（也是能走的区域）**
#### 封锁区：
您可以假设左上角（起点和终点）和右下角（拐点）是可行走的，并且它们之间存在长度为h+w-2的可行走路径。
输出一行包含一个整数：巨佬可以访问的感兴趣位置的最大数量。</div>
<h2>题目描述</h2>
<div>A lazy tourist wants to visit as many interesting locations in a city as possible without going one step further than necessary. Starting from his hotel, located in the north-west corner of city, he intends to take a walk to the south-east corner of the city and then walk back. When walking to the south-east corner, he will only walk east or south, and when walking back to the north-west corner, he will only walk north or west. After studying the city map he realizes that the task is not so simple because some areas are blocked. Therefore he has kindly asked you to write a program to solve his problem.
Given the city map (a 2D grid) where the interesting locations and blocked areas are marked, determine the maximum number of interesting locations he can visit. Locations visited twice are only counted once.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line in the input contains the number of test cases (at most 20). Then follow the cases. Each case starts with a line containing two integers, W and H (2 ≤ W , H ≤ 100), the width and the height of the city map. Then follow H lines, each containing a string with W characters with the following meaning:
. Walkable area
\* Interesting location (also walkable area)
# Blocked area
You may assume that the upper-left corner (start and end point) and lower-right corner (turning point) are walkable, and that a walkable path of length H + W − 2 exists between them.</div>
<h3>输出格式</h3>
<br />
<div>For each test case, output a line containing a single integer: the maximum number of interesting locations the lazy tourist can visit.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>2
9 7
*........
.....**#.
..**...#*
..####*#.
.*.#*.*#.
...#**...
*........
5 5
.*.*.
*###.
*.*.*
.###*
.*.*.</code></pre>
<h3>输出样例 #1</h3>
<pre><code>7
8</code></pre>
</article>
</div>
</div>
</body>
</html>
