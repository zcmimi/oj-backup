<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>PERMSG - Permutation Exponentiation - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573449781:UDhdMnZzpyICOAKuiFyOpLJiUgx9BG4wCl2Mm5/gLAc=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3Anull%2C%22description%22%3A%22Alice%2C%20a%20permutation%20aficionado%2C%20has%20thought%20up%20a%20permutation%20of%20%2A%2AN%2A%2A%20%281%20%3C%3D%20%2A%2AN%2A%2A%20%3C%3D%20100000%29%20integers%20in%20the%20range%20%5C%5C%5B0%2C%20%2A%2AN%2A%2A-1%5C%5C%5D%2C%20%2A%2AP%2A%2A.%20So%20impressed%20with%20herself%20she%20has%20told%20her%20friend%20Bob%20about%20%2A%2AP%2A%2A.%5Cn%5CnNormally%20Alice%20would%20call%20it%20a%20day%20after%20creating%20such%20an%20impressive%20permutation%20but%20today%20she%20decided%20that%20she%20wanted%20to%20raise%20%2A%2AP%2A%2A%20to%20the%20power%20%2A%2Ak%2A%2A%20%28a%20positive%20integer%29%20as%20well%21%20Unfortunately%2C%20after%20working%20on%20the%20problem%20for%20a%20while%20she%20gave%20up%20because%20it%20was%20taking%20too%20long.%20Not%20wanting%20her%20efforts%20to%20go%20to%20waste%20she%20once%20again%20tells%20Bob%20about%20all%20the%20elements%20she%20has%20determined%20so%20far.%20Unfortunately%2C%20she%20neglected%20to%20tell%20Bob%20the%20value%20%2A%2Ak%2A%2A.%5Cn%5CnBob%2C%20very%20interested%20in%20Alice%27s%20work%2C%20needs%20your%20help%20to%20try%20and%20determine%20any%20additional%20elements%20of%20%2A%2AP%2A%2A%5E%2A%2Ak%2A%2A.%20Bob%20is%20suspicious%20of%20Alice%27s%20work%20so%20he%20also%20asks%20you%20to%20check%20it%20for%20errors.%22%2C%22inputFormat%22%3A%22The%20first%20line%20of%20input%20contains%20%2A%2AN%2A%2A%20%281%20%3C%3D%20%2A%2AN%2A%2A%20%3C%3D%20100000%29%2C%20the%20number%20of%20elements%20in%20the%20permutation.%20The%20next%20line%20contains%20a%20permutation%20of%20the%20integers%200%20through%20%2A%2AN%2A%2A-1%20each%20separated%20by%20a%20space.%20The%20following%20line%20will%20contain%20the%20result%20of%20applying%20the%20permutation%20%2A%2Ak%2A%2A%20times%20with%20the%20exception%20that%20elements%20that%20are%20not%20known%20will%20be%20-1%20instead.%22%2C%22outputFormat%22%3A%22Print%20%2A%2AP%2A%2A%5E%2A%2Ak%2A%2A%20as%20a%20space%20separated%20list%20on%20its%20own%20line%20with%20as%20many%20elements%20as%20possible%20determined.%20If%20an%20element%20can%27t%20be%20determined%20leave%20it%20as%20-1.%20If%20there%20is%20no%20%2A%2Ak%2A%2A%20such%20that%20%2A%2AP%2A%2A%5E%2A%2Ak%2A%2A%20has%20the%20values%20given%20in%20the%20input%20print%20%5C%22Inconsistent%5C%22%20%28quotes%20for%20clarity%29%20on%20its%20own%20line%20instead.%22%2C%22samples%22%3A%5B%5B%224%5Cr%5Cn1%202%203%200%5Cr%5Cn3%20-1%20-1%20-1%22%2C%223%200%201%202%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B495%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F3166%22%2C%22id%22%3A%223166%22%7D%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Atrue%2C%22totalSubmit%22%3A0%2C%22totalAccepted%22%3A0%2C%22pid%22%3A%22SP3166%22%2C%22title%22%3A%22PERMSG%20-%20Permutation%20Exponentiation%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22PERMSG%20-%20Permutation%20Exponentiation%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>PERMSG - Permutation Exponentiation</h1>
<h2>题目描述</h2>
<div>Alice, a permutation aficionado, has thought up a permutation of **N** (1 <= **N** <= 100000) integers in the range \[0, **N**-1\], **P**. So impressed with herself she has told her friend Bob about **P**.
Normally Alice would call it a day after creating such an impressive permutation but today she decided that she wanted to raise **P** to the power **k** (a positive integer) as well! Unfortunately, after working on the problem for a while she gave up because it was taking too long. Not wanting her efforts to go to waste she once again tells Bob about all the elements she has determined so far. Unfortunately, she neglected to tell Bob the value **k**.
Bob, very interested in Alice's work, needs your help to try and determine any additional elements of **P**^**k**. Bob is suspicious of Alice's work so he also asks you to check it for errors.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line of input contains **N** (1 <= **N** <= 100000), the number of elements in the permutation. The next line contains a permutation of the integers 0 through **N**-1 each separated by a space. The following line will contain the result of applying the permutation **k** times with the exception that elements that are not known will be -1 instead.</div>
<h3>输出格式</h3>
<br />
<div>Print **P**^**k** as a space separated list on its own line with as many elements as possible determined. If an element can't be determined leave it as -1. If there is no **k** such that **P**^**k** has the values given in the input print "Inconsistent" (quotes for clarity) on its own line instead.</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>4
1 2 3 0
3 -1 -1 -1</code></pre>
<h3>输出样例 #1</h3>
<pre><code>3 0 1 2</code></pre>
</article>
</div>
</div>
</body>
</html>
