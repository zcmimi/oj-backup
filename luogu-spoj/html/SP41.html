<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>WORDS1 - Play on Words - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573449507:ypdTBqxnibkO0a4FPRMYTgczEej82Jsq3S4Prb+v4B4=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3A%22%22%2C%22description%22%3A%22%20Some%20of%20the%20secret%20doors%20contain%20a%20very%20interesting%20word%20puzzle.%20The%20team%20of%20archaeologists%20has%20to%20solve%20it%20to%20open%20that%20doors.%20Because%20there%20is%20no%20other%20way%20to%20open%20the%20doors%2C%20the%20puzzle%20is%20very%20important%20for%20us.%5Cn%5Cn%20There%20is%20a%20large%20number%20of%20magnetic%20plates%20on%20every%20door.%20Every%20plate%20has%20one%20word%20written%20on%20it.%20The%20plates%20must%20be%20arranged%20into%20a%20sequence%20in%20such%20a%20way%20that%20every%20word%20begins%20with%20the%20same%20letter%20as%20the%20previous%20word%20ends.%20For%20example%2C%20the%20word%20%60%60acm%27%27%20can%20be%20followed%20by%20the%20word%20%60%60motorola%27%27.%20Your%20task%20is%20to%20write%20a%20computer%20program%20that%20will%20read%20the%20list%20of%20words%20and%20determine%20whether%20it%20is%20possible%20to%20arrange%20all%20of%20the%20plates%20in%20a%20sequence%20%28according%20to%20the%20given%20rule%29%20and%20consequently%20to%20open%20the%20door.%22%2C%22inputFormat%22%3A%22The%20input%20consists%20of%20T%20test%20cases.%20The%20number%20of%20them%20%28T%2C%20equal%20to%20about%20500%29%20is%20given%20on%20the%20first%20line%20of%20the%20input%20file.%20Each%20test%20case%20begins%20with%20a%20line%20containing%20a%20single%20integer%20number%20N%20that%20indicates%20the%20number%20of%20plates%20%281%20%3C%3D%20N%20%3C%3D%20100000%29.%20Then%20exactly%20Nlines%20follow%2C%20each%20containing%20a%20single%20word.%20Each%20word%20contains%20at%20least%20two%20and%20at%20most%201000%20lowercase%20characters%2C%20that%20means%20only%20letters%20%27%60a%60%27%20through%20%27%60z%60%27%20will%20appear%20in%20the%20word.%20The%20same%20word%20may%20appear%20several%20times%20in%20the%20list.%22%2C%22outputFormat%22%3A%22Your%20program%20has%20to%20determine%20whether%20it%20is%20possible%20to%20arrange%20all%20the%20plates%20in%20a%20sequence%20such%20that%20the%20first%20letter%20of%20each%20word%20is%20equal%20to%20the%20last%20letter%20of%20the%20previous%20word.%20All%20the%20plates%20from%20the%20list%20must%20be%20used%2C%20each%20exactly%20once.%20The%20words%20mentioned%20several%20times%20must%20be%20used%20that%20number%20of%20times.%5Cn%5Cn%20If%20there%20exists%20such%20an%20ordering%20of%20plates%2C%20your%20program%20should%20print%20the%20sentence%20%5C%22%60Ordering%20is%20possible.%60%5C%22.%20Otherwise%2C%20output%20the%20sentence%20%5C%22%60The%20door%20cannot%20be%20opened.%60%5C%22.%22%2C%22samples%22%3A%5B%5B%223%5Cn2%5Cnacm%5Cnibm%5Cn3%5Cnacm%5Cnmalform%5Cnmouse%5Cn2%5Cnok%5Cnok%22%2C%22The%20door%20cannot%20be%20opened.%5CnOrdering%20is%20possible.%5CnThe%20door%20cannot%20be%20opened.%22%5D%5D%2C%22hint%22%3A%22%2A%2AWarning%3A%20large%20Input%5C%2FOutput%20data%2C%20be%20careful%20with%20certain%20languages%2A%2A%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B7000%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F41%22%2C%22id%22%3A%2241%22%7D%2C%22translation%22%3A%22%5Cu79d8%5Cu5bc6%5Cu7684%5Cu95e8%5Cu91cc%5Cu85cf%5Cu7740%5Cu4e00%5Cu4e9b%5Cu5b57%5Cu8c1c%5Cu3002%5Cu4e00%5Cu4e9b%5Cu8003%5Cu53e4%5Cu5b66%5Cu5bb6%5Cu5e0c%5Cu671b%5Cu6253%5Cu5f00%5Cu8fd9%5Cu4e9b%5Cu95e8%5Cuff0c%5Cu56e0%5Cu6b64%5Cu4ed6%5Cu4eec%5Cu9700%5Cu8981%5Cu89e3%5Cu5f00%5Cu8fd9%5Cu4e9b%5Cu5b57%5Cu8c1c%5Cu3002%5Cu7531%5Cu4e8e%5Cu6ca1%5Cu6709%5Cu4efb%5Cu4f55%5Cu5176%5Cu4ed6%5Cu65b9%5Cu5f0f%5Cuff08%5Cu4e0d%5Cu8981%5Cu603b%5Cu60f3%5Cu7740%5Cu66b4%5Cu529b%5Cuff01%5Cuff09%5Cu53ef%5Cu4ee5%5Cu6253%5Cu5f00%5Cu8fd9%5Cu6247%5Cu95e8%5Cuff0c%5Cu8fd9%5Cu4e2a%5Cu5b57%5Cu8c1c%5Cu5bf9%5Cu6211%5Cu4eec%5Cu6765%5Cu8bf4%5Cu5c24%5Cu5176%5Cu91cd%5Cu8981%5Cu3002%20%5Cu6bcf%5Cu4e00%5Cu6247%5Cu95e8%5Cu4e0a%5Cu90fd%5Cu6709%5Cu5f88%5Cu591a%5Cu78c1%5Cu6027%5Cu7684%5Cu76d8%5Cu5b50%5Cuff0c%5Cu6bcf%5Cu4e00%5Cu4e2a%5Cu76d8%5Cu5b50%5Cu4e0a%5Cu9762%5Cu90fd%5Cu5199%5Cu7740%5Cu4e00%5Cu4e2a%5Cu5355%5Cu8bcd%5Cu3002%5Cu8fd9%5Cu4e9b%5Cu76d8%5Cu5b50%5Cu5fc5%5Cu987b%5Cu8981%5Cu6309%5Cu7167%5Cu4e00%5Cu79cd%5Cu7279%5Cu6b8a%5Cu7684%5Cu987a%5Cu5e8f%5Cu6392%5Cu5217%5Cuff0c%5Cu5373%5Cu9664%5Cu4e86%5Cu7b2c%5Cu4e00%5Cu4e2a%5Cu5355%5Cu8bcd%5Cu4ee5%5Cu5916%5Cu7684%5Cu6bcf%5Cu4e00%5Cu4e2a%5Cu5355%5Cu8bcd%5Cu7684%5Cu9996%5Cu5b57%5Cu6bcd%5Cu5fc5%5Cu987b%5Cu662f%5Cu524d%5Cu9762%5Cu4e00%5Cu4e2a%5Cu5355%5Cu8bcd%5Cu7684%5Cu7ed3%5Cu5c3e%5Cu5b57%5Cu6bcd%5Cu3002%5Cu4f60%5Cu7684%5Cu4efb%5Cu52a1%5Cu5c31%5Cu662f%5Cu7f16%5Cu5199%5Cu4e00%5Cu4e2a%5Cu7a0b%5Cu5e8f%5Cuff0c%5Cu6d4b%5Cu8bd5%5Cu7ed9%5Cu51fa%5Cu7684%5Cu5355%5Cu8bcd%5Cu80fd%5Cu5426%5Cu6309%5Cu7167%5Cu8981%5Cu6c42%5Cu7684%5Cu987a%5Cu5e8f%5Cu6392%5Cu5217%5Cu5e76%5Cu4e14%5Cu987a%5Cu5229%5Cu5730%5Cu6253%5Cu5f00%5Cu8fd9%5Cu6247%5Cu95e8%5Cu3002%5Cn%5CnTranslated%20by%20%40%5Cu5f20%5Cu6587%5Cu601d%20%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A64%2C%22totalAccepted%22%3A18%2C%22pid%22%3A%22SP41%22%2C%22title%22%3A%22WORDS1%20-%20Play%20on%20Words%22%2C%22difficulty%22%3A3%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A36335%2C%22title%22%3A%22%5Cu7ffb%5Cu8bd1%22%2C%22forum%22%3A%7B%22id%22%3A12884%2C%22name%22%3A%22SP41%20WORDS1%20-%20Play%20on%20Words%22%2C%22slug%22%3A%22SP41%22%7D%7D%2C%7B%22id%22%3A32917%2C%22title%22%3A%22%5Cu7ffb%5Cu8bd1%22%2C%22forum%22%3A%7B%22id%22%3A12884%2C%22name%22%3A%22SP41%20WORDS1%20-%20Play%20on%20Words%22%2C%22slug%22%3A%22SP41%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%7B%22pid%22%3A%22P3368%22%2C%22title%22%3A%22%5Cu3010%5Cu6a21%5Cu677f%5Cu3011%5Cu6811%5Cu72b6%5Cu6570%5Cu7ec4%202%22%2C%22difficulty%22%3A3%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22P3379%22%2C%22title%22%3A%22%5Cu3010%5Cu6a21%5Cu677f%5Cu3011%5Cu6700%5Cu8fd1%5Cu516c%5Cu5171%5Cu7956%5Cu5148%5Cuff08LCA%5Cuff09%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22P%22%7D%2C%7B%22pid%22%3A%22UVA1388%22%2C%22title%22%3A%22Graveyard%22%2C%22difficulty%22%3A3%2C%22type%22%3A%22UVA%22%7D%2C%7B%22pid%22%3A%22UVA10129%22%2C%22title%22%3A%22%5Cu5355%5Cu8bcd%20Play%20on%20Words%22%2C%22difficulty%22%3A3%2C%22type%22%3A%22UVA%22%7D%2C%7B%22pid%22%3A%22P5022%22%2C%22title%22%3A%22%5Cu65c5%5Cu884c%22%2C%22difficulty%22%3A5%2C%22type%22%3A%22P%22%7D%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22WORDS1%20-%20Play%20on%20Words%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>WORDS1 - Play on Words</h1>
<h2>题意翻译</h2>
<div>秘密的门里藏着一些字谜。一些考古学家希望打开这些门，因此他们需要解开这些字谜。由于没有任何其他方式（不要总想着暴力！）可以打开这扇门，这个字谜对我们来说尤其重要。 每一扇门上都有很多磁性的盘子，每一个盘子上面都写着一个单词。这些盘子必须要按照一种特殊的顺序排列，即除了第一个单词以外的每一个单词的首字母必须是前面一个单词的结尾字母。你的任务就是编写一个程序，测试给出的单词能否按照要求的顺序排列并且顺利地打开这扇门。
Translated by @张文思 </div>
<h2>题目描述</h2>
<div> Some of the secret doors contain a very interesting word puzzle. The team of archaeologists has to solve it to open that doors. Because there is no other way to open the doors, the puzzle is very important for us.
There is a large number of magnetic plates on every door. Every plate has one word written on it. The plates must be arranged into a sequence in such a way that every word begins with the same letter as the previous word ends. For example, the word ``acm'' can be followed by the word ``motorola''. Your task is to write a computer program that will read the list of words and determine whether it is possible to arrange all of the plates in a sequence (according to the given rule) and consequently to open the door.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The input consists of T test cases. The number of them (T, equal to about 500) is given on the first line of the input file. Each test case begins with a line containing a single integer number N that indicates the number of plates (1 <= N <= 100000). Then exactly Nlines follow, each containing a single word. Each word contains at least two and at most 1000 lowercase characters, that means only letters '`a`' through '`z`' will appear in the word. The same word may appear several times in the list.</div>
<h3>输出格式</h3>
<br />
<div>Your program has to determine whether it is possible to arrange all the plates in a sequence such that the first letter of each word is equal to the last letter of the previous word. All the plates from the list must be used, each exactly once. The words mentioned several times must be used that number of times.
If there exists such an ordering of plates, your program should print the sentence "`Ordering is possible.`". Otherwise, output the sentence "`The door cannot be opened.`".</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>3
2
acm
ibm
3
acm
malform
mouse
2
ok
ok</code></pre>
<h3>输出样例 #1</h3>
<pre><code>The door cannot be opened.
Ordering is possible.
The door cannot be opened.</code></pre>
<h2>说明</h2>
<div>**Warning: large Input/Output data, be careful with certain languages**</div>
</article>
</div>
</div>
</body>
</html>
