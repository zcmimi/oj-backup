<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>BUS - Bus - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1573449527:5AheNeDrYNk/pUHR1BCqAx6+iBnhjriguFOJnt1CaQ0=">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.com.cn/fe/loader.css?ver=20191106">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentTemplate%22%3A%22ProblemShow%22%2C%22currentData%22%3A%7B%22problem%22%3A%7B%22background%22%3A%22%22%2C%22description%22%3A%22%21%5B%5D%28https%3A%5C%2F%5C%2Fcdn.luogu.com.cn%5C%2Fupload%5C%2Fvjudge_pic%5C%2FSP99%5C%2F5d325264e1a9fb4c47600ca0cdf0153be045b4e1.png%29The%20city%20Buscelona%20%28as%20the%20name%20suggests%29%20has%20a%20great%20bus%20transport%20system.%20All%20buses%20have%20circular%20lines.%20The%20bus%20drivers%20in%20Buscelona%20like%20to%20chat.%20Fortunately%20most%20bus%20lines%20have%20some%20stops%20in%20common.%20If%20a%20bus%20driver%20meets%20a%20colleague%20on%20a%20bus%20stop%20they%20chat%20a%20bit%20and%20exchange%20all%20news%20they%20know.%5Cn%5CnThe%20operation%20of%20buses%20is%20highly%20synchronized.%20The%20time%20necessary%20to%20get%20from%20one%20stop%20to%20the%20next%20stop%20is%20always%20exactly%201%20minute.%5Cn%5CnEach%20morning%20each%20bus%20driver%20has%20some%20important%20news%20that%20only%20he%20knows.%20When%20a%20busdriver%20meets%20a%20colleague%20he%20will%20tell%20him%20all%20news%20he%20knows.%20If%20two%20bus%20drivers%20share%20the%20same%20start%20station%2C%20they%20will%20exchange%20their%20news%20there%20already%20%28before%20they%20start%20working%29.%20Note%20that%20exchanging%20news%20and%20stopping%20does%20not%20take%20any%20time.%22%2C%22inputFormat%22%3A%22The%20first%20line%20of%20a%20test%20case%20contains%20the%20number%20of%20bus%20lines%20_n_%20%280%20%3C%20_n_%20%3C%2050%29.%20The%20following%20_n_%20lines%20start%20with%20a%20number%20_s_%20%280%20%3C%20_s_%20%3C%2050%29%20indicating%20the%20stops%20of%20a%20busline.%20On%20the%20same%20line%20follow%20_s_%20numbers%20representing%20a%20bus%20station%20each.%20A%20bus%20starts%20at%20the%20first%20station.%20When%20a%20bus%20reaches%20the%20last%20station%2C%20the%20bus%20will%20drive%20to%20the%20first%20station%20again.%5Cn%5CnThere%20are%20many%20test%20cases%20separated%20by%20an%20empty%20line.%20Input%20data%20terminates%20with%20_n_%20%3D%200.%22%2C%22outputFormat%22%3A%22For%20each%20test%20case%20you%20should%20output%20the%20time%20in%20minutes%20which%20it%20takes%20until%20all%20bus%20drivers%20know%20all%20news.%20If%20that%20never%20happens%2C%20your%20program%20should%20write%20the%20word%20%5C%22NEVER%5C%22%20%28without%20quotes%29.%22%2C%22samples%22%3A%5B%5B%223%5Cn3%201%202%203%5Cn3%202%203%201%5Cn4%202%203%204%205%5Cn%5Cn2%5Cn2%201%202%5Cn2%205%208%5Cn%5Cn0%22%2C%2212%5CnNEVER%22%5D%5D%2C%22hint%22%3A%22%22%2C%22provider%22%3A%7B%22uid%22%3A3%2C%22name%22%3A%22%5Cu6d1b%5Cu8c37%22%2C%22slogan%22%3A%22%22%2C%22badge%22%3A%22%22%2C%22isAdmin%22%3Atrue%2C%22color%22%3A%22Purple%22%2C%22ccfLevel%22%3A0%7D%2C%22canEdit%22%3Afalse%2C%22limits%22%3A%7B%22time%22%3A%5B7000%5D%2C%22memory%22%3A%5B1536000%5D%7D%2C%22stdCode%22%3A%22%22%2C%22vjudge%22%3A%7B%22origin%22%3A%22SPOJ%22%2C%22link%22%3A%22%5C%2Fjump%5C%2Fspoj%5C%2F99%22%2C%22id%22%3A%2299%22%7D%2C%22translation%22%3A%22%5Cu9898%5Cu76ee%5Cu63cf%5Cu8ff0%5Cuff1a%5Cn%5Cn%5Cu67d0%5Cu4e2a%5Cu57ce%5Cu5e02%5Cu6709%5Cu4e00%5Cu4e2a%5Cu516c%5Cu4ea4%5Cu7cfb%5Cu7edf%5Cuff0c%5Cu6709%5Cu5f88%5Cu591a%5Cu6761%5Cu516c%5Cu4ea4%5Cu7ebf%5Cu8def%5Cuff0c%5Cu6bcf%5Cu6761%5Cu7ebf%5Cu8def%5Cu90fd%5Cu6709%5Cu4e00%5Cu4e9b%5Cu505c%5Cu9760%5Cu7ad9%5Cuff0c%5Cu4e0d%5Cu540c%5Cu7684%5Cu516c%5Cu4ea4%5Cu7ebf%5Cu8def%5Cu4f1a%5Cu6709%5Cu91cd%5Cu5408%5Cu7684%5Cu516c%5Cu4ea4%5Cu7ad9%5Cu3002%5Cu516c%5Cu4ea4%5Cu8f66%5Cu4ece%5Cu5f53%5Cu524d%5Cu7ad9%5Cu9a76%5Cu5230%5Cu4e0b%5Cu4e00%5Cu7ad9%5Cu6240%5Cu9700%5Cu8981%5Cu7684%5Cu65f6%5Cu95f4%5Cu6052%5Cu5b9a%5Cu4e3a1%5Cu5206%5Cu949f%5Cu3002%5Cu6bcf%5Cu5929%5Cu65e9%5Cu4e0a%5Cu6bcf%5Cu4e00%5Cu4e2a%5Cu516c%5Cu4ea4%5Cu53f8%5Cu673a%5Cu90fd%5Cu4f1a%5Cu6709%5Cu4e00%5Cu4e2a%5Cu522b%5Cu7684%5Cu53f8%5Cu673a%5Cu90fd%5Cu4e0d%5Cu77e5%5Cu9053%5Cu7684%5Cu6d88%5Cu606f%5Cuff0c%5Cu5f53%5Cu4e00%5Cu4e2a%5Cu5f00%5Cu516c%5Cu4ea4%5Cu7684%5Cu53f8%5Cu673a%5Cu9047%5Cu5230%5Cu53e6%5Cu4e00%5Cu4e2a%5Cu5f00%5Cu516c%5Cu4ea4%5Cu7684%5Cu53f8%5Cu673a%5Cu65f6%5Cuff0c%5Cu4ed6%5Cu4eec%5Cu7684%5Cu5f53%5Cu524d%5Cu6240%5Cu638c%5Cu63e1%5Cu7684%5Cu6240%5Cu6709%5Cu6d88%5Cu606f%5Cu5c31%5Cu4f1a%5Cu5171%5Cu4eab%5Cu3002%5Cu5982%5Cu679c%5Cu4e24%5Cu4e2a%5Cu53f8%5Cu673a%5Cu65f6%5Cu5728%5Cu540c%5Cu4e00%5Cu7ad9%5Cu70b9%5Cu5f00%5Cu59cb%5Cu5de5%5Cu4f5c%5Cuff0c%5Cu90a3%5Cu4e48%5Cu4ed6%5Cu4eec%5Cu7684%5Cu6d88%5Cu606f%5Cu4f1a%5Cu5728%5Cu5de5%5Cu4f5c%5Cu5f00%5Cu59cb%5Cu4e4b%5Cu524d%5Cu5c31%5Cu5171%5Cu4eab%5Cu3002%5Cu4f46%5Cu662f%5Cuff0c%5Cu5171%5Cu4eab%5Cu6d88%5Cu606f%5Cu548c%5Cu505c%5Cu9760%5Cu4e0d%5Cu6d88%5Cu8017%5Cu4efb%5Cu4f55%5Cu65f6%5Cu95f4%5Cu3002%5Cn%5Cn%5Cu8f93%5Cu5165%5Cuff1a%5Cn%5Cn%5Cu7b2c%5Cu4e00%5Cu884c%5Cu662fn%5Cuff0c%5Cu8868%5Cu793a%5Cu6709n%280%3Cn%3C50%29%5Cu6761%5Cu7ebf%5Cu8def%5Cuff0c%5Cu4e4b%5Cu540e%5Cu7684n%5Cu884c%5Cuff0c%5Cu7b2c%5Cu4e00%5Cu4e2a%5Cu6570s%5Cu8868%5Cu793a%5Cu8fd9%5Cu6761%5Cu7ebf%5Cu6709s%280%3Cs%3C50%29%5Cu4e2a%5Cu505c%5Cu9760%5Cu70b9%5Cuff0c%5Cu4e4b%5Cu540e%5Cu7684s%5Cu4e2a%5Cu6570%5Cu8868%5Cu793a%5Cu505c%5Cu9760%5Cu70b9%5Cu7684%5Cu7f16%5Cu53f7%5Cu3002%5Cu6bcf%5Cu4e00%5Cu7ec4%5Cu6d4b%5Cu8bd5%5Cu70b9%5Cu7684%5Cu6d4b%5Cu8bd5%5Cu6570%5Cu636e%5Cu662f%5Cu4e0d%5Cu5b9a%5Cu91cf%5Cu7684%5Cuff0c%5Cu4ee5n%3D0%5Cu7ed3%5Cu5c3e%5Cu3002%5Cn%5Cn%5Cu8f93%5Cu51fa%5Cuff1a%5Cn%5Cn%5Cu5982%5Cu679c%5Cu6700%5Cu540e%5Cu6240%5Cu6709%5Cu7684%5Cu53f8%5Cu673a%5Cu90fd%5Cu80fd%5Cu77e5%5Cu9053%5Cu6240%5Cu6709%5Cu7684%5Cu6d88%5Cu606f%5Cuff0c%5Cu8f93%5Cu51fa%5Cu6700%5Cu77ed%5Cu7684%5Cu65f6%5Cu95f4%5Cuff0c%5Cu5426%5Cu5219%5Cu8f93%5Cu51fa%5C%22NEVER%5C%22%5Cuff08%5Cu4e0d%5Cu5305%5Cu62ec%5Cu5f15%5Cu53f7%5Cuff09%5Cu3002%5Cn%5CnBy%20%40Fraciton%20%22%2C%22tags%22%3A%5B%5D%2C%22wantsTranslation%22%3Afalse%2C%22totalSubmit%22%3A0%2C%22totalAccepted%22%3A0%2C%22pid%22%3A%22SP99%22%2C%22title%22%3A%22BUS%20-%20Bus%22%2C%22difficulty%22%3A0%2C%22type%22%3A%22SP%22%7D%2C%22contest%22%3Anull%2C%22discussions%22%3A%5B%7B%22id%22%3A34984%2C%22title%22%3A%22%5Cu5927%5Cu81f4%5Cu9898%5Cu610f%22%2C%22forum%22%3A%7B%22id%22%3A12933%2C%22name%22%3A%22SP99%20BUS%20-%20Bus%22%2C%22slug%22%3A%22SP99%22%7D%7D%5D%2C%22bookmarked%22%3Afalse%2C%22vjudgeUsername%22%3Anull%2C%22recommendations%22%3A%5B%5D%2C%22lastLanguage%22%3A%22%22%2C%22lastCode%22%3A%22%22%7D%2C%22currentTitle%22%3A%22BUS%20-%20Bus%22%2C%22currentTheme%22%3Anull%7D"));window._feConfigVersion=1572920822;</script>
<script src="https://cdn.luogu.com.cn/fe/loader.js?ver=20191106" charset="utf-8" defer></script>
</head>
<body>
<div id="app">
<div class="lg-container">
<article>
<h1>BUS - Bus</h1>
<h2>题意翻译</h2>
<div>题目描述：
某个城市有一个公交系统，有很多条公交线路，每条线路都有一些停靠站，不同的公交线路会有重合的公交站。公交车从当前站驶到下一站所需要的时间恒定为1分钟。每天早上每一个公交司机都会有一个别的司机都不知道的消息，当一个开公交的司机遇到另一个开公交的司机时，他们的当前所掌握的所有消息就会共享。如果两个司机时在同一站点开始工作，那么他们的消息会在工作开始之前就共享。但是，共享消息和停靠不消耗任何时间。
输入：
第一行是n，表示有n(0<n<50)条线路，之后的n行，第一个数s表示这条线有s(0<s<50)个停靠点，之后的s个数表示停靠点的编号。每一组测试点的测试数据是不定量的，以n=0结尾。 输出： 如果最后所有的司机都能知道所有的消息，输出最短的时间，否则输出"NEVER"（不包括引号）。 By @Fraciton </div>
<h2>题目描述</h2>
<div>![](https://cdn.luogu.com.cn/upload/vjudge_pic/SP99/5d325264e1a9fb4c47600ca0cdf0153be045b4e1.png)The city Buscelona (as the name suggests) has a great bus transport system. All buses have circular lines. The bus drivers in Buscelona like to chat. Fortunately most bus lines have some stops in common. If a bus driver meets a colleague on a bus stop they chat a bit and exchange all news they know.
The operation of buses is highly synchronized. The time necessary to get from one stop to the next stop is always exactly 1 minute.
Each morning each bus driver has some important news that only he knows. When a busdriver meets a colleague he will tell him all news he knows. If two bus drivers share the same start station, they will exchange their news there already (before they start working). Note that exchanging news and stopping does not take any time.</div>
<h2>输入输出格式</h2>
<h3>输入格式</h3>
<br />
<div>The first line of a test case contains the number of bus lines _n_ (0 < _n_ < 50). The following _n_ lines start with a number _s_ (0 < _s_ < 50) indicating the stops of a busline. On the same line follow _s_ numbers representing a bus station each. A bus starts at the first station. When a bus reaches the last station, the bus will drive to the first station again.
There are many test cases separated by an empty line. Input data terminates with _n_ = 0.</div>
<h3>输出格式</h3>
<br />
<div>For each test case you should output the time in minutes which it takes until all bus drivers know all news. If that never happens, your program should write the word "NEVER" (without quotes).</div>
<h2>输入输出样例</h2>
<h3>输入样例 #1</h3>
<pre><code>3
3 1 2 3
3 2 3 1
4 2 3 4 5

2
2 1 2
2 5 8

0</code></pre>
<h3>输出样例 #1</h3>
<pre><code>12
NEVER</code></pre>
</article>
</div>
</div>
</body>
</html>
